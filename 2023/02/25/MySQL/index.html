<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="MySQL   【Refer】 宋红康 MySQL 入门到精通 官网：https:&#x2F;&#x2F;www.mysql.com&#x2F; 文档：https:&#x2F;&#x2F;docs.oracle.com&#x2F;en-us&#x2F;iaas&#x2F;mysql-database&#x2F;doc&#x2F;getting-started.html MySQL 50题 高性能 MySQL  MySQL 概述MySQL简介  MySQL 是一个关系型数据库管理系统，由瑞典 My">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL">
<meta property="og:url" content="http://example.com/2023/02/25/MySQL/index.html">
<meta property="og:site_name" content="MineTing">
<meta property="og:description" content="MySQL   【Refer】 宋红康 MySQL 入门到精通 官网：https:&#x2F;&#x2F;www.mysql.com&#x2F; 文档：https:&#x2F;&#x2F;docs.oracle.com&#x2F;en-us&#x2F;iaas&#x2F;mysql-database&#x2F;doc&#x2F;getting-started.html MySQL 50题 高性能 MySQL  MySQL 概述MySQL简介  MySQL 是一个关系型数据库管理系统，由瑞典 My">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/MySQL%E9%80%BB%E8%BE%91%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.jpg">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/7%E7%A7%8DJOIN%E7%90%86%E8%AE%BA.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Get_Format%E4%B8%8Edate_type%E5%85%B3%E7%B3%BB.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/MySQL50%E9%A2%98.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006172123361.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006182044473.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006182956412.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006184029571.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006184319151.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006184338549.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006184523873.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006185930088.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006190248776.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006190319449.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006190406575.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006190614716.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006190648292.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006190755759.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006190924207.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006191031290.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006191129061.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006191202220.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006191427766.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006191619424.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006192057410.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006192403646.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006192733929.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006193639519.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006193826920.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006194232740.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006194414877.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006194502965.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006194750583.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006194914897.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006195225436.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006195603694.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006195848293.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006195944984.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006200225231.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006202906949.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006203113294.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006205026827.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006214908963.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006215142556.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006220822455.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006220738234.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006221117759.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006221525315.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006221655336.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006221824011.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006222003661.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006222148674.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006222518353.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006222646312.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006222718225.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006223209912.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006223342768.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006224016041.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006224706809.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006225059667.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006225325685.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006231402679.png">
<meta property="og:image" content="http://example.com/2023/02/25/MySQL/Java/Document/MySQL/MySQL.assets/image-20221006231427799.png">
<meta property="article:published_time" content="2023-02-24T16:00:00.000Z">
<meta property="article:modified_time" content="2023-03-22T08:13:30.563Z">
<meta property="article:author" content="Fei">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2023/02/25/MySQL/MySQL%E9%80%BB%E8%BE%91%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.jpg">

<link rel="canonical" href="http://example.com/2023/02/25/MySQL/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>MySQL | MineTing</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">MineTing</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/02/25/MySQL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Fei">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MineTing">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MySQL
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-02-25 00:00:00" itemprop="dateCreated datePublished" datetime="2023-02-25T00:00:00+08:00">2023-02-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-03-22 16:13:30" itemprop="dateModified" datetime="2023-03-22T16:13:30+08:00">2023-03-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <div align="center"><font size="70"><b>MySQL</b></font></div>

<blockquote>
<p>【Refer】</p>
<p>宋红康 MySQL 入门到精通</p>
<p>官网：<a target="_blank" rel="noopener" href="https://www.mysql.com/">https://www.mysql.com/</a></p>
<p>文档：<a target="_blank" rel="noopener" href="https://docs.oracle.com/en-us/iaas/mysql-database/doc/getting-started.html">https://docs.oracle.com/en-us/iaas/mysql-database/doc/getting-started.html</a></p>
<p>MySQL 50题</p>
<p>高性能 MySQL</p>
</blockquote>
<h1 id="MySQL-概述"><a href="#MySQL-概述" class="headerlink" title="MySQL 概述"></a>MySQL 概述</h1><h2 id="MySQL简介"><a href="#MySQL简介" class="headerlink" title="MySQL简介"></a>MySQL简介</h2><blockquote>
<ol>
<li><p>MySQL 是一个关系型数据库管理系统，由瑞典 MySQL AB 公司开发，目前属于 Oracle 公司。</p>
</li>
<li><p>MySQL 是一种关联数据库管理系统，将数据保存在不同的表中，而不是将所有数据放在一个大仓库内，这样就增加了速度并提高了灵活性。</p>
</li>
<li><p>MySQL 是开源的。</p>
</li>
<li><p>MySQL 支持大型的数据库，可以处理拥有上千万条记录的大型数据库。</p>
</li>
<li><p>MySQL 使用标准的SQL数据语言形式。</p>
</li>
<li><p>MySQL 可以允许于多个系统上，并且支持多种语言。这些编程语言包括C、C++、Python、 Java、 Perl、 PHP、Eiffel、 Ruby和Tcl等。</p>
</li>
<li><p>MySQL 支持大型数据库，支持 5000万条记录的数据仓库，32位系统表文件最大可支持 4GB，64位系统支持最大的表文件为8TB。</p>
</li>
<li><p>MySQL 是可以定制的，采用了GPL协议，可以修改源码来开发自己的 MySQL 系统。</p>
</li>
</ol>
</blockquote>
<h2 id="MySQL-安装"><a href="#MySQL-安装" class="headerlink" title="MySQL 安装"></a>MySQL 安装</h2><p>下载地址：<a target="_blank" rel="noopener" href="https://downloads.mysql.com/archives/community/">https://downloads.mysql.com/archives/community/</a></p>
<h3 id="一般安装方式"><a href="#一般安装方式" class="headerlink" title="一般安装方式"></a>一般安装方式</h3><ul>
<li><p>源码编译</p>
</li>
<li><p>压缩包解压（一般为tar.gz）</p>
</li>
<li><p>编译好的安装包（RPM、DPKG等）</p>
</li>
<li><p>在线安装（YUM、APT等）</p>
<p>  安装简单程度：YUM &gt; RPM &gt; tar.gz &gt; 源码安装</p>
</li>
</ul>
<h3 id="MySQL-5-7-安装"><a href="#MySQL-5-7-安装" class="headerlink" title="MySQL 5.7 安装"></a>MySQL 5.7 安装</h3><p>环境：CentOS7.9 + MySQL5.7.36</p>
<h4 id="压缩包解压安装"><a href="#压缩包解压安装" class="headerlink" title="压缩包解压安装"></a>压缩包解压安装</h4><p>环境：CentOS7.9  + MySQL5.7.36.tar.gz</p>
<h5 id="第一步：上传并解压-tar-gz"><a href="#第一步：上传并解压-tar-gz" class="headerlink" title="第一步：上传并解压 tar.gz"></a>第一步：上传并解压 tar.gz</h5><p>​		拷贝压缩包 .tar.gz 到 &#x2F;opt 目录，并解压至 <strong>&#x2F;usr&#x2F;local&#x2F;mysql</strong> 中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql]# mkdir /opt/mysql</span><br><span class="line">x1[root@localhost mysql]# mkdir /usr/local/mysql/</span><br><span class="line">[root@localhost mysql]# tar zxvf mysql-5.7.36-linux-glibc2.12-x86_64.tar.gz</span><br><span class="line">[root@localhost mysql]# mv mysql-5.7.36-linux-glibc2.12-x86_64/* /usr/local/mysql</span><br><span class="line">[root@localhost mysql]# ls /usr/local/mysql/</span><br><span class="line">bin  docs  include  lib  LICENSE  man  README  share  support-files</span><br></pre></td></tr></table></figure>

<h5 id="第二步：创建-mysql-用户"><a href="#第二步：创建-mysql-用户" class="headerlink" title="第二步：创建 mysql 用户"></a>第二步：创建 mysql 用户</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql]# id mysql</span><br><span class="line">id: mysql: no such user</span><br><span class="line">[root@localhost mysql]# useradd -r -s /sbin/nologin mysql</span><br><span class="line">[root@localhost mysql]# id mysql</span><br><span class="line">uid=987(mysql) gid=981(mysql) 组=981(mysql)</span><br><span class="line">[root@localhost mysql]#</span><br></pre></td></tr></table></figure>

<h5 id="第三步：更改权限"><a href="#第三步：更改权限" class="headerlink" title="第三步：更改权限"></a>第三步：更改权限</h5><p>​		更改mysql组下面mysql用户对 &#x2F;usr&#x2F;local&#x2F;mysql 权限</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost local]# ll mysql</span><br><span class="line">总用量 272</span><br><span class="line">drwxr-xr-x.  2 root root    4096 4月  26 18:02 bin</span><br><span class="line">drwxr-xr-x.  2 root root      55 4月  26 18:02 docs</span><br><span class="line">drwxr-xr-x.  3 root root    4096 4月  26 18:02 include</span><br><span class="line">drwxr-xr-x.  5 root root     230 4月  26 18:02 lib</span><br><span class="line">-rw-r--r--.  1 7161 31415 259199 9月   7 2021 LICENSE</span><br><span class="line">drwxr-xr-x.  4 root root      30 4月  26 18:02 man</span><br><span class="line">-rw-r--r--.  1 7161 31415    566 9月   7 2021 README</span><br><span class="line">drwxr-xr-x. 28 root root    4096 4月  26 18:02 share</span><br><span class="line">drwxr-xr-x.  2 root root      90 4月  26 18:02 support-files</span><br><span class="line">[root@localhost local]# chown -R mysql.mysql /usr/local/mysql/</span><br><span class="line">[root@localhost local]# ll mysql</span><br><span class="line">总用量 272</span><br><span class="line">drwxr-xr-x.  2 mysql mysql   4096 4月  26 18:02 bin</span><br><span class="line">drwxr-xr-x.  2 mysql mysql     55 4月  26 18:02 docs</span><br><span class="line">drwxr-xr-x.  3 mysql mysql   4096 4月  26 18:02 include</span><br><span class="line">drwxr-xr-x.  5 mysql mysql    230 4月  26 18:02 lib</span><br><span class="line">-rw-r--r--.  1 mysql mysql 259199 9月   7 2021 LICENSE</span><br><span class="line">drwxr-xr-x.  4 mysql mysql     30 4月  26 18:02 man</span><br><span class="line">-rw-r--r--.  1 mysql mysql    566 9月   7 2021 README</span><br><span class="line">drwxr-xr-x. 28 mysql mysql   4096 4月  26 18:02 share</span><br><span class="line">drwxr-xr-x.  2 mysql mysql     90 4月  26 18:02 support-files</span><br></pre></td></tr></table></figure>

<h5 id="第四步：卸载mariadb-libs库文件"><a href="#第四步：卸载mariadb-libs库文件" class="headerlink" title="第四步：卸载mariadb-libs库文件"></a>第四步：<strong>卸载mariadb-libs库文件</strong></h5><p>​		由于CentOS7操作系统默认安装 mariadb-libs 库，它与 MySQL 冲突，影响初始化</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost local]# yum remove mariadb-libs</span><br></pre></td></tr></table></figure>

<h5 id="第五步：初始化数据库"><a href="#第五步：初始化数据库" class="headerlink" title="第五步：初始化数据库"></a>第五步：初始化数据库</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">没有data目录，需要初始化表</span></span><br><span class="line">[root@localhost mysql]# ls</span><br><span class="line">bin  docs  include  lib  LICENSE  man  README  share  support-files</span><br><span class="line">[root@localhost mysql]# bin/mysql_install_db --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --user=mysql</span><br><span class="line">2022-04-26 18:28:38 [WARNING] mysql_install_db is deprecated. Please consider switching to mysqld --initialize</span><br><span class="line">2022-04-26 18:28:41 [WARNING] The bootstrap log isn&#x27;t empty:</span><br><span class="line">2022-04-26 18:28:41 [WARNING] 2022-04-26T10:28:38.178883Z 0 [Warning] --bootstrap is deprecated. Please consider using --initialize instead</span><br><span class="line">2022-04-26T10:28:38.179678Z 0 [Warning] Changed limits: max_open_files: 1024 (requested 5000)</span><br><span class="line">2022-04-26T10:28:38.179692Z 0 [Warning] Changed limits: table_open_cache: 431 (requested 2000)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">====mysql_install_db废弃，使用mysqld --initialize代替====</span></span><br><span class="line">[root@localhost mysql]#  bin/mysqld --initialize</span><br><span class="line">2022-04-26T10:31:09.781805Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).</span><br><span class="line">......</span><br><span class="line">[root@localhost mysql]# ls data</span><br><span class="line">auto.cnf    client-cert.pem  ibdata1      mysql               public_key.pem   sys</span><br><span class="line">ca-key.pem  client-key.pem   ib_logfile0  performance_schema  server-cert.pem</span><br><span class="line">ca.pem      ib_buffer_pool   ib_logfile1  private_key.pem     server-key.pem</span><br></pre></td></tr></table></figure>

<h5 id="第六步：配置service命令"><a href="#第六步：配置service命令" class="headerlink" title="第六步：配置service命令"></a>第六步：配置service命令</h5><p>​		复制 support-files 目录下的 mysql.service 脚本到 &#x2F;etc&#x2F;init.d 目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">服务自启动</span></span><br><span class="line">[root@localhost mysql]# cp support-files/mysql.server /etc/init.d/mysql</span><br><span class="line">[root@localhost mysql]# service mysql start</span><br><span class="line">Starting MySQL.Logging to &#x27;/usr/local/mysql/data/localhost.localdomain.err&#x27;.</span><br><span class="line"> ERROR! The server quit without updating PID file (/usr/local/mysql/data/localhost.localdomain.pid).</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">/usr/local/mysql/data/rekfan.pid 文件没有写的权限没有权限</span></span><br><span class="line">[root@localhost mysql]# chown -R mysql.mysql /usr/local/mysql/</span><br><span class="line">[root@localhost mysql]# service mysql start</span><br><span class="line">Starting MySQL.Logging to &#x27;/usr/local/mysql/data/localhost.localdomain.err&#x27;.</span><br><span class="line"> SUCCESS!</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">可以配置环境变量代替</span></span><br><span class="line">[root@localhost mysql]# ln -s /usr/local/mysql/bin/mysql /usr/bin/mysql</span><br></pre></td></tr></table></figure>

<h5 id="第七步：配置密码"><a href="#第七步：配置密码" class="headerlink" title="第七步：配置密码"></a>第七步：配置密码</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置密码报错</span></span><br><span class="line">[root@localhost mysql]# bin/mysqladmin -u root password &#x27;root&#x27;</span><br><span class="line">mysqladmin: connect to server at &#x27;localhost&#x27; failed</span><br><span class="line">error: &#x27;Access denied for user &#x27;root&#x27;@&#x27;localhost&#x27; (using password: NO)&#x27;</span><br><span class="line">ERROR 1045 (28000): Access denied for user &#x27;root&#x27;@&#x27;localhost&#x27; (using password: NO)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询默认密码，使用默认密码登录</span></span><br><span class="line">[root@localhost mysql]# cat /root/.mysql_secret</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Password <span class="built_in">set</span> <span class="keyword">for</span> user <span class="string">&#x27;root@localhost&#x27;</span> at 2022-04-26 18:28:38</span></span><br><span class="line">aUs6:3#hedu.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置密码</span></span><br><span class="line">[root@localhost mysql]# pwd</span><br><span class="line">/usr/local/mysql</span><br><span class="line">[root@localhost mysql]# bin/mysqladmin -h localhost -u root password &#x27;root&#x27; -p&#x27;aUs6:3#hedu.&#x27;</span><br><span class="line">mysqladmin: [Warning] Using a password on the command line interface can be insecure.</span><br><span class="line">Warning: Since password will be sent to server in plain text, use ssl connection to ensure password safety.</span><br><span class="line">[root@localhost mysql]# mysql -uroot -proot</span><br><span class="line">mysql: [Warning] Using a password on the command line interface can be insecure.</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 7</span><br><span class="line">Server version: 5.7.36 MySQL Community Server (GPL)</span><br><span class="line">Copyright (c) 2000, 2021, Oracle and/or its affiliates.</span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line"><span class="meta prompt_">mysql&gt;</span></span><br></pre></td></tr></table></figure>

<p>此处如果报错：</p>
<p>cat: &#x2F;root&#x2F;.mysql_secret: 没有那个文件或目录</p>
<p>解决方案：重置密码。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql]# vi /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">忽略密码</span></span><br><span class="line">skip-grant-tables</span><br><span class="line">[root@localhost mysql]# mysql -uroot</span><br><span class="line">mysql: [Warning] Using a password on the command line interface can be insecure.</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 4</span><br><span class="line">Server version: 5.7.36 MySQL Community Server (GPL)</span><br><span class="line">Copyright (c) 2000, 2021, Oracle and/or its affiliates.</span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line"><span class="meta prompt_">mysql&gt;</span><span class="language-bash">update mysql.user <span class="built_in">set</span> authentication_string=PASSWORD(<span class="string">&#x27;root&#x27;</span>) <span class="built_in">where</span> user=<span class="string">&#x27;root&#x27;</span>;</span></span><br><span class="line">Query OK, 1 row affected, 1 warning (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">flush privileges;</span></span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>



<h5 id="第八步：开放端口3306"><a href="#第八步：开放端口3306" class="headerlink" title="第八步：开放端口3306"></a>第八步：开放端口3306</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看开放的端口号</span></span><br><span class="line">firewall-cmd --list-all</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置开放的端口号</span></span><br><span class="line">firewall-cmd --add-service=mysql --permanent</span><br><span class="line">firewall-cmd --add-port=3306/tcp --permanent</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重启防火墙</span></span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<h5 id="第九步：远程用户登录"><a href="#第九步：远程用户登录" class="headerlink" title="第九步：远程用户登录"></a>第九步：远程用户登录</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">update user <span class="built_in">set</span> host = <span class="string">&#x27;%&#x27;</span> <span class="built_in">where</span> user =<span class="string">&#x27;root&#x27;</span>;</span></span><br><span class="line">ERROR 1046 (3D000): No database selected</span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">use mysql;</span></span><br><span class="line">ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">解决：重置密码</span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash"><span class="built_in">set</span> password=password(<span class="string">&#x27;root&#x27;</span>);</span></span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">use mysql</span></span><br><span class="line">Reading table information for completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">Database changed</span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">select host, user from user;</span></span><br><span class="line">+-----------+---------------+</span><br><span class="line">| host      | user          |</span><br><span class="line">+-----------+---------------+</span><br><span class="line">| localhost | root          |</span><br><span class="line">| localhost | mysql.session |</span><br><span class="line">| localhost | mysql.sys     |</span><br><span class="line">+-----------+---------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改用户为root的host为 % ，% 通配符表示任意主机都能访问</span></span><br><span class="line"><span class="meta prompt_">mysql&gt;</span><span class="language-bash">update user <span class="built_in">set</span> host = <span class="string">&#x27;%&#x27;</span> <span class="built_in">where</span> user =<span class="string">&#x27;root&#x27;</span>;</span></span><br><span class="line"></span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">刷新权限</span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">flush privileges;</span></span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">select host, user from user;</span></span><br><span class="line">+-----------+---------------+</span><br><span class="line">| host      | user          |</span><br><span class="line">+-----------+---------------+</span><br><span class="line">| %         | root          |</span><br><span class="line">| localhost | mysql.session |</span><br><span class="line">| localhost | mysql.sys     |</span><br><span class="line">+-----------+---------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h5 id="第十步：用户管理"><a href="#第十步：用户管理" class="headerlink" title="第十步：用户管理"></a>第十步：用户管理</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建用户</span></span><br><span class="line">CREATE USER &#x27;liufei&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;liufei&#x27;;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改密码</span></span><br><span class="line">update mysql.user set authentication_string=password(&#x27;123456&#x27;) where user=&#x27;liufei&#x27;; </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">用户授权</span></span><br><span class="line">grant all privileges on 数据库名.* to &#x27;liufei&#x27;@&#x27;%&#x27;;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除用户</span></span><br><span class="line">Delete FROM mysql.user Where user=&#x27;liufei&#x27;;</span><br></pre></td></tr></table></figure>

<h5 id="第十一步：配置文件说明"><a href="#第十一步：配置文件说明" class="headerlink" title="第十一步：配置文件说明"></a>第十一步：配置文件说明</h5><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/djcode/article/details/78621772">https://blog.csdn.net/djcode/article/details/78621772</a></p>
<h5 id="第十二步：乱码问题"><a href="#第十二步：乱码问题" class="headerlink" title="第十二步：乱码问题"></a>第十二步：乱码问题</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">show variables like <span class="string">&#x27;%char%&#x27;</span>;</span></span><br><span class="line">+--------------------------+----------------------------------+</span><br><span class="line">| Variable_name            | Value                            |</span><br><span class="line">+--------------------------+----------------------------------+</span><br><span class="line">| character_set_client     | utf8                             |</span><br><span class="line">| character_set_connection | utf8                             |</span><br><span class="line">| character_set_database   | latin1                           |</span><br><span class="line">| character_set_filesystem | binary                           |</span><br><span class="line">| character_set_results    | utf8                             |</span><br><span class="line">| character_set_server     | latin1                           |</span><br><span class="line">| character_set_system     | utf8                             |</span><br><span class="line">| character_sets_dir       | /usr/local/mysql/share/charsets/ |</span><br><span class="line">+--------------------------+----------------------------------+</span><br><span class="line">8 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>

<p>在 &#x2F;etc 目录下新建 my.cnf文件：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">no-beep</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">character-set-server=utf8</span><br></pre></td></tr></table></figure>

<p>重启 mysql 服务，查看字符集编码：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql]# service mysql restart</span><br><span class="line">Shutting down MySQL.... SUCCESS!</span><br><span class="line">Starting MySQL. SUCCESS!</span><br><span class="line">......</span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">show variables like <span class="string">&#x27;%char%&#x27;</span>;</span></span><br><span class="line">+--------------------------+----------------------------------+</span><br><span class="line">| Variable_name            | Value                            |</span><br><span class="line">+--------------------------+----------------------------------+</span><br><span class="line">| character_set_client     | utf8                             |</span><br><span class="line">| character_set_connection | utf8                             |</span><br><span class="line">| character_set_database   | utf8                             |</span><br><span class="line">| character_set_filesystem | binary                           |</span><br><span class="line">| character_set_results    | utf8                             |</span><br><span class="line">| character_set_server     | utf8                             |</span><br><span class="line">| character_set_system     | utf8                             |</span><br><span class="line">| character_sets_dir       | /usr/local/mysql/share/charsets/ |</span><br><span class="line">+--------------------------+----------------------------------+</span><br><span class="line">8 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>

<h4 id="二进制编译安装"><a href="#二进制编译安装" class="headerlink" title="二进制编译安装"></a>二进制编译安装</h4><p>环境：CentO S6.8 +  MySQL5.6</p>
<h5 id="第一步：安装编译环境-gcc-c"><a href="#第一步：安装编译环境-gcc-c" class="headerlink" title="第一步：安装编译环境 gcc-c++"></a>第一步：安装编译环境 gcc-c++</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install make gcc-c++ cmake bison-devel  ncurses-devel</span><br></pre></td></tr></table></figure>

<h5 id="第二步：解压并进入mysql目录"><a href="#第二步：解压并进入mysql目录" class="headerlink" title="第二步：解压并进入mysql目录"></a>第二步：解压并进入mysql目录</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar xvf mysql-5.6.14.tar.gz</span><br><span class="line">cd mysql-5.6.14</span><br></pre></td></tr></table></figure>

<h5 id="第三步：编译"><a href="#第三步：编译" class="headerlink" title="第三步：编译"></a>第三步：编译</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake -DCMAKE_INSTALL_PREFIX=/usr/local/mysql -DMYSQL_DATADIR=/usr/local/mysql/data -DSYSCONFDIR=/etc -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DWITH_MEMORY_STORAGE_ENGINE=1 -DWITH_READLINE=1 -DMYSQL_UNIX_ADDR=/var/lib/mysql/mysql.sock -DMYSQL_TCP_PORT=3306 -DENABLED_LOCAL_INFILE=1 -DWITH_PARTITION_STORAGE_ENGINE=1 -DEXTRA_CHARSETS=all -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci</span><br></pre></td></tr></table></figure>

<h5 id="第四步：安装"><a href="#第四步：安装" class="headerlink" title="第四步：安装"></a>第四步：安装</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<h5 id="第五步：设置权限"><a href="#第五步：设置权限" class="headerlink" title="第五步：设置权限"></a>第五步：设置权限</h5><p>​		查看是否有mysql用户及用户组，没有则创建</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd | grep -i mysql</span><br><span class="line">cat /etc/group | grep -i mysql</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">没有则创建</span></span><br><span class="line">groupadd mysql</span><br><span class="line">useradd -g mysql mysql</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改/usr/local/mysql权限</span></span><br><span class="line">chown -R mysql：mysql /usr/local/mysql</span><br></pre></td></tr></table></figure>

<h5 id="第六步：初始化配置"><a href="#第六步：初始化配置" class="headerlink" title="第六步：初始化配置"></a>第六步：初始化配置</h5><p>​		进入安装路径（在执行下面的指令），执行初始化配置脚本，创建系统自带的数据库和表</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/mysql</span><br><span class="line">scripts/mysql_install_db --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --user=mysql</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<p>​		在启动MySQL服务时，会按照一定次序搜索 my.cnf ，先在 &#x2F;etc 目录下找，找不到则会搜索 “$basedir&#x2F;my.cnf”，在本例中就是 &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;my.cnf，这是新版MySQL的配置文件的默认位置。</p>
<p>​		在CentOS 6.8版操作系统的最小安装完成后，在&#x2F;etc目录下会存在一个my.cnf，需要将此文件更名为其他的名字，如：&#x2F;etc&#x2F;my.cnf.bak，否则，该文件会干扰源码安装的MySQL的正确配置，造成无法启动。</p>
<p>修改名称，防止干扰：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv /etc/my.cnf  /etc/my.cnf.bak</span><br></pre></td></tr></table></figure>

<h5 id="第七步：启动MySQL"><a href="#第七步：启动MySQL" class="headerlink" title="第七步：启动MySQL"></a>第七步：启动MySQL</h5><p>添加服务，拷贝服务脚本到init.d目录，并设置开机启动 </p>
<p>注意在 &#x2F;usr&#x2F;local&#x2F;mysql 下执行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp support-files/mysql.server /etc/init.d/mysql</span><br><span class="line">chkconfig mysql on</span><br><span class="line">service mysql start --启动MySQL</span><br></pre></td></tr></table></figure>

<h5 id="第八步：修改root密码"><a href="#第八步：修改root密码" class="headerlink" title="第八步：修改root密码"></a>第八步：修改root密码</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/mysql/bin</span><br><span class="line">./mysql -uroot </span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">SET PASSWORD = PASSWORD(<span class="string">&#x27;root&#x27;</span>);</span></span><br></pre></td></tr></table></figure>

<h4 id="RPM安装"><a href="#RPM安装" class="headerlink" title="RPM安装"></a>RPM安装</h4><p>​		环境：CentOS7.9 + MySQL5.7.36</p>
<p>拷贝安装包至 &#x2F;opt 目录并解压：</p>
<p>查询是否已经安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">rpm –qa|grep –i mysql</span><br><span class="line">ps –ef|grep mysql</span><br><span class="line">service mysql start</span><br><span class="line">cat /etc/passwd |grep mysql</span><br><span class="line">cat /etc/group</span><br><span class="line">mysql设置密码：mysqladmin –u root password 123456</span><br><span class="line">mysql的自启动：chkconfig mysql on</span><br><span class="line">chkconfig –list|grep mysql</span><br><span class="line">mysql数据库文件的存储位置：</span><br><span class="line">ps -ef|grep mysql</span><br><span class="line">二进制安装：/usr/local/mysql/data</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>RPM形式安装目录说明：</p>
<table>
<thead>
<tr>
<th>路径</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>&#x2F;var&#x2F;lib&#x2F;myql</td>
<td>mysql数据库文件的存放路径</td>
<td></td>
</tr>
<tr>
<td>&#x2F;usr&#x2F;share&#x2F;mysql</td>
<td>配置文件目录</td>
<td>mysql.server命令及其配置</td>
</tr>
<tr>
<td>&#x2F;usr&#x2F;bin</td>
<td>相关命令目录</td>
<td>mysqladmin mysqldump等命令</td>
</tr>
<tr>
<td>&#x2F;etc&#x2F;init.d&#x2F;mysql</td>
<td>启动停止相关脚本</td>
<td></td>
</tr>
</tbody></table>
<h3 id="MySQL8-版本安装"><a href="#MySQL8-版本安装" class="headerlink" title="MySQL8 版本安装"></a>MySQL8 版本安装</h3><h2 id="MySQL卸载"><a href="#MySQL卸载" class="headerlink" title="MySQL卸载"></a>MySQL卸载</h2><h3 id="RPM卸载"><a href="#RPM卸载" class="headerlink" title="RPM卸载"></a>RPM卸载</h3><h3 id="二进制源码卸载"><a href="#二进制源码卸载" class="headerlink" title="二进制源码卸载"></a>二进制源码卸载</h3><h1 id="MySQL-逻辑架构与存储引擎"><a href="#MySQL-逻辑架构与存储引擎" class="headerlink" title="MySQL 逻辑架构与存储引擎"></a>MySQL 逻辑架构与存储引擎</h1><h2 id="逻辑架构"><a href="#逻辑架构" class="headerlink" title="逻辑架构"></a>逻辑架构</h2><p><img src="/2023/02/25/MySQL/MySQL%E9%80%BB%E8%BE%91%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.jpg" alt="MySQL逻辑架构与存储引擎"></p>
<blockquote>
<ul>
<li><p>连接层</p>
<p>​		最上层是一些客户端和连接服务，包含本地 socket 通信和大多数基于客户端&#x2F;服务端工具类似于 tcp&#x2F;ip 的通信，主要完成一些类似于连接处理、授权认证等相关的安全解决方案，该层引入了线程池的概念，为通过认证安全接入的客户端提供线程，同样该层可以实现基于 SSL 的安全链接，服务器也会为每个安全接入的客户端验证它所具有的操作权限。</p>
</li>
<li><p>服务层</p>
<p>​		第二层架构的主要工作完成大多数的核心服务功能，如 SQL 接口，并完成缓存的查询，SQL分析和优化以及部分内置函数的执行，所有跨存储引擎的功能也在这一层实现，如过程、函数等，在该层，服务器会解析查询，创建相应的解析树，并完成相应的优化如确定查询表的顺序，是否利用索引等，最后生成相应的执行操作，如果是SELECT语句，服务器还会查询内部的缓存，如果缓存的空间足够大，可以解决大量读操作的环境中能够很好的提升系统的性能。</p>
</li>
<li><p>引擎层</p>
<p>​	存储引擎层，存储引擎层真正负责 MySQL 的数据存储和读取，即如何存储和索引数据、是否支持事务等，服务器通过API与存储引擎进行通信，不同的存储引擎具有不同的功能，常用的有 MyISAM 和 InnoDB。</p>
</li>
<li><p>存储层</p>
<p>​	数据存储层，主要将数据存储在文件系统上，完成于存储引擎的交互。</p>
</li>
</ul>
</blockquote>
<h2 id="存储引擎"><a href="#存储引擎" class="headerlink" title="存储引擎"></a>存储引擎</h2><ol>
<li>show engines;	【查看MySQL提供的存储引擎】</li>
<li>show variables like ‘%storage_engine%’;      【查看MySQL默认的存储引擎】</li>
</ol>
<p><img src="/2023/02/25/MySQL/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.png" alt="MySQL存储引擎"></p>
<blockquote>
<p>Support： 是否支持（default）。</p>
<p>Comment：注释、说明。</p>
<p>Transactions：是否支持事务。</p>
<p>XA：所支持的分布式事务是否符合XA规范。</p>
<p>Savepoints： 是否支持事务中的保存点。  </p>
<p><strong>注意：以 ； \g \G 都表示语句结束。</strong></p>
</blockquote>
<h2 id="MyISAM-和-InnoDB-的对比"><a href="#MyISAM-和-InnoDB-的对比" class="headerlink" title="MyISAM 和 InnoDB 的对比"></a>MyISAM 和 InnoDB 的对比</h2><table>
<thead>
<tr>
<th>对比项</th>
<th>MyISAM</th>
<th>InnoDB</th>
</tr>
</thead>
<tbody><tr>
<td>主外键</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>事务</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>行表锁</td>
<td>表锁，即使操作一行记录也会锁住整个表，不适合高并发操作</td>
<td>行锁，操作时只锁住一行，不对其他行产生影响</td>
</tr>
<tr>
<td>缓存</td>
<td>只缓存索引，不缓存真实数据</td>
<td>不仅缓存索引且缓存真实数据，对内存要求的高，且内存大小对性能的影响较大</td>
</tr>
<tr>
<td>表空间</td>
<td>小</td>
<td>大</td>
</tr>
<tr>
<td>关注点</td>
<td>性能</td>
<td>事务</td>
</tr>
<tr>
<td>默认安装</td>
<td>是</td>
<td>是</td>
</tr>
</tbody></table>
<p>总结：</p>
<ol>
<li><p>MyISAM： 不支持事务、外键等，访问速度比较快，对事务完整性没有要求</p>
</li>
<li><p>InnoDB： 支持事务（提交、回避、崩溃恢复等），并发控制等，占用更多磁盘</p>
</li>
<li><p>MEMORY： 使用内存存储数据，访问速度快，但安全没有保障</p>
</li>
</ol>
<h1 id="多表关系以及三大设计范式"><a href="#多表关系以及三大设计范式" class="headerlink" title="多表关系以及三大设计范式"></a>多表关系以及三大设计范式</h1><h1 id="SQL-概述"><a href="#SQL-概述" class="headerlink" title="SQL 概述"></a>SQL 概述</h1><blockquote>
<ul>
<li><p>SQL（Structured Query Language，结构化查询语言）是使用关系模型的数据库应用语言，<code>与数据直接打交道</code>，由<code>IBM</code>上世纪70年代开发出来。后由美国国家标准局（ANSI）开始着手制定SQL标准，先后有<code>SQL-86</code>，<code>SQL-89</code>，<code>SQL-92</code>，<code>SQL-99</code>等标准。</p>
<ul>
<li>SQL 有两个重要的标准，分别是 SQL92 和 SQL99，它们分别代表了 92 年和 99 年颁布的 SQL 标准，我们今天使用的 SQL 语言依然遵循这些标准。</li>
</ul>
</li>
<li><p>不同的数据库生产厂商都支持SQL语句，但都有特有内容。</p>
</li>
</ul>
</blockquote>
<h2 id="SQL分类"><a href="#SQL分类" class="headerlink" title="SQL分类"></a>SQL分类</h2><blockquote>
<ol>
<li><p><strong>DDL(Data Definition Language)</strong> 数据定义语言</p>
<p>用来定义数据库对象：数据库，表，列等。关键字：CREATE，DROP，ALTER 等。</p>
</li>
<li><p><strong>DML(Data Manipulation Language)</strong> 数据操作语言</p>
<p>用来对数据库中表的数据进行增删改。关键字：INSERT，DELETE，UPDATE 等。</p>
</li>
<li><p><strong>DQL(Data Query Language)</strong> 数据查询语言</p>
<p>用来查询数据库中表的记录(数据)。关键字：SELECT，WHERE 等。</p>
</li>
<li><p><strong>DCL(Data Control Language)</strong> 数据控制语言</p>
<p>用来定义数据库的访问权限和安全级别，及创建用户。关键字：GRANT， REVOKE等。</p>
</li>
</ol>
</blockquote>
<h2 id="SQL-标准"><a href="#SQL-标准" class="headerlink" title="SQL 标准"></a>SQL 标准</h2><blockquote>
<p>SQL 有两个主要的标准，分别是 <code>SQL92</code> 和 <code>SQL99</code>。92 和 99 代表了标准提出的时间，SQL92 就是 92 年提出的标准规范。当然除了 SQL92 和 SQL99 以外，还存在 SQL-86、SQL-89、SQL:2003、SQL:2008、SQL:2011 和 SQL:2016 等其他的标准。</p>
<p><strong>SQL92 和 SQL99 是经典的 SQL 标准，也分别叫做 SQL-2 和 SQL-3 标准。</strong></p>
</blockquote>
<h2 id="SQL-语法基本规范"><a href="#SQL-语法基本规范" class="headerlink" title="SQL 语法基本规范"></a>SQL 语法基本规范</h2><blockquote>
<p>每条命令以 ; 或 \g 或 \G 结束</p>
<p><strong>引号：</strong></p>
<ul>
<li><p>字符串型和日期时间类型的数据可以使用单引号（’ ‘）表示</p>
</li>
<li><p>列的别名，尽量使用双引号（” “），而且不建议省略as，如果字段别名中包含空格或特殊的字符并区分大小写，那么不能省略” “</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id <span class="keyword">as</span> 编 号 <span class="keyword">from</span> student; </span><br></pre></td></tr></table></figure>
</li>
<li><p>反引号，保证字段没有和系统保留字、数据库系统或常用方法冲突，如定义表名为 <code>order</code>时需要反引号</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 正例</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">order</span>`(</span><br><span class="line">    id <span class="type">BIGINT</span>,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 反例</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">order</span>(</span><br><span class="line">    id <span class="type">BIGINT</span>,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>大小写规范：</strong></p>
<ul>
<li>MySQL 在 Windows 环境下是大小写不敏感的</li>
<li>MySQL 在 Linux 环境下是大小写敏感的<ul>
<li>数据库名、表名、表的别名、变量名是严格区分大小写的</li>
<li>关键字、函数名、列名(或字段名)、列的别名（字段的别名） 是忽略大小写的。</li>
</ul>
</li>
<li>推荐采用统一的书写规范：<ul>
<li>数据库名、表名、表别名、字段名、字段别名等都小写</li>
<li>SQL 关键字、函数名、绑定变量等都大写</li>
</ul>
</li>
</ul>
<p><strong>注释：</strong></p>
<ul>
<li>单行注释：#注释文字（MySQL特有的方式）</li>
<li>单行注释：– 注释文字（–后面必须包含一个空格）</li>
<li>多行注释：&#x2F;* 注释文字  *&#x2F;</li>
</ul>
<p><strong>命名规则：</strong></p>
<ul>
<li>数据库、表名不得超过 30 个字符，变量名限制为29个</li>
<li>必须只能包含 数字字母下划线 共63个字符</li>
<li>数据库名、表名、字段名等对象名中间不要包含空格</li>
</ul>
</blockquote>
<h2 id="数据导入指令"><a href="#数据导入指令" class="headerlink" title="数据导入指令"></a>数据导入指令</h2><blockquote>
<p>在命令行客户端登录mysql，使用source指令导入</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> source d:\mysqltest.sql</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="SQL-数据准备"><a href="#SQL-数据准备" class="headerlink" title="SQL 数据准备"></a>SQL 数据准备</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Navicat Premium Data Transfer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Source Server         : localhost</span></span><br><span class="line"><span class="comment"> Source Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Source Server Version : 80020</span></span><br><span class="line"><span class="comment"> Source Host           : 127.0.0.1:3306</span></span><br><span class="line"><span class="comment"> Source Schema         : mysqltest</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Target Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Target Server Version : 80020</span></span><br><span class="line"><span class="comment"> File Encoding         : 65001</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Date: 08/03/2023 17:06:35</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for countries</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `countries`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `countries`  (</span><br><span class="line">  `country_id` <span class="type">char</span>(<span class="number">2</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `country_name` <span class="type">varchar</span>(<span class="number">40</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `region_id` <span class="type">int</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`country_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  INDEX `countr_reg_fk`(`region_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `countr_reg_fk` <span class="keyword">FOREIGN</span> KEY (`region_id`) <span class="keyword">REFERENCES</span> `regions` (`region_id`) <span class="keyword">ON</span> <span class="keyword">DELETE</span> RESTRICT <span class="keyword">ON</span> <span class="keyword">UPDATE</span> RESTRICT</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> <span class="keyword">Dynamic</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of countries</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;AR&#x27;</span>, <span class="string">&#x27;Argentina&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;AU&#x27;</span>, <span class="string">&#x27;Australia&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;BE&#x27;</span>, <span class="string">&#x27;Belgium&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;BR&#x27;</span>, <span class="string">&#x27;Brazil&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;CA&#x27;</span>, <span class="string">&#x27;Canada&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;CH&#x27;</span>, <span class="string">&#x27;Switzerland&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;CN&#x27;</span>, <span class="string">&#x27;China&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;DE&#x27;</span>, <span class="string">&#x27;Germany&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;DK&#x27;</span>, <span class="string">&#x27;Denmark&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;EG&#x27;</span>, <span class="string">&#x27;Egypt&#x27;</span>, <span class="number">4</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;FR&#x27;</span>, <span class="string">&#x27;France&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;HK&#x27;</span>, <span class="string">&#x27;HongKong&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;IL&#x27;</span>, <span class="string">&#x27;Israel&#x27;</span>, <span class="number">4</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;IN&#x27;</span>, <span class="string">&#x27;India&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;IT&#x27;</span>, <span class="string">&#x27;Italy&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;JP&#x27;</span>, <span class="string">&#x27;Japan&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;KW&#x27;</span>, <span class="string">&#x27;Kuwait&#x27;</span>, <span class="number">4</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;MX&#x27;</span>, <span class="string">&#x27;Mexico&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;NG&#x27;</span>, <span class="string">&#x27;Nigeria&#x27;</span>, <span class="number">4</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;NL&#x27;</span>, <span class="string">&#x27;Netherlands&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;SG&#x27;</span>, <span class="string">&#x27;Singapore&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;UK&#x27;</span>, <span class="string">&#x27;United Kingdom&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;US&#x27;</span>, <span class="string">&#x27;United States of America&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;ZM&#x27;</span>, <span class="string">&#x27;Zambia&#x27;</span>, <span class="number">4</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `countries` <span class="keyword">VALUES</span> (<span class="string">&#x27;ZW&#x27;</span>, <span class="string">&#x27;Zimbabwe&#x27;</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for departments</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `departments`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `departments`  (</span><br><span class="line">  `department_id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">  `department_name` <span class="type">varchar</span>(<span class="number">30</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `manager_id` <span class="type">int</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `location_id` <span class="type">int</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`department_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  <span class="keyword">UNIQUE</span> INDEX `dept_id_pk`(`department_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  INDEX `dept_loc_fk`(`location_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  INDEX `dept_mgr_fk`(`manager_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `dept_loc_fk` <span class="keyword">FOREIGN</span> KEY (`location_id`) <span class="keyword">REFERENCES</span> `locations` (`location_id`) <span class="keyword">ON</span> <span class="keyword">DELETE</span> RESTRICT <span class="keyword">ON</span> <span class="keyword">UPDATE</span> RESTRICT,</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `dept_mgr_fk` <span class="keyword">FOREIGN</span> KEY (`manager_id`) <span class="keyword">REFERENCES</span> `employees` (`employee_id`) <span class="keyword">ON</span> <span class="keyword">DELETE</span> RESTRICT <span class="keyword">ON</span> <span class="keyword">UPDATE</span> RESTRICT</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> <span class="keyword">Dynamic</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of departments</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">10</span>, <span class="string">&#x27;Administration&#x27;</span>, <span class="number">200</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">20</span>, <span class="string">&#x27;Marketing&#x27;</span>, <span class="number">201</span>, <span class="number">1800</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">30</span>, <span class="string">&#x27;Purchasing&#x27;</span>, <span class="number">114</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">40</span>, <span class="string">&#x27;Human Resources&#x27;</span>, <span class="number">203</span>, <span class="number">2400</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">50</span>, <span class="string">&#x27;Shipping&#x27;</span>, <span class="number">121</span>, <span class="number">1500</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">60</span>, <span class="string">&#x27;IT&#x27;</span>, <span class="number">103</span>, <span class="number">1400</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">70</span>, <span class="string">&#x27;Public Relations&#x27;</span>, <span class="number">204</span>, <span class="number">2700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">80</span>, <span class="string">&#x27;Sales&#x27;</span>, <span class="number">145</span>, <span class="number">2500</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">90</span>, <span class="string">&#x27;Executive&#x27;</span>, <span class="number">100</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">100</span>, <span class="string">&#x27;Finance&#x27;</span>, <span class="number">108</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">110</span>, <span class="string">&#x27;Accounting&#x27;</span>, <span class="number">205</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">120</span>, <span class="string">&#x27;Treasury&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">130</span>, <span class="string">&#x27;Corporate Tax&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">140</span>, <span class="string">&#x27;Control And Credit&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">150</span>, <span class="string">&#x27;Shareholder Services&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">160</span>, <span class="string">&#x27;Benefits&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">170</span>, <span class="string">&#x27;Manufacturing&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">180</span>, <span class="string">&#x27;Construction&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">190</span>, <span class="string">&#x27;Contracting&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">200</span>, <span class="string">&#x27;Operations&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">210</span>, <span class="string">&#x27;IT Support&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">220</span>, <span class="string">&#x27;NOC&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">230</span>, <span class="string">&#x27;IT Helpdesk&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">240</span>, <span class="string">&#x27;Government Sales&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">250</span>, <span class="string">&#x27;Retail Sales&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">260</span>, <span class="string">&#x27;Recruiting&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `departments` <span class="keyword">VALUES</span> (<span class="number">270</span>, <span class="string">&#x27;Payroll&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">1700</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for employees</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `employees`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `employees`  (</span><br><span class="line">  `employee_id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">  `first_name` <span class="type">varchar</span>(<span class="number">20</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `last_name` <span class="type">varchar</span>(<span class="number">25</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `email` <span class="type">varchar</span>(<span class="number">25</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `phone_number` <span class="type">varchar</span>(<span class="number">20</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `hire_date` <span class="type">date</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `job_id` <span class="type">varchar</span>(<span class="number">10</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `salary` <span class="keyword">double</span>(<span class="number">8</span>, <span class="number">2</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `commission_pct` <span class="keyword">double</span>(<span class="number">2</span>, <span class="number">2</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `manager_id` <span class="type">int</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `department_id` <span class="type">int</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`employee_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  <span class="keyword">UNIQUE</span> INDEX `emp_email_uk`(`email`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  <span class="keyword">UNIQUE</span> INDEX `emp_emp_id_pk`(`employee_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  INDEX `emp_dept_fk`(`department_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  INDEX `emp_job_fk`(`job_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  INDEX `emp_manager_fk`(`manager_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `emp_dept_fk` <span class="keyword">FOREIGN</span> KEY (`department_id`) <span class="keyword">REFERENCES</span> `departments` (`department_id`) <span class="keyword">ON</span> <span class="keyword">DELETE</span> RESTRICT <span class="keyword">ON</span> <span class="keyword">UPDATE</span> RESTRICT,</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `emp_job_fk` <span class="keyword">FOREIGN</span> KEY (`job_id`) <span class="keyword">REFERENCES</span> `jobs` (`job_id`) <span class="keyword">ON</span> <span class="keyword">DELETE</span> RESTRICT <span class="keyword">ON</span> <span class="keyword">UPDATE</span> RESTRICT,</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `emp_manager_fk` <span class="keyword">FOREIGN</span> KEY (`manager_id`) <span class="keyword">REFERENCES</span> `employees` (`employee_id`) <span class="keyword">ON</span> <span class="keyword">DELETE</span> RESTRICT <span class="keyword">ON</span> <span class="keyword">UPDATE</span> RESTRICT</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> <span class="keyword">Dynamic</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of employees</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">100</span>, <span class="string">&#x27;Steven&#x27;</span>, <span class="string">&#x27;King&#x27;</span>, <span class="string">&#x27;SKING&#x27;</span>, <span class="string">&#x27;515.123.4567&#x27;</span>, <span class="string">&#x27;1987-06-17&#x27;</span>, <span class="string">&#x27;AD_PRES&#x27;</span>, <span class="number">24000.00</span>, <span class="keyword">NULL</span>, <span class="keyword">NULL</span>, <span class="number">90</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">101</span>, <span class="string">&#x27;Neena&#x27;</span>, <span class="string">&#x27;Kochhar&#x27;</span>, <span class="string">&#x27;NKOCHHAR&#x27;</span>, <span class="string">&#x27;515.123.4568&#x27;</span>, <span class="string">&#x27;1989-09-21&#x27;</span>, <span class="string">&#x27;AD_VP&#x27;</span>, <span class="number">17000.00</span>, <span class="keyword">NULL</span>, <span class="number">100</span>, <span class="number">90</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">102</span>, <span class="string">&#x27;Lex&#x27;</span>, <span class="string">&#x27;De Haan&#x27;</span>, <span class="string">&#x27;LDEHAAN&#x27;</span>, <span class="string">&#x27;515.123.4569&#x27;</span>, <span class="string">&#x27;1993-01-13&#x27;</span>, <span class="string">&#x27;AD_VP&#x27;</span>, <span class="number">17000.00</span>, <span class="keyword">NULL</span>, <span class="number">100</span>, <span class="number">90</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">103</span>, <span class="string">&#x27;Alexander&#x27;</span>, <span class="string">&#x27;Hunold&#x27;</span>, <span class="string">&#x27;AHUNOLD&#x27;</span>, <span class="string">&#x27;590.423.4567&#x27;</span>, <span class="string">&#x27;1990-01-03&#x27;</span>, <span class="string">&#x27;IT_PROG&#x27;</span>, <span class="number">9000.00</span>, <span class="keyword">NULL</span>, <span class="number">102</span>, <span class="number">60</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">104</span>, <span class="string">&#x27;Bruce&#x27;</span>, <span class="string">&#x27;Ernst&#x27;</span>, <span class="string">&#x27;BERNST&#x27;</span>, <span class="string">&#x27;590.423.4568&#x27;</span>, <span class="string">&#x27;1991-05-21&#x27;</span>, <span class="string">&#x27;IT_PROG&#x27;</span>, <span class="number">6000.00</span>, <span class="keyword">NULL</span>, <span class="number">103</span>, <span class="number">60</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">105</span>, <span class="string">&#x27;David&#x27;</span>, <span class="string">&#x27;Austin&#x27;</span>, <span class="string">&#x27;DAUSTIN&#x27;</span>, <span class="string">&#x27;590.423.4569&#x27;</span>, <span class="string">&#x27;1997-06-25&#x27;</span>, <span class="string">&#x27;IT_PROG&#x27;</span>, <span class="number">4800.00</span>, <span class="keyword">NULL</span>, <span class="number">103</span>, <span class="number">60</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">106</span>, <span class="string">&#x27;Valli&#x27;</span>, <span class="string">&#x27;Pataballa&#x27;</span>, <span class="string">&#x27;VPATABAL&#x27;</span>, <span class="string">&#x27;590.423.4560&#x27;</span>, <span class="string">&#x27;1998-02-05&#x27;</span>, <span class="string">&#x27;IT_PROG&#x27;</span>, <span class="number">4800.00</span>, <span class="keyword">NULL</span>, <span class="number">103</span>, <span class="number">60</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">107</span>, <span class="string">&#x27;Diana&#x27;</span>, <span class="string">&#x27;Lorentz&#x27;</span>, <span class="string">&#x27;DLORENTZ&#x27;</span>, <span class="string">&#x27;590.423.5567&#x27;</span>, <span class="string">&#x27;1999-02-07&#x27;</span>, <span class="string">&#x27;IT_PROG&#x27;</span>, <span class="number">4200.00</span>, <span class="keyword">NULL</span>, <span class="number">103</span>, <span class="number">60</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">108</span>, <span class="string">&#x27;Nancy&#x27;</span>, <span class="string">&#x27;Greenberg&#x27;</span>, <span class="string">&#x27;NGREENBE&#x27;</span>, <span class="string">&#x27;515.124.4569&#x27;</span>, <span class="string">&#x27;1994-08-17&#x27;</span>, <span class="string">&#x27;FI_MGR&#x27;</span>, <span class="number">12000.00</span>, <span class="keyword">NULL</span>, <span class="number">101</span>, <span class="number">100</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">109</span>, <span class="string">&#x27;Daniel&#x27;</span>, <span class="string">&#x27;Faviet&#x27;</span>, <span class="string">&#x27;DFAVIET&#x27;</span>, <span class="string">&#x27;515.124.4169&#x27;</span>, <span class="string">&#x27;1994-08-16&#x27;</span>, <span class="string">&#x27;FI_ACCOUNT&#x27;</span>, <span class="number">9000.00</span>, <span class="keyword">NULL</span>, <span class="number">108</span>, <span class="number">100</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">110</span>, <span class="string">&#x27;John&#x27;</span>, <span class="string">&#x27;Chen&#x27;</span>, <span class="string">&#x27;JCHEN&#x27;</span>, <span class="string">&#x27;515.124.4269&#x27;</span>, <span class="string">&#x27;1997-09-28&#x27;</span>, <span class="string">&#x27;FI_ACCOUNT&#x27;</span>, <span class="number">8200.00</span>, <span class="keyword">NULL</span>, <span class="number">108</span>, <span class="number">100</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">111</span>, <span class="string">&#x27;Ismael&#x27;</span>, <span class="string">&#x27;Sciarra&#x27;</span>, <span class="string">&#x27;ISCIARRA&#x27;</span>, <span class="string">&#x27;515.124.4369&#x27;</span>, <span class="string">&#x27;1997-09-30&#x27;</span>, <span class="string">&#x27;FI_ACCOUNT&#x27;</span>, <span class="number">7700.00</span>, <span class="keyword">NULL</span>, <span class="number">108</span>, <span class="number">100</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">112</span>, <span class="string">&#x27;Jose Manuel&#x27;</span>, <span class="string">&#x27;Urman&#x27;</span>, <span class="string">&#x27;JMURMAN&#x27;</span>, <span class="string">&#x27;515.124.4469&#x27;</span>, <span class="string">&#x27;1998-03-07&#x27;</span>, <span class="string">&#x27;FI_ACCOUNT&#x27;</span>, <span class="number">7800.00</span>, <span class="keyword">NULL</span>, <span class="number">108</span>, <span class="number">100</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">113</span>, <span class="string">&#x27;Luis&#x27;</span>, <span class="string">&#x27;Popp&#x27;</span>, <span class="string">&#x27;LPOPP&#x27;</span>, <span class="string">&#x27;515.124.4567&#x27;</span>, <span class="string">&#x27;1999-12-07&#x27;</span>, <span class="string">&#x27;FI_ACCOUNT&#x27;</span>, <span class="number">6900.00</span>, <span class="keyword">NULL</span>, <span class="number">108</span>, <span class="number">100</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">114</span>, <span class="string">&#x27;Den&#x27;</span>, <span class="string">&#x27;Raphaely&#x27;</span>, <span class="string">&#x27;DRAPHEAL&#x27;</span>, <span class="string">&#x27;515.127.4561&#x27;</span>, <span class="string">&#x27;1994-12-07&#x27;</span>, <span class="string">&#x27;PU_MAN&#x27;</span>, <span class="number">11000.00</span>, <span class="keyword">NULL</span>, <span class="number">100</span>, <span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">115</span>, <span class="string">&#x27;Alexander&#x27;</span>, <span class="string">&#x27;Khoo&#x27;</span>, <span class="string">&#x27;AKHOO&#x27;</span>, <span class="string">&#x27;515.127.4562&#x27;</span>, <span class="string">&#x27;1995-05-18&#x27;</span>, <span class="string">&#x27;PU_CLERK&#x27;</span>, <span class="number">3100.00</span>, <span class="keyword">NULL</span>, <span class="number">114</span>, <span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">116</span>, <span class="string">&#x27;Shelli&#x27;</span>, <span class="string">&#x27;Baida&#x27;</span>, <span class="string">&#x27;SBAIDA&#x27;</span>, <span class="string">&#x27;515.127.4563&#x27;</span>, <span class="string">&#x27;1997-12-24&#x27;</span>, <span class="string">&#x27;PU_CLERK&#x27;</span>, <span class="number">2900.00</span>, <span class="keyword">NULL</span>, <span class="number">114</span>, <span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">117</span>, <span class="string">&#x27;Sigal&#x27;</span>, <span class="string">&#x27;Tobias&#x27;</span>, <span class="string">&#x27;STOBIAS&#x27;</span>, <span class="string">&#x27;515.127.4564&#x27;</span>, <span class="string">&#x27;1997-07-24&#x27;</span>, <span class="string">&#x27;PU_CLERK&#x27;</span>, <span class="number">2800.00</span>, <span class="keyword">NULL</span>, <span class="number">114</span>, <span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">118</span>, <span class="string">&#x27;Guy&#x27;</span>, <span class="string">&#x27;Himuro&#x27;</span>, <span class="string">&#x27;GHIMURO&#x27;</span>, <span class="string">&#x27;515.127.4565&#x27;</span>, <span class="string">&#x27;1998-11-15&#x27;</span>, <span class="string">&#x27;PU_CLERK&#x27;</span>, <span class="number">2600.00</span>, <span class="keyword">NULL</span>, <span class="number">114</span>, <span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">119</span>, <span class="string">&#x27;Karen&#x27;</span>, <span class="string">&#x27;Colmenares&#x27;</span>, <span class="string">&#x27;KCOLMENA&#x27;</span>, <span class="string">&#x27;515.127.4566&#x27;</span>, <span class="string">&#x27;1999-08-10&#x27;</span>, <span class="string">&#x27;PU_CLERK&#x27;</span>, <span class="number">2500.00</span>, <span class="keyword">NULL</span>, <span class="number">114</span>, <span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">120</span>, <span class="string">&#x27;Matthew&#x27;</span>, <span class="string">&#x27;Weiss&#x27;</span>, <span class="string">&#x27;MWEISS&#x27;</span>, <span class="string">&#x27;650.123.1234&#x27;</span>, <span class="string">&#x27;1996-07-18&#x27;</span>, <span class="string">&#x27;ST_MAN&#x27;</span>, <span class="number">8000.00</span>, <span class="keyword">NULL</span>, <span class="number">100</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">121</span>, <span class="string">&#x27;Adam&#x27;</span>, <span class="string">&#x27;Fripp&#x27;</span>, <span class="string">&#x27;AFRIPP&#x27;</span>, <span class="string">&#x27;650.123.2234&#x27;</span>, <span class="string">&#x27;1997-04-10&#x27;</span>, <span class="string">&#x27;ST_MAN&#x27;</span>, <span class="number">8200.00</span>, <span class="keyword">NULL</span>, <span class="number">100</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">122</span>, <span class="string">&#x27;Payam&#x27;</span>, <span class="string">&#x27;Kaufling&#x27;</span>, <span class="string">&#x27;PKAUFLIN&#x27;</span>, <span class="string">&#x27;650.123.3234&#x27;</span>, <span class="string">&#x27;1995-05-01&#x27;</span>, <span class="string">&#x27;ST_MAN&#x27;</span>, <span class="number">7900.00</span>, <span class="keyword">NULL</span>, <span class="number">100</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">123</span>, <span class="string">&#x27;Shanta&#x27;</span>, <span class="string">&#x27;Vollman&#x27;</span>, <span class="string">&#x27;SVOLLMAN&#x27;</span>, <span class="string">&#x27;650.123.4234&#x27;</span>, <span class="string">&#x27;1997-10-10&#x27;</span>, <span class="string">&#x27;ST_MAN&#x27;</span>, <span class="number">6500.00</span>, <span class="keyword">NULL</span>, <span class="number">100</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">124</span>, <span class="string">&#x27;Kevin&#x27;</span>, <span class="string">&#x27;Mourgos&#x27;</span>, <span class="string">&#x27;KMOURGOS&#x27;</span>, <span class="string">&#x27;650.123.5234&#x27;</span>, <span class="string">&#x27;1999-11-16&#x27;</span>, <span class="string">&#x27;ST_MAN&#x27;</span>, <span class="number">5800.00</span>, <span class="keyword">NULL</span>, <span class="number">100</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">125</span>, <span class="string">&#x27;Julia&#x27;</span>, <span class="string">&#x27;Nayer&#x27;</span>, <span class="string">&#x27;JNAYER&#x27;</span>, <span class="string">&#x27;650.124.1214&#x27;</span>, <span class="string">&#x27;1997-07-16&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">3200.00</span>, <span class="keyword">NULL</span>, <span class="number">120</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">126</span>, <span class="string">&#x27;Irene&#x27;</span>, <span class="string">&#x27;Mikkilineni&#x27;</span>, <span class="string">&#x27;IMIKKILI&#x27;</span>, <span class="string">&#x27;650.124.1224&#x27;</span>, <span class="string">&#x27;1998-09-28&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">2700.00</span>, <span class="keyword">NULL</span>, <span class="number">120</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">127</span>, <span class="string">&#x27;James&#x27;</span>, <span class="string">&#x27;Landry&#x27;</span>, <span class="string">&#x27;JLANDRY&#x27;</span>, <span class="string">&#x27;650.124.1334&#x27;</span>, <span class="string">&#x27;1999-01-14&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">2400.00</span>, <span class="keyword">NULL</span>, <span class="number">120</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">128</span>, <span class="string">&#x27;Steven&#x27;</span>, <span class="string">&#x27;Markle&#x27;</span>, <span class="string">&#x27;SMARKLE&#x27;</span>, <span class="string">&#x27;650.124.1434&#x27;</span>, <span class="string">&#x27;2000-03-08&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">2200.00</span>, <span class="keyword">NULL</span>, <span class="number">120</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">129</span>, <span class="string">&#x27;Laura&#x27;</span>, <span class="string">&#x27;Bissot&#x27;</span>, <span class="string">&#x27;LBISSOT&#x27;</span>, <span class="string">&#x27;650.124.5234&#x27;</span>, <span class="string">&#x27;1997-08-20&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">3300.00</span>, <span class="keyword">NULL</span>, <span class="number">121</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">130</span>, <span class="string">&#x27;Mozhe&#x27;</span>, <span class="string">&#x27;Atkinson&#x27;</span>, <span class="string">&#x27;MATKINSO&#x27;</span>, <span class="string">&#x27;650.124.6234&#x27;</span>, <span class="string">&#x27;1997-10-30&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">2800.00</span>, <span class="keyword">NULL</span>, <span class="number">121</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">131</span>, <span class="string">&#x27;James&#x27;</span>, <span class="string">&#x27;Marlow&#x27;</span>, <span class="string">&#x27;JAMRLOW&#x27;</span>, <span class="string">&#x27;650.124.7234&#x27;</span>, <span class="string">&#x27;1997-02-16&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">2500.00</span>, <span class="keyword">NULL</span>, <span class="number">121</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">132</span>, <span class="string">&#x27;TJ&#x27;</span>, <span class="string">&#x27;Olson&#x27;</span>, <span class="string">&#x27;TJOLSON&#x27;</span>, <span class="string">&#x27;650.124.8234&#x27;</span>, <span class="string">&#x27;1999-04-10&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">2100.00</span>, <span class="keyword">NULL</span>, <span class="number">121</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">133</span>, <span class="string">&#x27;Jason&#x27;</span>, <span class="string">&#x27;Mallin&#x27;</span>, <span class="string">&#x27;JMALLIN&#x27;</span>, <span class="string">&#x27;650.127.1934&#x27;</span>, <span class="string">&#x27;1996-06-14&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">3300.00</span>, <span class="keyword">NULL</span>, <span class="number">122</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">134</span>, <span class="string">&#x27;Michael&#x27;</span>, <span class="string">&#x27;Rogers&#x27;</span>, <span class="string">&#x27;MROGERS&#x27;</span>, <span class="string">&#x27;650.127.1834&#x27;</span>, <span class="string">&#x27;1998-08-26&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">2900.00</span>, <span class="keyword">NULL</span>, <span class="number">122</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">135</span>, <span class="string">&#x27;Ki&#x27;</span>, <span class="string">&#x27;Gee&#x27;</span>, <span class="string">&#x27;KGEE&#x27;</span>, <span class="string">&#x27;650.127.1734&#x27;</span>, <span class="string">&#x27;1999-12-12&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">2400.00</span>, <span class="keyword">NULL</span>, <span class="number">122</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">136</span>, <span class="string">&#x27;Hazel&#x27;</span>, <span class="string">&#x27;Philtanker&#x27;</span>, <span class="string">&#x27;HPHILTAN&#x27;</span>, <span class="string">&#x27;650.127.1634&#x27;</span>, <span class="string">&#x27;2000-02-06&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">2200.00</span>, <span class="keyword">NULL</span>, <span class="number">122</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">137</span>, <span class="string">&#x27;Renske&#x27;</span>, <span class="string">&#x27;Ladwig&#x27;</span>, <span class="string">&#x27;RLADWIG&#x27;</span>, <span class="string">&#x27;650.121.1234&#x27;</span>, <span class="string">&#x27;1995-07-14&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">3600.00</span>, <span class="keyword">NULL</span>, <span class="number">123</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">138</span>, <span class="string">&#x27;Stephen&#x27;</span>, <span class="string">&#x27;Stiles&#x27;</span>, <span class="string">&#x27;SSTILES&#x27;</span>, <span class="string">&#x27;650.121.2034&#x27;</span>, <span class="string">&#x27;1997-10-26&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">3200.00</span>, <span class="keyword">NULL</span>, <span class="number">123</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">139</span>, <span class="string">&#x27;John&#x27;</span>, <span class="string">&#x27;Seo&#x27;</span>, <span class="string">&#x27;JSEO&#x27;</span>, <span class="string">&#x27;650.121.2019&#x27;</span>, <span class="string">&#x27;1998-02-12&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">2700.00</span>, <span class="keyword">NULL</span>, <span class="number">123</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">140</span>, <span class="string">&#x27;Joshua&#x27;</span>, <span class="string">&#x27;Patel&#x27;</span>, <span class="string">&#x27;JPATEL&#x27;</span>, <span class="string">&#x27;650.121.1834&#x27;</span>, <span class="string">&#x27;1998-04-06&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">2500.00</span>, <span class="keyword">NULL</span>, <span class="number">123</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">141</span>, <span class="string">&#x27;Trenna&#x27;</span>, <span class="string">&#x27;Rajs&#x27;</span>, <span class="string">&#x27;TRAJS&#x27;</span>, <span class="string">&#x27;650.121.8009&#x27;</span>, <span class="string">&#x27;1995-10-17&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">3500.00</span>, <span class="keyword">NULL</span>, <span class="number">124</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">142</span>, <span class="string">&#x27;Curtis&#x27;</span>, <span class="string">&#x27;Davies&#x27;</span>, <span class="string">&#x27;CDAVIES&#x27;</span>, <span class="string">&#x27;650.121.2994&#x27;</span>, <span class="string">&#x27;1997-01-29&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">3100.00</span>, <span class="keyword">NULL</span>, <span class="number">124</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">143</span>, <span class="string">&#x27;Randall&#x27;</span>, <span class="string">&#x27;Matos&#x27;</span>, <span class="string">&#x27;RMATOS&#x27;</span>, <span class="string">&#x27;650.121.2874&#x27;</span>, <span class="string">&#x27;1998-03-15&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">2600.00</span>, <span class="keyword">NULL</span>, <span class="number">124</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">144</span>, <span class="string">&#x27;Peter&#x27;</span>, <span class="string">&#x27;Vargas&#x27;</span>, <span class="string">&#x27;PVARGAS&#x27;</span>, <span class="string">&#x27;650.121.2004&#x27;</span>, <span class="string">&#x27;1998-07-09&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">2500.00</span>, <span class="keyword">NULL</span>, <span class="number">124</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">145</span>, <span class="string">&#x27;John&#x27;</span>, <span class="string">&#x27;Russell&#x27;</span>, <span class="string">&#x27;JRUSSEL&#x27;</span>, <span class="string">&#x27;011.44.1344.429268&#x27;</span>, <span class="string">&#x27;1996-10-01&#x27;</span>, <span class="string">&#x27;SA_MAN&#x27;</span>, <span class="number">14000.00</span>, <span class="number">0.40</span>, <span class="number">100</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">146</span>, <span class="string">&#x27;Karen&#x27;</span>, <span class="string">&#x27;Partners&#x27;</span>, <span class="string">&#x27;KPARTNER&#x27;</span>, <span class="string">&#x27;011.44.1344.467268&#x27;</span>, <span class="string">&#x27;1997-01-05&#x27;</span>, <span class="string">&#x27;SA_MAN&#x27;</span>, <span class="number">13500.00</span>, <span class="number">0.30</span>, <span class="number">100</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">147</span>, <span class="string">&#x27;Alberto&#x27;</span>, <span class="string">&#x27;Errazuriz&#x27;</span>, <span class="string">&#x27;AERRAZUR&#x27;</span>, <span class="string">&#x27;011.44.1344.429278&#x27;</span>, <span class="string">&#x27;1997-03-10&#x27;</span>, <span class="string">&#x27;SA_MAN&#x27;</span>, <span class="number">12000.00</span>, <span class="number">0.30</span>, <span class="number">100</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">148</span>, <span class="string">&#x27;Gerald&#x27;</span>, <span class="string">&#x27;Cambrault&#x27;</span>, <span class="string">&#x27;GCAMBRAU&#x27;</span>, <span class="string">&#x27;011.44.1344.619268&#x27;</span>, <span class="string">&#x27;1999-10-15&#x27;</span>, <span class="string">&#x27;SA_MAN&#x27;</span>, <span class="number">11000.00</span>, <span class="number">0.30</span>, <span class="number">100</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">149</span>, <span class="string">&#x27;Eleni&#x27;</span>, <span class="string">&#x27;Zlotkey&#x27;</span>, <span class="string">&#x27;EZLOTKEY&#x27;</span>, <span class="string">&#x27;011.44.1344.429018&#x27;</span>, <span class="string">&#x27;2000-01-29&#x27;</span>, <span class="string">&#x27;SA_MAN&#x27;</span>, <span class="number">10500.00</span>, <span class="number">0.20</span>, <span class="number">100</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">150</span>, <span class="string">&#x27;Peter&#x27;</span>, <span class="string">&#x27;Tucker&#x27;</span>, <span class="string">&#x27;PTUCKER&#x27;</span>, <span class="string">&#x27;011.44.1344.129268&#x27;</span>, <span class="string">&#x27;1997-01-30&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">10000.00</span>, <span class="number">0.30</span>, <span class="number">145</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">151</span>, <span class="string">&#x27;David&#x27;</span>, <span class="string">&#x27;Bernstein&#x27;</span>, <span class="string">&#x27;DBERNSTE&#x27;</span>, <span class="string">&#x27;011.44.1344.345268&#x27;</span>, <span class="string">&#x27;1997-03-24&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">9500.00</span>, <span class="number">0.25</span>, <span class="number">145</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">152</span>, <span class="string">&#x27;Peter&#x27;</span>, <span class="string">&#x27;Hall&#x27;</span>, <span class="string">&#x27;PHALL&#x27;</span>, <span class="string">&#x27;011.44.1344.478968&#x27;</span>, <span class="string">&#x27;1997-08-20&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">9000.00</span>, <span class="number">0.25</span>, <span class="number">145</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">153</span>, <span class="string">&#x27;Christopher&#x27;</span>, <span class="string">&#x27;Olsen&#x27;</span>, <span class="string">&#x27;COLSEN&#x27;</span>, <span class="string">&#x27;011.44.1344.498718&#x27;</span>, <span class="string">&#x27;1998-03-30&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">8000.00</span>, <span class="number">0.20</span>, <span class="number">145</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">154</span>, <span class="string">&#x27;Nanette&#x27;</span>, <span class="string">&#x27;Cambrault&#x27;</span>, <span class="string">&#x27;NCAMBRAU&#x27;</span>, <span class="string">&#x27;011.44.1344.987668&#x27;</span>, <span class="string">&#x27;1998-12-09&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">7500.00</span>, <span class="number">0.20</span>, <span class="number">145</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">155</span>, <span class="string">&#x27;Oliver&#x27;</span>, <span class="string">&#x27;Tuvault&#x27;</span>, <span class="string">&#x27;OTUVAULT&#x27;</span>, <span class="string">&#x27;011.44.1344.486508&#x27;</span>, <span class="string">&#x27;1999-11-23&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">7000.00</span>, <span class="number">0.15</span>, <span class="number">145</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">156</span>, <span class="string">&#x27;Janette&#x27;</span>, <span class="string">&#x27;King&#x27;</span>, <span class="string">&#x27;JKING&#x27;</span>, <span class="string">&#x27;011.44.1345.429268&#x27;</span>, <span class="string">&#x27;1996-01-30&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">10000.00</span>, <span class="number">0.35</span>, <span class="number">146</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">157</span>, <span class="string">&#x27;Patrick&#x27;</span>, <span class="string">&#x27;Sully&#x27;</span>, <span class="string">&#x27;PSULLY&#x27;</span>, <span class="string">&#x27;011.44.1345.929268&#x27;</span>, <span class="string">&#x27;1996-03-04&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">9500.00</span>, <span class="number">0.35</span>, <span class="number">146</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">158</span>, <span class="string">&#x27;Allan&#x27;</span>, <span class="string">&#x27;McEwen&#x27;</span>, <span class="string">&#x27;AMCEWEN&#x27;</span>, <span class="string">&#x27;011.44.1345.829268&#x27;</span>, <span class="string">&#x27;1996-08-01&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">9000.00</span>, <span class="number">0.35</span>, <span class="number">146</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">159</span>, <span class="string">&#x27;Lindsey&#x27;</span>, <span class="string">&#x27;Smith&#x27;</span>, <span class="string">&#x27;LSMITH&#x27;</span>, <span class="string">&#x27;011.44.1345.729268&#x27;</span>, <span class="string">&#x27;1997-03-10&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">8000.00</span>, <span class="number">0.30</span>, <span class="number">146</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">160</span>, <span class="string">&#x27;Louise&#x27;</span>, <span class="string">&#x27;Doran&#x27;</span>, <span class="string">&#x27;LDORAN&#x27;</span>, <span class="string">&#x27;011.44.1345.629268&#x27;</span>, <span class="string">&#x27;1997-12-15&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">7500.00</span>, <span class="number">0.30</span>, <span class="number">146</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">161</span>, <span class="string">&#x27;Sarath&#x27;</span>, <span class="string">&#x27;Sewall&#x27;</span>, <span class="string">&#x27;SSEWALL&#x27;</span>, <span class="string">&#x27;011.44.1345.529268&#x27;</span>, <span class="string">&#x27;1998-11-03&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">7000.00</span>, <span class="number">0.25</span>, <span class="number">146</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">162</span>, <span class="string">&#x27;Clara&#x27;</span>, <span class="string">&#x27;Vishney&#x27;</span>, <span class="string">&#x27;CVISHNEY&#x27;</span>, <span class="string">&#x27;011.44.1346.129268&#x27;</span>, <span class="string">&#x27;1997-11-11&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">10500.00</span>, <span class="number">0.25</span>, <span class="number">147</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">163</span>, <span class="string">&#x27;Danielle&#x27;</span>, <span class="string">&#x27;Greene&#x27;</span>, <span class="string">&#x27;DGREENE&#x27;</span>, <span class="string">&#x27;011.44.1346.229268&#x27;</span>, <span class="string">&#x27;1999-03-19&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">9500.00</span>, <span class="number">0.15</span>, <span class="number">147</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">164</span>, <span class="string">&#x27;Mattea&#x27;</span>, <span class="string">&#x27;Marvins&#x27;</span>, <span class="string">&#x27;MMARVINS&#x27;</span>, <span class="string">&#x27;011.44.1346.329268&#x27;</span>, <span class="string">&#x27;2000-01-24&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">7200.00</span>, <span class="number">0.10</span>, <span class="number">147</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">165</span>, <span class="string">&#x27;David&#x27;</span>, <span class="string">&#x27;Lee&#x27;</span>, <span class="string">&#x27;DLEE&#x27;</span>, <span class="string">&#x27;011.44.1346.529268&#x27;</span>, <span class="string">&#x27;2000-02-23&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">6800.00</span>, <span class="number">0.10</span>, <span class="number">147</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">166</span>, <span class="string">&#x27;Sundar&#x27;</span>, <span class="string">&#x27;Ande&#x27;</span>, <span class="string">&#x27;SANDE&#x27;</span>, <span class="string">&#x27;011.44.1346.629268&#x27;</span>, <span class="string">&#x27;2000-03-24&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">6400.00</span>, <span class="number">0.10</span>, <span class="number">147</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">167</span>, <span class="string">&#x27;Amit&#x27;</span>, <span class="string">&#x27;Banda&#x27;</span>, <span class="string">&#x27;ABANDA&#x27;</span>, <span class="string">&#x27;011.44.1346.729268&#x27;</span>, <span class="string">&#x27;2000-04-21&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">6200.00</span>, <span class="number">0.10</span>, <span class="number">147</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">168</span>, <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;Ozer&#x27;</span>, <span class="string">&#x27;LOZER&#x27;</span>, <span class="string">&#x27;011.44.1343.929268&#x27;</span>, <span class="string">&#x27;1997-03-11&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">11500.00</span>, <span class="number">0.25</span>, <span class="number">148</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">169</span>, <span class="string">&#x27;Harrison&#x27;</span>, <span class="string">&#x27;Bloom&#x27;</span>, <span class="string">&#x27;HBLOOM&#x27;</span>, <span class="string">&#x27;011.44.1343.829268&#x27;</span>, <span class="string">&#x27;1998-03-23&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">10000.00</span>, <span class="number">0.20</span>, <span class="number">148</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">170</span>, <span class="string">&#x27;Tayler&#x27;</span>, <span class="string">&#x27;Fox&#x27;</span>, <span class="string">&#x27;TFOX&#x27;</span>, <span class="string">&#x27;011.44.1343.729268&#x27;</span>, <span class="string">&#x27;1998-01-24&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">9600.00</span>, <span class="number">0.20</span>, <span class="number">148</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">171</span>, <span class="string">&#x27;William&#x27;</span>, <span class="string">&#x27;Smith&#x27;</span>, <span class="string">&#x27;WSMITH&#x27;</span>, <span class="string">&#x27;011.44.1343.629268&#x27;</span>, <span class="string">&#x27;1999-02-23&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">7400.00</span>, <span class="number">0.15</span>, <span class="number">148</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">172</span>, <span class="string">&#x27;Elizabeth&#x27;</span>, <span class="string">&#x27;Bates&#x27;</span>, <span class="string">&#x27;EBATES&#x27;</span>, <span class="string">&#x27;011.44.1343.529268&#x27;</span>, <span class="string">&#x27;1999-03-24&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">7300.00</span>, <span class="number">0.15</span>, <span class="number">148</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">173</span>, <span class="string">&#x27;Sundita&#x27;</span>, <span class="string">&#x27;Kumar&#x27;</span>, <span class="string">&#x27;SKUMAR&#x27;</span>, <span class="string">&#x27;011.44.1343.329268&#x27;</span>, <span class="string">&#x27;2000-04-21&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">6100.00</span>, <span class="number">0.10</span>, <span class="number">148</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">174</span>, <span class="string">&#x27;Ellen&#x27;</span>, <span class="string">&#x27;Abel&#x27;</span>, <span class="string">&#x27;EABEL&#x27;</span>, <span class="string">&#x27;011.44.1644.429267&#x27;</span>, <span class="string">&#x27;1996-05-11&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">11000.00</span>, <span class="number">0.30</span>, <span class="number">149</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">175</span>, <span class="string">&#x27;Alyssa&#x27;</span>, <span class="string">&#x27;Hutton&#x27;</span>, <span class="string">&#x27;AHUTTON&#x27;</span>, <span class="string">&#x27;011.44.1644.429266&#x27;</span>, <span class="string">&#x27;1997-03-19&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">8800.00</span>, <span class="number">0.25</span>, <span class="number">149</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">176</span>, <span class="string">&#x27;Jonathon&#x27;</span>, <span class="string">&#x27;Taylor&#x27;</span>, <span class="string">&#x27;JTAYLOR&#x27;</span>, <span class="string">&#x27;011.44.1644.429265&#x27;</span>, <span class="string">&#x27;1998-03-24&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">8600.00</span>, <span class="number">0.20</span>, <span class="number">149</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">177</span>, <span class="string">&#x27;Jack&#x27;</span>, <span class="string">&#x27;Livingston&#x27;</span>, <span class="string">&#x27;JLIVINGS&#x27;</span>, <span class="string">&#x27;011.44.1644.429264&#x27;</span>, <span class="string">&#x27;1998-04-23&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">8400.00</span>, <span class="number">0.20</span>, <span class="number">149</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">178</span>, <span class="string">&#x27;Kimberely&#x27;</span>, <span class="string">&#x27;Grant&#x27;</span>, <span class="string">&#x27;KGRANT&#x27;</span>, <span class="string">&#x27;011.44.1644.429263&#x27;</span>, <span class="string">&#x27;1999-05-24&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">7000.00</span>, <span class="number">0.15</span>, <span class="number">149</span>, <span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">179</span>, <span class="string">&#x27;Charles&#x27;</span>, <span class="string">&#x27;Johnson&#x27;</span>, <span class="string">&#x27;CJOHNSON&#x27;</span>, <span class="string">&#x27;011.44.1644.429262&#x27;</span>, <span class="string">&#x27;2000-01-04&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">6200.00</span>, <span class="number">0.10</span>, <span class="number">149</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">180</span>, <span class="string">&#x27;Winston&#x27;</span>, <span class="string">&#x27;Taylor&#x27;</span>, <span class="string">&#x27;WTAYLOR&#x27;</span>, <span class="string">&#x27;650.507.9876&#x27;</span>, <span class="string">&#x27;1998-01-24&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">3200.00</span>, <span class="keyword">NULL</span>, <span class="number">120</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">181</span>, <span class="string">&#x27;Jean&#x27;</span>, <span class="string">&#x27;Fleaur&#x27;</span>, <span class="string">&#x27;JFLEAUR&#x27;</span>, <span class="string">&#x27;650.507.9877&#x27;</span>, <span class="string">&#x27;1998-02-23&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">3100.00</span>, <span class="keyword">NULL</span>, <span class="number">120</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">182</span>, <span class="string">&#x27;Martha&#x27;</span>, <span class="string">&#x27;Sullivan&#x27;</span>, <span class="string">&#x27;MSULLIVA&#x27;</span>, <span class="string">&#x27;650.507.9878&#x27;</span>, <span class="string">&#x27;1999-06-21&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">2500.00</span>, <span class="keyword">NULL</span>, <span class="number">120</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">183</span>, <span class="string">&#x27;Girard&#x27;</span>, <span class="string">&#x27;Geoni&#x27;</span>, <span class="string">&#x27;GGEONI&#x27;</span>, <span class="string">&#x27;650.507.9879&#x27;</span>, <span class="string">&#x27;2000-02-03&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">2800.00</span>, <span class="keyword">NULL</span>, <span class="number">120</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">184</span>, <span class="string">&#x27;Nandita&#x27;</span>, <span class="string">&#x27;Sarchand&#x27;</span>, <span class="string">&#x27;NSARCHAN&#x27;</span>, <span class="string">&#x27;650.509.1876&#x27;</span>, <span class="string">&#x27;1996-01-27&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">4200.00</span>, <span class="keyword">NULL</span>, <span class="number">121</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">185</span>, <span class="string">&#x27;Alexis&#x27;</span>, <span class="string">&#x27;Bull&#x27;</span>, <span class="string">&#x27;ABULL&#x27;</span>, <span class="string">&#x27;650.509.2876&#x27;</span>, <span class="string">&#x27;1997-02-20&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">4100.00</span>, <span class="keyword">NULL</span>, <span class="number">121</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">186</span>, <span class="string">&#x27;Julia&#x27;</span>, <span class="string">&#x27;Dellinger&#x27;</span>, <span class="string">&#x27;JDELLING&#x27;</span>, <span class="string">&#x27;650.509.3876&#x27;</span>, <span class="string">&#x27;1998-06-24&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">3400.00</span>, <span class="keyword">NULL</span>, <span class="number">121</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">187</span>, <span class="string">&#x27;Anthony&#x27;</span>, <span class="string">&#x27;Cabrio&#x27;</span>, <span class="string">&#x27;ACABRIO&#x27;</span>, <span class="string">&#x27;650.509.4876&#x27;</span>, <span class="string">&#x27;1999-02-07&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">3000.00</span>, <span class="keyword">NULL</span>, <span class="number">121</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">188</span>, <span class="string">&#x27;Kelly&#x27;</span>, <span class="string">&#x27;Chung&#x27;</span>, <span class="string">&#x27;KCHUNG&#x27;</span>, <span class="string">&#x27;650.505.1876&#x27;</span>, <span class="string">&#x27;1997-06-14&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">3800.00</span>, <span class="keyword">NULL</span>, <span class="number">122</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">189</span>, <span class="string">&#x27;Jennifer&#x27;</span>, <span class="string">&#x27;Dilly&#x27;</span>, <span class="string">&#x27;JDILLY&#x27;</span>, <span class="string">&#x27;650.505.2876&#x27;</span>, <span class="string">&#x27;1997-08-13&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">3600.00</span>, <span class="keyword">NULL</span>, <span class="number">122</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">190</span>, <span class="string">&#x27;Timothy&#x27;</span>, <span class="string">&#x27;Gates&#x27;</span>, <span class="string">&#x27;TGATES&#x27;</span>, <span class="string">&#x27;650.505.3876&#x27;</span>, <span class="string">&#x27;1998-07-11&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">2900.00</span>, <span class="keyword">NULL</span>, <span class="number">122</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">191</span>, <span class="string">&#x27;Randall&#x27;</span>, <span class="string">&#x27;Perkins&#x27;</span>, <span class="string">&#x27;RPERKINS&#x27;</span>, <span class="string">&#x27;650.505.4876&#x27;</span>, <span class="string">&#x27;1999-12-19&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">2500.00</span>, <span class="keyword">NULL</span>, <span class="number">122</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">192</span>, <span class="string">&#x27;Sarah&#x27;</span>, <span class="string">&#x27;Bell&#x27;</span>, <span class="string">&#x27;SBELL&#x27;</span>, <span class="string">&#x27;650.501.1876&#x27;</span>, <span class="string">&#x27;1996-02-04&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">4000.00</span>, <span class="keyword">NULL</span>, <span class="number">123</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">193</span>, <span class="string">&#x27;Britney&#x27;</span>, <span class="string">&#x27;Everett&#x27;</span>, <span class="string">&#x27;BEVERETT&#x27;</span>, <span class="string">&#x27;650.501.2876&#x27;</span>, <span class="string">&#x27;1997-03-03&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">3900.00</span>, <span class="keyword">NULL</span>, <span class="number">123</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">194</span>, <span class="string">&#x27;Samuel&#x27;</span>, <span class="string">&#x27;McCain&#x27;</span>, <span class="string">&#x27;SMCCAIN&#x27;</span>, <span class="string">&#x27;650.501.3876&#x27;</span>, <span class="string">&#x27;1998-07-01&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">3200.00</span>, <span class="keyword">NULL</span>, <span class="number">123</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">195</span>, <span class="string">&#x27;Vance&#x27;</span>, <span class="string">&#x27;Jones&#x27;</span>, <span class="string">&#x27;VJONES&#x27;</span>, <span class="string">&#x27;650.501.4876&#x27;</span>, <span class="string">&#x27;1999-03-17&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">2800.00</span>, <span class="keyword">NULL</span>, <span class="number">123</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">196</span>, <span class="string">&#x27;Alana&#x27;</span>, <span class="string">&#x27;Walsh&#x27;</span>, <span class="string">&#x27;AWALSH&#x27;</span>, <span class="string">&#x27;650.507.9811&#x27;</span>, <span class="string">&#x27;1998-04-24&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">3100.00</span>, <span class="keyword">NULL</span>, <span class="number">124</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">197</span>, <span class="string">&#x27;Kevin&#x27;</span>, <span class="string">&#x27;Feeney&#x27;</span>, <span class="string">&#x27;KFEENEY&#x27;</span>, <span class="string">&#x27;650.507.9822&#x27;</span>, <span class="string">&#x27;1998-05-23&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">3000.00</span>, <span class="keyword">NULL</span>, <span class="number">124</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">198</span>, <span class="string">&#x27;Donald&#x27;</span>, <span class="string">&#x27;OConnell&#x27;</span>, <span class="string">&#x27;DOCONNEL&#x27;</span>, <span class="string">&#x27;650.507.9833&#x27;</span>, <span class="string">&#x27;1999-06-21&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">2600.00</span>, <span class="keyword">NULL</span>, <span class="number">124</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">199</span>, <span class="string">&#x27;Douglas&#x27;</span>, <span class="string">&#x27;Grant&#x27;</span>, <span class="string">&#x27;DGRANT&#x27;</span>, <span class="string">&#x27;650.507.9844&#x27;</span>, <span class="string">&#x27;2000-01-13&#x27;</span>, <span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="number">2600.00</span>, <span class="keyword">NULL</span>, <span class="number">124</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">200</span>, <span class="string">&#x27;Jennifer&#x27;</span>, <span class="string">&#x27;Whalen&#x27;</span>, <span class="string">&#x27;JWHALEN&#x27;</span>, <span class="string">&#x27;515.123.4444&#x27;</span>, <span class="string">&#x27;1987-09-17&#x27;</span>, <span class="string">&#x27;AD_ASST&#x27;</span>, <span class="number">4400.00</span>, <span class="keyword">NULL</span>, <span class="number">101</span>, <span class="number">10</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">201</span>, <span class="string">&#x27;Michael&#x27;</span>, <span class="string">&#x27;Hartstein&#x27;</span>, <span class="string">&#x27;MHARTSTE&#x27;</span>, <span class="string">&#x27;515.123.5555&#x27;</span>, <span class="string">&#x27;1996-02-17&#x27;</span>, <span class="string">&#x27;MK_MAN&#x27;</span>, <span class="number">13000.00</span>, <span class="keyword">NULL</span>, <span class="number">100</span>, <span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">202</span>, <span class="string">&#x27;Pat&#x27;</span>, <span class="string">&#x27;Fay&#x27;</span>, <span class="string">&#x27;PFAY&#x27;</span>, <span class="string">&#x27;603.123.6666&#x27;</span>, <span class="string">&#x27;1997-08-17&#x27;</span>, <span class="string">&#x27;MK_REP&#x27;</span>, <span class="number">6000.00</span>, <span class="keyword">NULL</span>, <span class="number">201</span>, <span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">203</span>, <span class="string">&#x27;Susan&#x27;</span>, <span class="string">&#x27;Mavris&#x27;</span>, <span class="string">&#x27;SMAVRIS&#x27;</span>, <span class="string">&#x27;515.123.7777&#x27;</span>, <span class="string">&#x27;1994-06-07&#x27;</span>, <span class="string">&#x27;HR_REP&#x27;</span>, <span class="number">6500.00</span>, <span class="keyword">NULL</span>, <span class="number">101</span>, <span class="number">40</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">204</span>, <span class="string">&#x27;Hermann&#x27;</span>, <span class="string">&#x27;Baer&#x27;</span>, <span class="string">&#x27;HBAER&#x27;</span>, <span class="string">&#x27;515.123.8888&#x27;</span>, <span class="string">&#x27;1994-06-07&#x27;</span>, <span class="string">&#x27;PR_REP&#x27;</span>, <span class="number">10000.00</span>, <span class="keyword">NULL</span>, <span class="number">101</span>, <span class="number">70</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">205</span>, <span class="string">&#x27;Shelley&#x27;</span>, <span class="string">&#x27;Higgins&#x27;</span>, <span class="string">&#x27;SHIGGINS&#x27;</span>, <span class="string">&#x27;515.123.8080&#x27;</span>, <span class="string">&#x27;1994-06-07&#x27;</span>, <span class="string">&#x27;AC_MGR&#x27;</span>, <span class="number">12000.00</span>, <span class="keyword">NULL</span>, <span class="number">101</span>, <span class="number">110</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employees` <span class="keyword">VALUES</span> (<span class="number">206</span>, <span class="string">&#x27;William&#x27;</span>, <span class="string">&#x27;Gietz&#x27;</span>, <span class="string">&#x27;WGIETZ&#x27;</span>, <span class="string">&#x27;515.123.8181&#x27;</span>, <span class="string">&#x27;1994-06-07&#x27;</span>, <span class="string">&#x27;AC_ACCOUNT&#x27;</span>, <span class="number">8300.00</span>, <span class="keyword">NULL</span>, <span class="number">205</span>, <span class="number">110</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for job_grades</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `job_grades`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `job_grades`  (</span><br><span class="line">  `grade_level` <span class="type">varchar</span>(<span class="number">3</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `lowest_sal` <span class="type">int</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `highest_sal` <span class="type">int</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span></span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> <span class="keyword">Dynamic</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of job_grades</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `job_grades` <span class="keyword">VALUES</span> (<span class="string">&#x27;A&#x27;</span>, <span class="number">1000</span>, <span class="number">2999</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `job_grades` <span class="keyword">VALUES</span> (<span class="string">&#x27;B&#x27;</span>, <span class="number">3000</span>, <span class="number">5999</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `job_grades` <span class="keyword">VALUES</span> (<span class="string">&#x27;C&#x27;</span>, <span class="number">6000</span>, <span class="number">9999</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `job_grades` <span class="keyword">VALUES</span> (<span class="string">&#x27;D&#x27;</span>, <span class="number">10000</span>, <span class="number">14999</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `job_grades` <span class="keyword">VALUES</span> (<span class="string">&#x27;E&#x27;</span>, <span class="number">15000</span>, <span class="number">24999</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `job_grades` <span class="keyword">VALUES</span> (<span class="string">&#x27;F&#x27;</span>, <span class="number">25000</span>, <span class="number">40000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for job_history</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `job_history`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `job_history`  (</span><br><span class="line">  `employee_id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `start_date` <span class="type">date</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `end_date` <span class="type">date</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `job_id` <span class="type">varchar</span>(<span class="number">10</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `department_id` <span class="type">int</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`employee_id`, `start_date`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  <span class="keyword">UNIQUE</span> INDEX `jhist_emp_id_st_date_pk`(`employee_id`, `start_date`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  INDEX `jhist_job_fk`(`job_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  INDEX `jhist_dept_fk`(`department_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `jhist_dept_fk` <span class="keyword">FOREIGN</span> KEY (`department_id`) <span class="keyword">REFERENCES</span> `departments` (`department_id`) <span class="keyword">ON</span> <span class="keyword">DELETE</span> RESTRICT <span class="keyword">ON</span> <span class="keyword">UPDATE</span> RESTRICT,</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `jhist_emp_fk` <span class="keyword">FOREIGN</span> KEY (`employee_id`) <span class="keyword">REFERENCES</span> `employees` (`employee_id`) <span class="keyword">ON</span> <span class="keyword">DELETE</span> RESTRICT <span class="keyword">ON</span> <span class="keyword">UPDATE</span> RESTRICT,</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `jhist_job_fk` <span class="keyword">FOREIGN</span> KEY (`job_id`) <span class="keyword">REFERENCES</span> `jobs` (`job_id`) <span class="keyword">ON</span> <span class="keyword">DELETE</span> RESTRICT <span class="keyword">ON</span> <span class="keyword">UPDATE</span> RESTRICT</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> <span class="keyword">Dynamic</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of job_history</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `job_history` <span class="keyword">VALUES</span> (<span class="number">101</span>, <span class="string">&#x27;1989-09-21&#x27;</span>, <span class="string">&#x27;1993-10-27&#x27;</span>, <span class="string">&#x27;AC_ACCOUNT&#x27;</span>, <span class="number">110</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `job_history` <span class="keyword">VALUES</span> (<span class="number">101</span>, <span class="string">&#x27;1993-10-28&#x27;</span>, <span class="string">&#x27;1997-03-15&#x27;</span>, <span class="string">&#x27;AC_MGR&#x27;</span>, <span class="number">110</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `job_history` <span class="keyword">VALUES</span> (<span class="number">102</span>, <span class="string">&#x27;1993-01-13&#x27;</span>, <span class="string">&#x27;1998-07-24&#x27;</span>, <span class="string">&#x27;IT_PROG&#x27;</span>, <span class="number">60</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `job_history` <span class="keyword">VALUES</span> (<span class="number">114</span>, <span class="string">&#x27;1998-03-24&#x27;</span>, <span class="string">&#x27;1999-12-31&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `job_history` <span class="keyword">VALUES</span> (<span class="number">122</span>, <span class="string">&#x27;1999-01-01&#x27;</span>, <span class="string">&#x27;1999-12-31&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="number">50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `job_history` <span class="keyword">VALUES</span> (<span class="number">176</span>, <span class="string">&#x27;1998-03-24&#x27;</span>, <span class="string">&#x27;1998-12-31&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `job_history` <span class="keyword">VALUES</span> (<span class="number">176</span>, <span class="string">&#x27;1999-01-01&#x27;</span>, <span class="string">&#x27;1999-12-31&#x27;</span>, <span class="string">&#x27;SA_MAN&#x27;</span>, <span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `job_history` <span class="keyword">VALUES</span> (<span class="number">200</span>, <span class="string">&#x27;1987-09-17&#x27;</span>, <span class="string">&#x27;1993-06-17&#x27;</span>, <span class="string">&#x27;AD_ASST&#x27;</span>, <span class="number">90</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `job_history` <span class="keyword">VALUES</span> (<span class="number">200</span>, <span class="string">&#x27;1994-07-01&#x27;</span>, <span class="string">&#x27;1998-12-31&#x27;</span>, <span class="string">&#x27;AC_ACCOUNT&#x27;</span>, <span class="number">90</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `job_history` <span class="keyword">VALUES</span> (<span class="number">201</span>, <span class="string">&#x27;1996-02-17&#x27;</span>, <span class="string">&#x27;1999-12-19&#x27;</span>, <span class="string">&#x27;MK_REP&#x27;</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for jobs</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `jobs`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `jobs`  (</span><br><span class="line">  `job_id` <span class="type">varchar</span>(<span class="number">10</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  `job_title` <span class="type">varchar</span>(<span class="number">35</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `min_salary` <span class="type">int</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `max_salary` <span class="type">int</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`job_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  <span class="keyword">UNIQUE</span> INDEX `job_id_pk`(`job_id`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> <span class="keyword">Dynamic</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of jobs</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `jobs` <span class="keyword">VALUES</span> (<span class="string">&#x27;AC_ACCOUNT&#x27;</span>, <span class="string">&#x27;Public Accountant&#x27;</span>, <span class="number">4200</span>, <span class="number">9000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `jobs` <span class="keyword">VALUES</span> (<span class="string">&#x27;AC_MGR&#x27;</span>, <span class="string">&#x27;Accounting Manager&#x27;</span>, <span class="number">8200</span>, <span class="number">16000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `jobs` <span class="keyword">VALUES</span> (<span class="string">&#x27;AD_ASST&#x27;</span>, <span class="string">&#x27;Administration Assistant&#x27;</span>, <span class="number">3000</span>, <span class="number">6000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `jobs` <span class="keyword">VALUES</span> (<span class="string">&#x27;AD_PRES&#x27;</span>, <span class="string">&#x27;President&#x27;</span>, <span class="number">20000</span>, <span class="number">40000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `jobs` <span class="keyword">VALUES</span> (<span class="string">&#x27;AD_VP&#x27;</span>, <span class="string">&#x27;Administration Vice President&#x27;</span>, <span class="number">15000</span>, <span class="number">30000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `jobs` <span class="keyword">VALUES</span> (<span class="string">&#x27;FI_ACCOUNT&#x27;</span>, <span class="string">&#x27;Accountant&#x27;</span>, <span class="number">4200</span>, <span class="number">9000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `jobs` <span class="keyword">VALUES</span> (<span class="string">&#x27;FI_MGR&#x27;</span>, <span class="string">&#x27;Finance Manager&#x27;</span>, <span class="number">8200</span>, <span class="number">16000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `jobs` <span class="keyword">VALUES</span> (<span class="string">&#x27;HR_REP&#x27;</span>, <span class="string">&#x27;Human Resources Representative&#x27;</span>, <span class="number">4000</span>, <span class="number">9000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `jobs` <span class="keyword">VALUES</span> (<span class="string">&#x27;IT_PROG&#x27;</span>, <span class="string">&#x27;Programmer&#x27;</span>, <span class="number">4000</span>, <span class="number">10000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `jobs` <span class="keyword">VALUES</span> (<span class="string">&#x27;MK_MAN&#x27;</span>, <span class="string">&#x27;Marketing Manager&#x27;</span>, <span class="number">9000</span>, <span class="number">15000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `jobs` <span class="keyword">VALUES</span> (<span class="string">&#x27;MK_REP&#x27;</span>, <span class="string">&#x27;Marketing Representative&#x27;</span>, <span class="number">4000</span>, <span class="number">9000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `jobs` <span class="keyword">VALUES</span> (<span class="string">&#x27;PR_REP&#x27;</span>, <span class="string">&#x27;Public Relations Representative&#x27;</span>, <span class="number">4500</span>, <span class="number">10500</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `jobs` <span class="keyword">VALUES</span> (<span class="string">&#x27;PU_CLERK&#x27;</span>, <span class="string">&#x27;Purchasing Clerk&#x27;</span>, <span class="number">2500</span>, <span class="number">5500</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `jobs` <span class="keyword">VALUES</span> (<span class="string">&#x27;PU_MAN&#x27;</span>, <span class="string">&#x27;Purchasing Manager&#x27;</span>, <span class="number">8000</span>, <span class="number">15000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `jobs` <span class="keyword">VALUES</span> (<span class="string">&#x27;SA_MAN&#x27;</span>, <span class="string">&#x27;Sales Manager&#x27;</span>, <span class="number">10000</span>, <span class="number">20000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `jobs` <span class="keyword">VALUES</span> (<span class="string">&#x27;SA_REP&#x27;</span>, <span class="string">&#x27;Sales Representative&#x27;</span>, <span class="number">6000</span>, <span class="number">12000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `jobs` <span class="keyword">VALUES</span> (<span class="string">&#x27;SH_CLERK&#x27;</span>, <span class="string">&#x27;Shipping Clerk&#x27;</span>, <span class="number">2500</span>, <span class="number">5500</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `jobs` <span class="keyword">VALUES</span> (<span class="string">&#x27;ST_CLERK&#x27;</span>, <span class="string">&#x27;Stock Clerk&#x27;</span>, <span class="number">2000</span>, <span class="number">5000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `jobs` <span class="keyword">VALUES</span> (<span class="string">&#x27;ST_MAN&#x27;</span>, <span class="string">&#x27;Stock Manager&#x27;</span>, <span class="number">5500</span>, <span class="number">8500</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for locations</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `locations`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `locations`  (</span><br><span class="line">  `location_id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">  `street_address` <span class="type">varchar</span>(<span class="number">40</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `postal_code` <span class="type">varchar</span>(<span class="number">12</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `city` <span class="type">varchar</span>(<span class="number">30</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `state_province` <span class="type">varchar</span>(<span class="number">25</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `country_id` <span class="type">char</span>(<span class="number">2</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`location_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  <span class="keyword">UNIQUE</span> INDEX `loc_id_pk`(`location_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  INDEX `loc_c_id_fk`(`country_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `loc_c_id_fk` <span class="keyword">FOREIGN</span> KEY (`country_id`) <span class="keyword">REFERENCES</span> `countries` (`country_id`) <span class="keyword">ON</span> <span class="keyword">DELETE</span> RESTRICT <span class="keyword">ON</span> <span class="keyword">UPDATE</span> RESTRICT</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> <span class="keyword">Dynamic</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of locations</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">1000</span>, <span class="string">&#x27;1297 Via Cola di Rie&#x27;</span>, <span class="string">&#x27;00989&#x27;</span>, <span class="string">&#x27;Roma&#x27;</span>, <span class="keyword">NULL</span>, <span class="string">&#x27;IT&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">1100</span>, <span class="string">&#x27;93091 Calle della Testa&#x27;</span>, <span class="string">&#x27;10934&#x27;</span>, <span class="string">&#x27;Venice&#x27;</span>, <span class="keyword">NULL</span>, <span class="string">&#x27;IT&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">1200</span>, <span class="string">&#x27;2017 Shinjuku-ku&#x27;</span>, <span class="string">&#x27;1689&#x27;</span>, <span class="string">&#x27;Tokyo&#x27;</span>, <span class="string">&#x27;Tokyo Prefecture&#x27;</span>, <span class="string">&#x27;JP&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">1300</span>, <span class="string">&#x27;9450 Kamiya-cho&#x27;</span>, <span class="string">&#x27;6823&#x27;</span>, <span class="string">&#x27;Hiroshima&#x27;</span>, <span class="keyword">NULL</span>, <span class="string">&#x27;JP&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">1400</span>, <span class="string">&#x27;2014 Jabberwocky Rd&#x27;</span>, <span class="string">&#x27;26192&#x27;</span>, <span class="string">&#x27;Southlake&#x27;</span>, <span class="string">&#x27;Texas&#x27;</span>, <span class="string">&#x27;US&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">1500</span>, <span class="string">&#x27;2011 Interiors Blvd&#x27;</span>, <span class="string">&#x27;99236&#x27;</span>, <span class="string">&#x27;South San Francisco&#x27;</span>, <span class="string">&#x27;California&#x27;</span>, <span class="string">&#x27;US&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">1600</span>, <span class="string">&#x27;2007 Zagora St&#x27;</span>, <span class="string">&#x27;50090&#x27;</span>, <span class="string">&#x27;South Brunswick&#x27;</span>, <span class="string">&#x27;New Jersey&#x27;</span>, <span class="string">&#x27;US&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">1700</span>, <span class="string">&#x27;2004 Charade Rd&#x27;</span>, <span class="string">&#x27;98199&#x27;</span>, <span class="string">&#x27;Seattle&#x27;</span>, <span class="string">&#x27;Washington&#x27;</span>, <span class="string">&#x27;US&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">1800</span>, <span class="string">&#x27;147 Spadina Ave&#x27;</span>, <span class="string">&#x27;M5V 2L7&#x27;</span>, <span class="string">&#x27;Toronto&#x27;</span>, <span class="string">&#x27;Ontario&#x27;</span>, <span class="string">&#x27;CA&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">1900</span>, <span class="string">&#x27;6092 Boxwood St&#x27;</span>, <span class="string">&#x27;YSW 9T2&#x27;</span>, <span class="string">&#x27;Whitehorse&#x27;</span>, <span class="string">&#x27;Yukon&#x27;</span>, <span class="string">&#x27;CA&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">2000</span>, <span class="string">&#x27;40-5-12 Laogianggen&#x27;</span>, <span class="string">&#x27;190518&#x27;</span>, <span class="string">&#x27;Beijing&#x27;</span>, <span class="keyword">NULL</span>, <span class="string">&#x27;CN&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">2100</span>, <span class="string">&#x27;1298 Vileparle (E)&#x27;</span>, <span class="string">&#x27;490231&#x27;</span>, <span class="string">&#x27;Bombay&#x27;</span>, <span class="string">&#x27;Maharashtra&#x27;</span>, <span class="string">&#x27;IN&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">2200</span>, <span class="string">&#x27;12-98 Victoria Street&#x27;</span>, <span class="string">&#x27;2901&#x27;</span>, <span class="string">&#x27;Sydney&#x27;</span>, <span class="string">&#x27;New South Wales&#x27;</span>, <span class="string">&#x27;AU&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">2300</span>, <span class="string">&#x27;198 Clementi North&#x27;</span>, <span class="string">&#x27;540198&#x27;</span>, <span class="string">&#x27;Singapore&#x27;</span>, <span class="keyword">NULL</span>, <span class="string">&#x27;SG&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">2400</span>, <span class="string">&#x27;8204 Arthur St&#x27;</span>, <span class="keyword">NULL</span>, <span class="string">&#x27;London&#x27;</span>, <span class="keyword">NULL</span>, <span class="string">&#x27;UK&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">2500</span>, <span class="string">&#x27;Magdalen Centre, The Oxford Science Park&#x27;</span>, <span class="string">&#x27;OX9 9ZB&#x27;</span>, <span class="string">&#x27;Oxford&#x27;</span>, <span class="string">&#x27;Oxford&#x27;</span>, <span class="string">&#x27;UK&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">2600</span>, <span class="string">&#x27;9702 Chester Road&#x27;</span>, <span class="string">&#x27;09629850293&#x27;</span>, <span class="string">&#x27;Stretford&#x27;</span>, <span class="string">&#x27;Manchester&#x27;</span>, <span class="string">&#x27;UK&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">2700</span>, <span class="string">&#x27;Schwanthalerstr. 7031&#x27;</span>, <span class="string">&#x27;80925&#x27;</span>, <span class="string">&#x27;Munich&#x27;</span>, <span class="string">&#x27;Bavaria&#x27;</span>, <span class="string">&#x27;DE&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">2800</span>, <span class="string">&#x27;Rua Frei Caneca 1360 &#x27;</span>, <span class="string">&#x27;01307-002&#x27;</span>, <span class="string">&#x27;Sao Paulo&#x27;</span>, <span class="string">&#x27;Sao Paulo&#x27;</span>, <span class="string">&#x27;BR&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">2900</span>, <span class="string">&#x27;20 Rue des Corps-Saints&#x27;</span>, <span class="string">&#x27;1730&#x27;</span>, <span class="string">&#x27;Geneva&#x27;</span>, <span class="string">&#x27;Geneve&#x27;</span>, <span class="string">&#x27;CH&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">3000</span>, <span class="string">&#x27;Murtenstrasse 921&#x27;</span>, <span class="string">&#x27;3095&#x27;</span>, <span class="string">&#x27;Bern&#x27;</span>, <span class="string">&#x27;BE&#x27;</span>, <span class="string">&#x27;CH&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">3100</span>, <span class="string">&#x27;Pieter Breughelstraat 837&#x27;</span>, <span class="string">&#x27;3029SK&#x27;</span>, <span class="string">&#x27;Utrecht&#x27;</span>, <span class="string">&#x27;Utrecht&#x27;</span>, <span class="string">&#x27;NL&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `locations` <span class="keyword">VALUES</span> (<span class="number">3200</span>, <span class="string">&#x27;Mariano Escobedo 9991&#x27;</span>, <span class="string">&#x27;11932&#x27;</span>, <span class="string">&#x27;Mexico City&#x27;</span>, <span class="string">&#x27;Distrito Federal,&#x27;</span>, <span class="string">&#x27;MX&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for order</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `<span class="keyword">order</span>`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">order</span>`  (</span><br><span class="line">  `order_id` <span class="type">int</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `order_name` <span class="type">varchar</span>(<span class="number">15</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span></span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> <span class="keyword">Dynamic</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of order</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">order</span>` <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;shkstart&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">order</span>` <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;tomcat&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">order</span>` <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">&#x27;dubbo&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for regions</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `regions`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `regions`  (</span><br><span class="line">  `region_id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `region_name` <span class="type">varchar</span>(<span class="number">25</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`region_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  <span class="keyword">UNIQUE</span> INDEX `reg_id_pk`(`region_id`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> <span class="keyword">Dynamic</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of regions</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `regions` <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;Europe&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `regions` <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;Americas&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `regions` <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">&#x27;Asia&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `regions` <span class="keyword">VALUES</span> (<span class="number">4</span>, <span class="string">&#x27;Middle East and Africa&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- View structure for emp_details_view</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> IF <span class="keyword">EXISTS</span> `emp_details_view`;</span><br><span class="line"><span class="keyword">CREATE</span> ALGORITHM <span class="operator">=</span> UNDEFINED <span class="keyword">SQL</span> SECURITY DEFINER <span class="keyword">VIEW</span> `emp_details_view` <span class="keyword">AS</span> <span class="keyword">select</span> `e`.`employee_id` <span class="keyword">AS</span> `employee_id`,`e`.`job_id` <span class="keyword">AS</span> `job_id`,`e`.`manager_id` <span class="keyword">AS</span> `manager_id`,`e`.`department_id` <span class="keyword">AS</span> `department_id`,`d`.`location_id` <span class="keyword">AS</span> `location_id`,`l`.`country_id` <span class="keyword">AS</span> `country_id`,`e`.`first_name` <span class="keyword">AS</span> `first_name`,`e`.`last_name` <span class="keyword">AS</span> `last_name`,`e`.`salary` <span class="keyword">AS</span> `salary`,`e`.`commission_pct` <span class="keyword">AS</span> `commission_pct`,`d`.`department_name` <span class="keyword">AS</span> `department_name`,`j`.`job_title` <span class="keyword">AS</span> `job_title`,`l`.`city` <span class="keyword">AS</span> `city`,`l`.`state_province` <span class="keyword">AS</span> `state_province`,`c`.`country_name` <span class="keyword">AS</span> `country_name`,`r`.`region_name` <span class="keyword">AS</span> `region_name` <span class="keyword">from</span> (((((`employees` `e` <span class="keyword">join</span> `departments` `d`) <span class="keyword">join</span> `jobs` `j`) <span class="keyword">join</span> `locations` `l`) <span class="keyword">join</span> `countries` `c`) <span class="keyword">join</span> `regions` `r`) <span class="keyword">where</span> ((`e`.`department_id` <span class="operator">=</span> `d`.`department_id`) <span class="keyword">and</span> (`d`.`location_id` <span class="operator">=</span> `l`.`location_id`) <span class="keyword">and</span> (`l`.`country_id` <span class="operator">=</span> `c`.`country_id`) <span class="keyword">and</span> (`c`.`region_id` <span class="operator">=</span> `r`.`region_id`) <span class="keyword">and</span> (`j`.`job_id` <span class="operator">=</span> `e`.`job_id`));</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="基本的查询语句"><a href="#基本的查询语句" class="headerlink" title="基本的查询语句"></a>基本的查询语句</h1><h2 id="SELECT…"><a href="#SELECT…" class="headerlink" title="SELECT…"></a>SELECT…</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 不需要from 虚表</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">9</span><span class="operator">/</span><span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<h2 id="SELECT-…-FROM"><a href="#SELECT-…-FROM" class="headerlink" title="SELECT … FROM"></a>SELECT … FROM</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span>   departments;</span><br></pre></td></tr></table></figure>

<p>一般不建议使用通配符 * ，会降低查询和所使用的应用程序的效率，应选择特定的列，如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_id, location_id</span><br><span class="line"><span class="keyword">FROM</span>   departments;</span><br></pre></td></tr></table></figure>

<h2 id="别名-AS"><a href="#别名-AS" class="headerlink" title="别名 AS"></a>别名 AS</h2><blockquote>
<p>列名	AS	别名</p>
<ul>
<li><strong>别名建议使用双引号</strong></li>
<li><strong>AS 可以省略</strong></li>
<li><strong>别名中包含空格或特殊的字符并区分大小写时，不建议省略双引号。</strong> </li>
<li><strong>使用别名可以简化查询，列名前使用表名前缀可以提高查询效率。</strong></li>
<li><strong>如果使用了表的别名，在查询字段中、过滤条件中就只能使用别名进行代替，不能使用原有的表名，否则就会报错。</strong></li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name <span class="keyword">AS</span> name, commission_pct comm</span><br><span class="line"><span class="keyword">FROM</span>   employees;</span><br></pre></td></tr></table></figure>

<h2 id="去重-DISTINCT"><a href="#去重-DISTINCT" class="headerlink" title="去重 DISTINCT"></a>去重 DISTINCT</h2><p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 但列去重</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> department_id <span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="comment">-- 多列去重</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> department_id,salary <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意事项：</p>
<ul>
<li>DISTINCT 是对后面所有列名的组合进行去重</li>
<li>DISTINCT 需要放到所有列名的前面，如果写成 <code>SELECT salary, DISTINCT department_id FROM employees</code>会报错</li>
</ul>
</blockquote>
<h2 id="空值"><a href="#空值" class="headerlink" title="空值"></a>空值</h2><blockquote>
<ul>
<li>所有运算符或列值遇到 null 值，运算的结果都为 null</li>
<li>在 MySQL 里面， 空值不等于空字符串。一个空字符串的长度是 0，而一个空值的长度是空并且占用空间</li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,salary,commission_pct,</span><br><span class="line"><span class="number">12</span> <span class="operator">*</span> salary <span class="operator">*</span> (<span class="number">1</span> <span class="operator">+</span> commission_pct) &quot;annual_sal&quot;</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>

<h2 id="查询常数"><a href="#查询常数" class="headerlink" title="查询常数"></a>查询常数</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;Sample&#x27;</span> <span class="keyword">as</span> sample, classification <span class="keyword">FROM</span> creature;</span><br></pre></td></tr></table></figure>

<p>查询常数即在 SELECT 查询结果中增加一列固定的常数列。这列的取值由个人指定的，而不是从数据表中动态取出的。</p>
<h2 id="显示表结构"><a href="#显示表结构" class="headerlink" title="显示表结构"></a>显示表结构</h2><p>使用 DESCRIBE 或 DESC 命令，表示表结构</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DESCRIBE</span> employees;</span><br><span class="line"><span class="keyword">DESC</span> employees;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">desc employees;</span></span><br><span class="line">+----------------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field          | Type        | Null | Key | Default | Extra |</span><br><span class="line">+----------------+-------------+------+-----+---------+-------+</span><br><span class="line">| employee_id    | int(6)      | NO   | PRI | 0       |       |</span><br><span class="line">| first_name     | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| last_name      | varchar(25) | NO   |     | NULL    |       |</span><br><span class="line">| email          | varchar(25) | NO   | UNI | NULL    |       |</span><br><span class="line">| phone_number   | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| hire_date      | date        | NO   |     | NULL    |       |</span><br><span class="line">| job_id         | varchar(10) | NO   | MUL | NULL    |       |</span><br><span class="line">| salary         | double(8,2) | YES  |     | NULL    |       |</span><br><span class="line">| commission_pct | double(2,2) | YES  |     | NULL    |       |</span><br><span class="line">| manager_id     | int(6)      | YES  | MUL | NULL    |       |</span><br><span class="line">| department_id  | int(4)      | YES  | MUL | NULL    |       |</span><br><span class="line">+----------------+-------------+------+-----+---------+-------+</span><br><span class="line">11 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>其中，各个字段的含义分别解释如下：</p>
<ul>
<li>Field：表示字段名称。 </li>
<li>Type：表示字段类型，这里 barcode、goodsname 是文本型的，price 是整数类型的。</li>
<li>Null：表示该列是否可以存储NULL值。</li>
<li>Key：表示该列是否已编制索引。PRI表示该列是表主键的一部分；UNI表示该列是UNIQUE索引的一部分；MUL表示在列中某个给定值允许出现多次。</li>
<li>Default：表示该列是否有默认值，如果有，那么值是多少。</li>
<li>Extra：表示可以获取的与给定列有关的附加信息，例如AUTO_INCREMENT等。</li>
</ul>
</blockquote>
<h2 id="过滤-where"><a href="#过滤-where" class="headerlink" title="过滤 where"></a>过滤 where</h2><p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段<span class="number">1</span>,字段<span class="number">2</span></span><br><span class="line"><span class="keyword">FROM</span> 表名</span><br><span class="line"><span class="keyword">WHERE</span> 过滤条件</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id, last_name, job_id, department_id</span><br><span class="line"><span class="keyword">FROM</span>   employees</span><br><span class="line"><span class="keyword">WHERE</span>  department_id <span class="operator">=</span> <span class="number">90</span> ;</span><br></pre></td></tr></table></figure>

<h1 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h1><h2 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h2><p>算术运算符主要用于数学运算，其可以连接运算符前后的两个数值或表达式，对数值或表达式进行加（+）、减（-）、乘（*）、除（&#x2F;）和取模（%）运算</p>
<p>示例：加法与减法</p>
<blockquote>
<p><strong>一个整数与整数进行加法和减法操作，结果为整数；整数与整数进行加法和减法操作，结果为浮点数。</strong></p>
<p><strong>在 MySQL 中 + 只表示数值相加。如果遇到非数值类型，先尝试转成数值，如果转失败，就按 0 计算。</strong></p>
<p><strong>MySQL 中字符串拼接要使用字符串函数 CONCAT( ) 实现</strong></p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">100</span>, <span class="number">100</span> <span class="operator">+</span> <span class="number">0</span>, <span class="number">100</span> <span class="operator">-</span> <span class="number">0</span>, <span class="number">100</span> <span class="operator">+</span> <span class="number">50</span>, <span class="number">100</span> <span class="operator">+</span> <span class="number">50</span> <span class="number">-30</span>, <span class="number">100</span> <span class="operator">+</span> <span class="number">35.5</span>, <span class="number">100</span> <span class="operator">-</span> <span class="number">35.5</span> <span class="keyword">FROM</span> dual;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----+---------+---------+----------+--------------+------------+------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">100</span> <span class="operator">|</span> <span class="number">100</span> <span class="operator">+</span> <span class="number">0</span> <span class="operator">|</span> <span class="number">100</span> <span class="operator">-</span> <span class="number">0</span> <span class="operator">|</span> <span class="number">100</span> <span class="operator">+</span> <span class="number">50</span> <span class="operator">|</span> <span class="number">100</span> <span class="operator">+</span> <span class="number">50</span> <span class="number">-30</span> <span class="operator">|</span> <span class="number">100</span> <span class="operator">+</span> <span class="number">35.5</span> <span class="operator">|</span> <span class="number">100</span> <span class="operator">-</span> <span class="number">35.5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+---------+---------+----------+--------------+------------+------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">100</span> <span class="operator">|</span>     <span class="number">100</span> <span class="operator">|</span>     <span class="number">100</span> <span class="operator">|</span>      <span class="number">150</span> <span class="operator">|</span>          <span class="number">120</span> <span class="operator">|</span>      <span class="number">135.5</span> <span class="operator">|</span>       <span class="number">64.5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+---------+---------+----------+--------------+------------+------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">2</span><span class="operator">+</span> <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span> <span class="operator">+</span> <span class="number">3</span>, concat( <span class="number">4</span>, <span class="string">&#x27;c&#x27;</span> ) <span class="keyword">FROM</span> dual;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span><span class="operator">+</span> <span class="string">&#x27;a&#x27;</span> <span class="operator">|</span> <span class="string">&#x27;b&#x27;</span> <span class="operator">+</span> <span class="number">3</span> <span class="operator">|</span> concat( <span class="number">4</span>, <span class="string">&#x27;c&#x27;</span> ) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+------------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span> <span class="number">4</span>c               <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">2</span> warnings (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>示例：乘法与除法</p>
<blockquote>
<p>在数学运算中，0 不能用作除数，在 MySQL 中，一个数除以 0 为NULL</p>
<p>整数与浮点数相除，结果为 浮点数</p>
<p>除不尽时，保留 4 位小数</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">100</span>, <span class="number">100</span> <span class="operator">*</span> <span class="number">1</span>, <span class="number">100</span> <span class="operator">*</span> <span class="number">1.0</span>, <span class="number">100</span> <span class="operator">/</span> <span class="number">1.0</span>, <span class="number">100</span> <span class="operator">/</span> <span class="number">2</span>,<span class="number">100</span> <span class="operator">+</span> <span class="number">2</span> <span class="operator">*</span> <span class="number">5</span> <span class="operator">/</span> <span class="number">2</span>,<span class="number">100</span> <span class="operator">/</span><span class="number">3</span>, <span class="number">100</span> DIV <span class="number">0</span> <span class="keyword">FROM</span> dual;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----+---------+-----------+-----------+---------+-----------------+---------+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">100</span> <span class="operator">|</span> <span class="number">100</span> <span class="operator">*</span> <span class="number">1</span> <span class="operator">|</span> <span class="number">100</span> <span class="operator">*</span> <span class="number">1.0</span> <span class="operator">|</span> <span class="number">100</span> <span class="operator">/</span> <span class="number">1.0</span> <span class="operator">|</span> <span class="number">100</span> <span class="operator">/</span> <span class="number">2</span> <span class="operator">|</span> <span class="number">100</span> <span class="operator">+</span> <span class="number">2</span> <span class="operator">*</span> <span class="number">5</span> <span class="operator">/</span> <span class="number">2</span> <span class="operator">|</span> <span class="number">100</span> <span class="operator">/</span><span class="number">3</span>  <span class="operator">|</span> <span class="number">100</span> DIV <span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+---------+-----------+-----------+---------+-----------------+---------+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">100</span> <span class="operator">|</span>     <span class="number">100</span> <span class="operator">|</span>     <span class="number">100.0</span> <span class="operator">|</span>  <span class="number">100.0000</span> <span class="operator">|</span> <span class="number">50.0000</span> <span class="operator">|</span>        <span class="number">105.0000</span> <span class="operator">|</span> <span class="number">33.3333</span> <span class="operator">|</span>      <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+---------+-----------+-----------+---------+-----------------+---------+-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>示例：求模（求余）运算符</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="number">12</span> <span class="operator">%</span> <span class="number">3</span>, <span class="number">12</span> MOD <span class="number">5</span> <span class="keyword">FROM</span> dual;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">12</span> <span class="operator">%</span> <span class="number">3</span> <span class="operator">|</span> <span class="number">12</span> MOD <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">0</span> <span class="operator">|</span>        <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h2><p>比较的结果为真则返回 1，比较的结果为假则返回 0，其他情况则返回 NULL。</p>
<h1 id="排序与分页"><a href="#排序与分页" class="headerlink" title="排序与分页"></a>排序与分页</h1><h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><blockquote>
<p>基本语法：  ORDER BY 列名 ASC</p>
<ul>
<li>ASC（ascend）：升序</li>
<li>DESC（descend）：降序</li>
</ul>
<p><strong>注意事项：</strong></p>
<ul>
<li>ORDER BY 子句在 SELECT 语句的结尾</li>
<li>可以使用不在 SELECT 列表中的列排序</li>
<li>对多列进行排序的时候，首先排序的第一列必须有相同的列值，才会对第二列进行排序。如果第一列数据中所有值都是唯一的，将不再对第二列进行排序。</li>
</ul>
</blockquote>
<p>单列排序：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id, last_name, salary<span class="operator">*</span><span class="number">12</span> annsal</span><br><span class="line"><span class="keyword">FROM</span>   employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> annsal;</span><br></pre></td></tr></table></figure>

<p>多列排序：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name, department_id, salary</span><br><span class="line"><span class="keyword">FROM</span>   employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> department_id, salary <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<h2 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h2><blockquote>
<p><strong>MySQL中使用 LIMIT 实现分页</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 格式：即从哪一行开始显示，每页显式几条记录</span></span><br><span class="line">LIMIT [位置偏移量,] 行数</span><br></pre></td></tr></table></figure>

<p>位置偏移量可以省略，默认为 0 ，即从第一行开始显示</p>
<p>MySQL 8.0中可以使用 “LIMIT 3 OFFSET 4”，意思是获取从第5条记录开始后面的 3 条记录，和 “LIMIT 4,3;” 返回的结果相同。</p>
<p>分页：（当前页数-1）* 每页条数，每页条数</p>
<p>有时可以使用 LIMIT  1，只返回一条记录。</p>
</blockquote>
<p><strong>注意事项：</strong></p>
<blockquote>
<p>不同的 DBMS 中使用的关键字可能不同。在 MySQL、PostgreSQL、MariaDB 和 SQLite 中使用 LIMIT 关键字，而且需要放到 SELECT 语句的最后面。</p>
<ul>
<li>如果是 SQL Server 和 Access，需要使用 <code>TOP</code> 关键字，比如：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT TOP 5 name, hp_max FROM heros ORDER BY hp_max DESC</span><br></pre></td></tr></table></figure>

<ul>
<li>如果是 DB2，使用<code>FETCH FIRST 5 ROWS ONLY</code>这样的关键字：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT name, hp_max FROM heros ORDER BY hp_max DESC FETCH FIRST 5 ROWS ONLY</span><br></pre></td></tr></table></figure>

<ul>
<li>如果是 Oracle，你需要基于 <code>ROWNUM</code> 来统计行数：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT rownum,last_name,salary FROM employees WHERE rownum &lt; 5 ORDER BY salary DESC;</span><br></pre></td></tr></table></figure>

<p>需要说明的是，这条语句是先取出来前 5 条数据行，然后再按照 hp_max 从高到低的顺序进行排序。但这样产生的结果和上述方法的并不一样。可以使用子查询进行分页：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT rownum, last_name,salary</span><br><span class="line">FROM (</span><br><span class="line">    SELECT last_name,salary</span><br><span class="line">    FROM employees</span><br><span class="line">    ORDER BY salary DESC)</span><br><span class="line">WHERE rownum &lt; 10;</span><br></pre></td></tr></table></figure>

<p>得到与上述方法一致的结果。</p>
</blockquote>
<h1 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h1><p>多表查询，也称为关联查询，指两个或更多个表一起完成查询操作。</p>
<p>多表查询如果不加约束条件，会查询出多表的记录数的乘积大小的表数据：笛卡尔积。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name, department_name</span><br><span class="line"><span class="keyword">FROM</span> employees, departments;</span><br></pre></td></tr></table></figure>

<h2 id="笛卡尔积（交叉连接）"><a href="#笛卡尔积（交叉连接）" class="headerlink" title="笛卡尔积（交叉连接）"></a>笛卡尔积（交叉连接）</h2><p>笛卡尔乘积是一个数学运算。假设我有两个集合 X 和 Y，那么 X 和 Y 的笛卡尔积就是 X 和 Y 的所有可能组合，也就是第一个对象来自于 X，第二个对象来自于 Y 的所有可能。组合的个数即为两个集合中元素个数的乘积数。</p>
<p>SQL92中，笛卡尔积也称为<code>交叉连接</code>，英文是 <code>CROSS JOIN</code>。在 SQL99 中也是使用 CROSS JOIN表示交叉连接。它的作用就是可以把任意表进行连接，即使这两张表不相关。在MySQL中如下情况会出现笛卡尔积：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#查询员工姓名和所在部门名称</span><br><span class="line"><span class="keyword">SELECT</span> last_name,department_name <span class="keyword">FROM</span> employees,departments;</span><br><span class="line"><span class="keyword">SELECT</span> last_name,department_name <span class="keyword">FROM</span> employees <span class="keyword">CROSS</span> <span class="keyword">JOIN</span> departments;</span><br><span class="line"><span class="keyword">SELECT</span> last_name,department_name <span class="keyword">FROM</span> employees <span class="keyword">INNER</span> <span class="keyword">JOIN</span> departments;</span><br><span class="line"><span class="keyword">SELECT</span> last_name,department_name <span class="keyword">FROM</span> employees <span class="keyword">JOIN</span> departments;</span><br></pre></td></tr></table></figure>

<p><strong>笛卡尔积出现的条件：</strong></p>
<blockquote>
<ul>
<li>省略多个表的连接条件（或关联条件）</li>
<li>连接条件（或关联条件）无效</li>
<li>所有表中的所有行互相连接</li>
</ul>
<p><strong>为了避免笛卡尔积， 可以在 WHERE 加入有效的连接条件。</strong></p>
</blockquote>
<p>正确示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>	table1.column, table2.column</span><br><span class="line"><span class="keyword">FROM</span>	table1, table2</span><br><span class="line"><span class="keyword">WHERE</span>	table1.column1 <span class="operator">=</span> table2.column2;</span><br></pre></td></tr></table></figure>

<p><strong>注意：表中有相同列时，在列名之前加上表名前缀或别名，建议使用别名进行相同列名的区分</strong></p>
<h2 id="多表查询分类"><a href="#多表查询分类" class="headerlink" title="多表查询分类"></a>多表查询分类</h2><h3 id="分类一：等值连接与非等值连接"><a href="#分类一：等值连接与非等值连接" class="headerlink" title="分类一：等值连接与非等值连接"></a>分类一：等值连接与非等值连接</h3><h4 id="等值连接"><a href="#等值连接" class="headerlink" title="等值连接"></a>等值连接</h4><blockquote>
<p>通过多张表中相等的字段值进行关联，过滤数据</p>
<p>连接 n个表,至少需要 n-1个连接条件</p>
<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.employee_id, e.last_name, e.department_id,</span><br><span class="line">       d.department_id, d.location_id</span><br><span class="line"><span class="keyword">FROM</span>   employees e , departments d</span><br><span class="line"><span class="keyword">WHERE</span>  e.department_id <span class="operator">=</span> d.department_id;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="非等值连接"><a href="#非等值连接" class="headerlink" title="非等值连接"></a>非等值连接</h4><blockquote>
<p>过多张表中不相等（如某字段在另一张表中的数据范围）的字段值进行关联，过滤数据</p>
<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.last_name, e.salary, j.grade_level</span><br><span class="line"><span class="keyword">FROM</span>   employees e, job_grades j</span><br><span class="line"><span class="keyword">WHERE</span>  e.salary <span class="keyword">BETWEEN</span> j.lowest_sal <span class="keyword">AND</span> j.highest_sal;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="分类二：自连接与非自连接"><a href="#分类二：自连接与非自连接" class="headerlink" title="分类二：自连接与非自连接"></a>分类二：自连接与非自连接</h3><h4 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h4><blockquote>
<p>当 table1 和 table2 本质上是同一张表，只是用取别名的方式虚拟成两张表以代表不同的意义。然后两个表再进行内连接，外连接等查询。</p>
<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CONCAT(worker.last_name ,<span class="string">&#x27; works for &#x27;</span> </span><br><span class="line">       , manager.last_name)</span><br><span class="line"><span class="keyword">FROM</span>   employees worker, employees manager</span><br><span class="line"><span class="keyword">WHERE</span>  worker.manager_id <span class="operator">=</span> manager.employee_id ;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="非自连接"><a href="#非自连接" class="headerlink" title="非自连接"></a>非自连接</h4><blockquote>
<p>除去自连接。</p>
</blockquote>
<h3 id="分类三：内连接与外连接"><a href="#分类三：内连接与外连接" class="headerlink" title="分类三：内连接与外连接"></a>分类三：内连接与外连接</h3><h4 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h4><blockquote>
<p>结果只包含两张表中共有数据，合并具有同一列的两个以上的表的行，<strong>结果集中不包含一个表与另一个表不匹配的行</strong></p>
</blockquote>
<h4 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h4><blockquote>
<ul>
<li><p>外连接：两个表在连接过程中除了返回满足连接条件的行以外<strong>还返回左（或右）表中不满足条件的行</strong> <strong>，这种连接称为左（或右） 外连接</strong>。没有匹配的行时, 结果表中相应的列为空（NULL）。</p>
</li>
<li><p>如果是左外连接，则连接条件中左边的表也称为<code>主表</code>，右边的表称为<code>从表</code>。</p>
<p>如果是右外连接，则连接条件中右边的表也称为<code>主表</code>，左边的表称为<code>从表</code>。</p>
</li>
<li><p><strong>主表和从表看连接条件，比如三张表 LEFT JOIN，第三张表的主表规模是前两张表的规模大小，通过 ON 筛选。</strong></p>
</li>
</ul>
</blockquote>
<p>SQL92 和 SQL99 对内连接和外连接语法不同</p>
<h4 id="SQL92：使用-实现内外连接"><a href="#SQL92：使用-实现内外连接" class="headerlink" title="SQL92：使用 (+) 实现内外连接"></a>SQL92：使用 (+) 实现内外连接</h4><blockquote>
<ul>
<li><p>在 SQL92 中采用（+）代表从表所在的位置。即左或右外连接中，(+) 表示哪个是从表。</p>
</li>
<li><p>Oracle 对 SQL92 支持较好，而 MySQL 则不支持 SQL92 的外连接。</p>
</li>
<li><p>而且在 SQL92 中，只有左外连接和右外连接，没有满（或全）外连接。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#左外连接</span><br><span class="line"><span class="keyword">SELECT</span> last_name,department_name</span><br><span class="line"><span class="keyword">FROM</span> employees ,departments</span><br><span class="line"><span class="keyword">WHERE</span> employees.department_id <span class="operator">=</span> departments.department_id(<span class="operator">+</span>);</span><br><span class="line"></span><br><span class="line">#右外连接</span><br><span class="line"><span class="keyword">SELECT</span> last_name,department_name</span><br><span class="line"><span class="keyword">FROM</span> employees ,departments</span><br><span class="line"><span class="keyword">WHERE</span> employees.department_id(<span class="operator">+</span>) <span class="operator">=</span> departments.department_id;</span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<h4 id="SQL99-语法实现多表查询"><a href="#SQL99-语法实现多表查询" class="headerlink" title="SQL99 语法实现多表查询"></a>SQL99 语法实现多表查询</h4><h5 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h5><blockquote>
<p>使用JOIN…ON子句创建连接的语法结构：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> table1.column, table2.column,table3.column</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line">    <span class="keyword">JOIN</span> table2 <span class="keyword">ON</span> table1 和 table2 的连接条件</span><br><span class="line">        <span class="keyword">JOIN</span> table3 <span class="keyword">ON</span> table2 和 table3 的连接条件</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>可以使用</strong> <strong>ON</strong> <strong>子句指定额外的连接条件</strong>。</li>
<li>这个连接条件是与其它条件分开的。</li>
<li><strong>ON</strong> <strong>子句使语句具有更高的易读性</strong>。</li>
<li><strong>关键字 JOIN、INNER JOIN、CROSS JOIN 的含义都表示内连接</strong></li>
</ul>
</blockquote>
<h5 id="内连接-INNER-JOIN"><a href="#内连接-INNER-JOIN" class="headerlink" title="内连接 INNER JOIN"></a>内连接 INNER JOIN</h5><blockquote>
<ul>
<li><p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表</span><br><span class="line"><span class="keyword">FROM</span> A表 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> B表</span><br><span class="line"><span class="keyword">ON</span> 关联条件</span><br><span class="line"><span class="keyword">WHERE</span> 等其他子句;</span><br></pre></td></tr></table></figure>
</li>
<li><p>示例</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id, city, department_name</span><br><span class="line"><span class="keyword">FROM</span>   employees e </span><br><span class="line"><span class="keyword">JOIN</span>   departments d</span><br><span class="line"><span class="keyword">ON</span>     d.department_id <span class="operator">=</span> e.department_id </span><br><span class="line"><span class="keyword">JOIN</span>   locations l</span><br><span class="line"><span class="keyword">ON</span>     d.location_id <span class="operator">=</span> l.location_id;</span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<h5 id="外连接-OUTER-JOIN"><a href="#外连接-OUTER-JOIN" class="headerlink" title="外连接 OUTER JOIN"></a>外连接 OUTER JOIN</h5><h6 id="左外连接-LEFT-OUTER-JOIN"><a href="#左外连接-LEFT-OUTER-JOIN" class="headerlink" title="左外连接 LEFT OUTER JOIN"></a>左外连接 LEFT OUTER JOIN</h6><blockquote>
<ul>
<li><p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#实现查询结果是A</span><br><span class="line"><span class="keyword">SELECT</span> 字段列表</span><br><span class="line"><span class="keyword">FROM</span> A表 <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> B表</span><br><span class="line"><span class="keyword">ON</span> 关联条件</span><br><span class="line"><span class="keyword">WHERE</span> 等其他子句;</span><br></pre></td></tr></table></figure>
</li>
<li><p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.last_name, e.department_id, d.department_name</span><br><span class="line"><span class="keyword">FROM</span>   employees e</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span>   (e.department_id <span class="operator">=</span> d.department_id) ;</span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<h6 id="右外连接-RIGHT-OUTER-JOIN"><a href="#右外连接-RIGHT-OUTER-JOIN" class="headerlink" title="右外连接 RIGHT OUTER JOIN"></a>右外连接 RIGHT OUTER JOIN</h6><blockquote>
<ul>
<li><p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#实现查询结果是B</span><br><span class="line"><span class="keyword">SELECT</span> 字段列表</span><br><span class="line"><span class="keyword">FROM</span> A表 <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> B表</span><br><span class="line"><span class="keyword">ON</span> 关联条件</span><br><span class="line"><span class="keyword">WHERE</span> 等其他子句;</span><br></pre></td></tr></table></figure>
</li>
<li><p>举例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.last_name, e.department_id, d.department_name</span><br><span class="line"><span class="keyword">FROM</span>   employees e</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span>    (e.department_id <span class="operator">=</span> d.department_id) ;</span><br></pre></td></tr></table></figure>
</li>
<li><p>注意：</p>
<p>需要注意的是，LEFT JOIN 和 RIGHT JOIN 只存在于 SQL99 及以后的标准中，在 SQL92 中不存在，只能用 (+) 表示。</p>
</li>
</ul>
</blockquote>
<h6 id="满外连接-FULL-OUTER-JOIN"><a href="#满外连接-FULL-OUTER-JOIN" class="headerlink" title="满外连接 FULL OUTER JOIN"></a>满外连接 FULL OUTER JOIN</h6><ul>
<li>满外连接的结果 &#x3D; 左右表匹配的数据 + 左表没有匹配到的数据 + 右表没有匹配到的数据。</li>
<li>SQL99是支持满外连接的。使用 FULL  JOIN 或 FULL  OUTER   JOIN来实现。</li>
<li>需要注意的是，MySQL 不支持 FULL  JOIN，但是可以用 LEFT  JOIN  <strong>UNION</strong>  RIGHT  JOIN代替。</li>
</ul>
<h2 id="UNION的使用"><a href="#UNION的使用" class="headerlink" title="UNION的使用"></a>UNION的使用</h2><blockquote>
<p><strong>合并查询结果</strong></p>
<p>利用 UNION 关键字，可以给出多条SELECT语句，并将它们的结果组合成单个结果集。合并时，两个表对应的列数和数据类型必须相同，并且相互对应。各个 SELECT 语句之间使用 UNION 或 UNION ALL 关键字分隔。</p>
<p><strong>语法格式：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">column</span>,... <span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">UNION</span> [<span class="keyword">ALL</span>]</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">column</span>,... <span class="keyword">FROM</span> table2</span><br></pre></td></tr></table></figure>

<ul>
<li>UNION			返回两个查询的结果集的并集，去除重复记录</li>
<li>UNION   ALL   返回两个查询的结果集的并集，不去重</li>
</ul>
<p>注意：执行 UNION ALL 语句时所需要的资源比 UNION 语句少。如果明确知道合并数据后的结果数据不存在重复数据，或者不需要去除重复的数据，则尽量使用 UNION ALL 语句，以提高数据查询的效率。</p>
<ul>
<li>示例：查询部门编号&gt;90或邮箱包含a的员工信息</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式一</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> email <span class="keyword">LIKE</span> <span class="string">&#x27;%a%&#x27;</span> <span class="keyword">OR</span> department_id<span class="operator">&gt;</span><span class="number">90</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees  <span class="keyword">WHERE</span> email <span class="keyword">LIKE</span> <span class="string">&#x27;%a%&#x27;</span></span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees  <span class="keyword">WHERE</span> department_id<span class="operator">&gt;</span><span class="number">90</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>示例：查询中国用户中男性的信息以及美国用户中年男性的用户信息</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id,cname <span class="keyword">FROM</span> t_chinamale <span class="keyword">WHERE</span> csex<span class="operator">=</span><span class="string">&#x27;男&#x27;</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> id,tname <span class="keyword">FROM</span> t_usmale <span class="keyword">WHERE</span> tGender<span class="operator">=</span><span class="string">&#x27;male&#x27;</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="通用的JOIN查询"><a href="#通用的JOIN查询" class="headerlink" title="通用的JOIN查询"></a>通用的JOIN查询</h2><h3 id="SQL顺序"><a href="#SQL顺序" class="headerlink" title="SQL顺序"></a>SQL顺序</h3><p>SQL书写顺序：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line"><span class="keyword">JOIN</span> <span class="keyword">ON</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line"><span class="keyword">DISTINCT</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">LIMIT</span><br></pre></td></tr></table></figure>

<p>SQL执行顺序：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span></span><br><span class="line"><span class="keyword">JOIN</span> <span class="keyword">ON</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">DISTINCT</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">LIMIT</span><br></pre></td></tr></table></figure>

<h3 id="7种JOIN理论"><a href="#7种JOIN理论" class="headerlink" title="7种JOIN理论"></a>7种JOIN理论</h3><p><strong>注意：MySQL不支持最下面 JOIN 理论</strong></p>
<p><img src="/2023/02/25/MySQL/7%E7%A7%8DJOIN%E7%90%86%E8%AE%BA.png" alt="1554979255233"></p>
<p><strong>代码示例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#中图：内连接 A∩B</span><br><span class="line">SELECT employee_id,last_name,department_name</span><br><span class="line">FROM employees e JOIN departments d</span><br><span class="line">ON e.`department_id` = d.`department_id`;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#左上图：左外连接</span><br><span class="line">SELECT employee_id,last_name,department_name</span><br><span class="line">FROM employees e LEFT JOIN departments d</span><br><span class="line">ON e.`department_id` = d.`department_id`;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#右上图：右外连接</span><br><span class="line">SELECT employee_id,last_name,department_name</span><br><span class="line">FROM employees e RIGHT JOIN departments d</span><br><span class="line">ON e.`department_id` = d.`department_id`;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#左中图：A - A∩B</span><br><span class="line">SELECT employee_id,last_name,department_name</span><br><span class="line">FROM employees e LEFT JOIN departments d</span><br><span class="line">ON e.`department_id` = d.`department_id`</span><br><span class="line">WHERE d.`department_id` IS NULL</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#右中图：B-A∩B</span><br><span class="line">SELECT employee_id,last_name,department_name</span><br><span class="line">FROM employees e RIGHT JOIN departments d</span><br><span class="line">ON e.`department_id` = d.`department_id`</span><br><span class="line">WHERE e.`department_id` IS NULL</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#左下图：满外连接</span><br><span class="line"># 左中图 + 右上图  A∪B</span><br><span class="line">SELECT employee_id,last_name,department_name</span><br><span class="line">FROM employees e LEFT JOIN departments d</span><br><span class="line">ON e.`department_id` = d.`department_id`</span><br><span class="line">WHERE d.`department_id` IS NULL</span><br><span class="line">UNION ALL  #没有去重操作，效率高</span><br><span class="line">SELECT employee_id,last_name,department_name</span><br><span class="line">FROM employees e RIGHT JOIN departments d</span><br><span class="line">ON e.`department_id` = d.`department_id`;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#右下图</span><br><span class="line">#左中图 + 右中图  A ∪B- A∩B 或者 (A -  A∩B) ∪ （B - A∩B）</span><br><span class="line">SELECT employee_id,last_name,department_name</span><br><span class="line">FROM employees e LEFT JOIN departments d</span><br><span class="line">ON e.`department_id` = d.`department_id`</span><br><span class="line">WHERE d.`department_id` IS NULL</span><br><span class="line">UNION ALL</span><br><span class="line">SELECT employee_id,last_name,department_name</span><br><span class="line">FROM employees e RIGHT JOIN departments d</span><br><span class="line">ON e.`department_id` = d.`department_id`</span><br><span class="line">WHERE e.`department_id` IS NULL</span><br></pre></td></tr></table></figure>

<h2 id="SQL99-语法新特性"><a href="#SQL99-语法新特性" class="headerlink" title="SQL99 语法新特性"></a>SQL99 语法新特性</h2><h3 id="自然连接"><a href="#自然连接" class="headerlink" title="自然连接"></a>自然连接</h3><p>SQL99 在 SQL92 的基础上提供了一些特殊语法，比如 <code>NATURAL JOIN</code> 用来表示自然连接。我们可以把自然连接理解为 SQL92 中的等值连接。它会帮你自动查询两张连接表中<code>所有相同的字段</code>，然后进行<code>等值连接</code>。</p>
<p>在 SQL92 标准中：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.`department_id` <span class="operator">=</span> d.`department_id`</span><br><span class="line"><span class="keyword">AND</span> e.`manager_id` <span class="operator">=</span> d.`manager_id`;</span><br></pre></td></tr></table></figure>

<p>在 SQL99 中可以写成：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT employee_id,last_name,department_name</span><br><span class="line">FROM employees e NATURAL JOIN departments d;</span><br></pre></td></tr></table></figure>

<h3 id="USING-连接"><a href="#USING-连接" class="headerlink" title="USING 连接"></a>USING 连接</h3><p>进行连接的时候，SQL99 还支持使用 USING 指定数据表里的<code>同名字段</code>进行等值连接。但只能配合 JOIN 一起使用。比如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT employee_id,last_name,department_name</span><br><span class="line">FROM employees e JOIN departments d</span><br><span class="line">USING (department_id);</span><br></pre></td></tr></table></figure>

<p>与自然连接 NATURAL JOIN 不同的是，USING 指定了具体的相同的字段名称，需要在 USING 的括号 ( ) 中填入要指定的同名字段。同时使用 <code>JOIN...USING</code> 可以简化 JOIN ON 的等值连接。它与下面的 SQL 查询结果是相同的：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT employee_id,last_name,department_name</span><br><span class="line">FROM employees e ,departments d</span><br><span class="line">WHERE e.department_id = d.department_id;</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>表连接的约束条件可以有三种方式：WHERE, ON, USING</p>
<ul>
<li>WHERE：适用于所有关联查询</li>
<li><code>ON</code>：只能和JOIN一起使用，只能写关联条件。虽然关联条件可以并到WHERE中和其他条件一起写，但分开写可读性更好。</li>
<li>USING：只能和JOIN一起使用，而且要求<strong>两个</strong>关联字段在关联表中名称一致，而且只能表示关联字段值相等</li>
</ul>
<blockquote>
<p>【强制】超过三个表禁止 join。需要 join 的字段，数据类型保持绝对一致；多表关联查询时， 保证被关联的字段需要有索引。 </p>
<p>说明：即使双表 join 也要注意表索引、SQL 性能。</p>
<p>来源：阿里巴巴《Java开发手册》</p>
</blockquote>
<h1 id="单行函数"><a href="#单行函数" class="headerlink" title="单行函数"></a>单行函数</h1><p>在 SQL 语言中，可以将函数分为内置函数和自定义函数。</p>
<h2 id="不同-DBMS-函数的差异"><a href="#不同-DBMS-函数的差异" class="headerlink" title="不同 DBMS 函数的差异"></a>不同 DBMS 函数的差异</h2><blockquote>
<p>使用 SQL 语言的时候，不是直接和这门语言打交道，而是通过它使用不同的数据库软件，即 DBMS。<strong>DBMS 之间的差异性很大，远大于同一个语言不同版本之间的差异。</strong>实际上，只有很少的函数是被 DBMS 同时支持的。</p>
<p>比如，大多数 DBMS 使用（||）或者（+）来做拼接符，而在 MySQL 中的字符串拼接函数为 concat()。大部分 DBMS 会有自己特定的函数，这就意味着<strong>采用 SQL 函数的代码可移植性是很差的</strong>，因此在使用函数的时候需要特别注意。</p>
</blockquote>
<h2 id="MySQL的内置函数及分类"><a href="#MySQL的内置函数及分类" class="headerlink" title="MySQL的内置函数及分类"></a>MySQL的内置函数及分类</h2><blockquote>
<p>MySQL 提供了丰富的内置函数，这些函数使得数据的维护与管理更加方便，能够更好地提供数据的分析与统计功能，在一定程度上提高了开发人员进行数据分析与统计的效率。</p>
<p>MySQL 提供的内置函数从<code>实现的功能角度</code>可以分为数值函数、字符串函数、日期和时间函数、流程控制函数、加密与解密函数、获取MySQL信息函数、聚合函数等。这些内置函数可以分为两类：<code>单行函数</code>、<code>聚合函数（或分组函数）</code>。</p>
<p><strong>单行函数</strong></p>
<ul>
<li>操作数据对象</li>
<li>接受参数返回一个结果</li>
<li><strong>只对一行进行变换</strong></li>
<li><strong>每行返回一个结果</strong></li>
<li>可以嵌套</li>
<li>参数可以是一列或一个值</li>
</ul>
</blockquote>
<h2 id="数值函数"><a href="#数值函数" class="headerlink" title="数值函数"></a>数值函数</h2><h3 id="基本函数"><a href="#基本函数" class="headerlink" title="基本函数"></a>基本函数</h3><table>
<thead>
<tr>
<th>函数</th>
<th>用法</th>
</tr>
</thead>
<tbody><tr>
<td>ABS(x)</td>
<td>返回x的绝对值</td>
</tr>
<tr>
<td>SIGN(X)</td>
<td>返回X的符号。正数返回1，负数返回-1，0返回0</td>
</tr>
<tr>
<td>PI()</td>
<td>返回圆周率的值</td>
</tr>
<tr>
<td>CEIL(x)，CEILING(x)</td>
<td>返回大于或等于某个值的最小整数</td>
</tr>
<tr>
<td>FLOOR(x)</td>
<td>返回小于或等于某个值的最大整数</td>
</tr>
<tr>
<td>LEAST(e1,e2,e3…)</td>
<td>返回列表中的最小值</td>
</tr>
<tr>
<td>GREATEST(e1,e2,e3…)</td>
<td>返回列表中的最大值</td>
</tr>
<tr>
<td>MOD(x,y)</td>
<td>返回X除以Y后的余数</td>
</tr>
<tr>
<td>RAND()</td>
<td>返回0~1的随机值</td>
</tr>
<tr>
<td>RAND(x)</td>
<td>返回 0~1 的随机值，其中 x 的值用作种子值，相同的 X 值会产生相同的随机数</td>
</tr>
<tr>
<td>ROUND(x)</td>
<td>返回一个对 x 的值进行四舍五入后，最接近于 X 的整数</td>
</tr>
<tr>
<td>ROUND(x,y)</td>
<td>返回一个对 x 的值进行四舍五入后最接近 X 的值，并保留到小数点后面Y位</td>
</tr>
<tr>
<td>TRUNCATE(x,y)</td>
<td>返回数字 x 截断为 y 位小数的结果</td>
</tr>
<tr>
<td>SQRT(x)</td>
<td>返回 x 的平方根。当 X 的值为负数时，返回NULL</td>
</tr>
</tbody></table>
<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">ABS</span>(<span class="number">-123</span>),<span class="built_in">ABS</span>(<span class="number">32</span>),SIGN(<span class="number">-23</span>),SIGN(<span class="number">43</span>),PI() <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+---------+-----------+----------+----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">ABS</span>(<span class="number">-123</span>) <span class="operator">|</span> <span class="built_in">ABS</span>(<span class="number">32</span>) <span class="operator">|</span> SIGN(<span class="number">-23</span>) <span class="operator">|</span> SIGN(<span class="number">43</span>) <span class="operator">|</span> PI()     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+---------+-----------+----------+----------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">123</span> <span class="operator">|</span>      <span class="number">32</span> <span class="operator">|</span>        <span class="number">-1</span> <span class="operator">|</span>        <span class="number">1</span> <span class="operator">|</span> <span class="number">3.141593</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+---------+-----------+----------+----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">CEIL</span>(<span class="number">32.32</span>),<span class="built_in">CEILING</span>(<span class="number">-43.23</span>),<span class="built_in">FLOOR</span>(<span class="number">32.32</span>), <span class="built_in">FLOOR</span>(<span class="number">-43.23</span>),<span class="built_in">MOD</span>(<span class="number">12</span>,<span class="number">5</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-----------------+--------------+---------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">CEIL</span>(<span class="number">32.32</span>) <span class="operator">|</span> <span class="built_in">CEILING</span>(<span class="number">-43.23</span>) <span class="operator">|</span> <span class="built_in">FLOOR</span>(<span class="number">32.32</span>) <span class="operator">|</span> <span class="built_in">FLOOR</span>(<span class="number">-43.23</span>) <span class="operator">|</span> <span class="built_in">MOD</span>(<span class="number">12</span>,<span class="number">5</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-----------------+--------------+---------------+-----------+</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">33</span> <span class="operator">|</span>             <span class="number">-43</span> <span class="operator">|</span>           <span class="number">32</span> <span class="operator">|</span>           <span class="number">-44</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-----------------+--------------+---------------+-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> RAND(),RAND(),RAND(<span class="number">10</span>),RAND(<span class="number">10</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+---------------------+--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> RAND()             <span class="operator">|</span> RAND()              <span class="operator">|</span> RAND(<span class="number">10</span>)           <span class="operator">|</span> RAND(<span class="number">10</span>)           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+---------------------+--------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">0.5655271136812187</span> <span class="operator">|</span> <span class="number">0.21062797327584398</span> <span class="operator">|</span> <span class="number">0.6570515219653505</span> <span class="operator">|</span> <span class="number">0.6570515219653505</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+---------------------+--------------------+--------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> ROUND(<span class="number">12.33</span>),ROUND(<span class="number">12.343</span>,<span class="number">2</span>),ROUND(<span class="number">12.324</span>,<span class="number">-1</span>),<span class="keyword">TRUNCATE</span>(<span class="number">12.66</span>,<span class="number">1</span>),<span class="keyword">TRUNCATE</span>(<span class="number">12.66</span>,<span class="number">-1</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-----------------+------------------+-------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span> ROUND(<span class="number">12.33</span>) <span class="operator">|</span> ROUND(<span class="number">12.343</span>,<span class="number">2</span>) <span class="operator">|</span> ROUND(<span class="number">12.324</span>,<span class="number">-1</span>) <span class="operator">|</span> <span class="keyword">TRUNCATE</span>(<span class="number">12.66</span>,<span class="number">1</span>) <span class="operator">|</span> <span class="keyword">TRUNCATE</span>(<span class="number">12.66</span>,<span class="number">-1</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-----------------+------------------+-------------------+--------------------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">12</span> <span class="operator">|</span>           <span class="number">12.34</span> <span class="operator">|</span>               <span class="number">10</span> <span class="operator">|</span>              <span class="number">12.6</span> <span class="operator">|</span>                 <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-----------------+------------------+-------------------+--------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="角度与弧度互换函数"><a href="#角度与弧度互换函数" class="headerlink" title="角度与弧度互换函数"></a>角度与弧度互换函数</h3><table>
<thead>
<tr>
<th>函数</th>
<th>用法</th>
</tr>
</thead>
<tbody><tr>
<td>RADIANS(x)</td>
<td>将角度转化为弧度，其中，参数x为角度值</td>
</tr>
<tr>
<td>DEGREES(x)</td>
<td>将弧度转化为角度，其中，参数x为弧度值</td>
</tr>
</tbody></table>
<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> RADIANS(<span class="number">30</span>),RADIANS(<span class="number">60</span>),RADIANS(<span class="number">90</span>),DEGREES(<span class="number">2</span><span class="operator">*</span>PI()) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------------------+--------------------+-----------------+</span></span><br><span class="line"><span class="operator">|</span> RADIANS(<span class="number">30</span>)        <span class="operator">|</span> RADIANS(<span class="number">60</span>)        <span class="operator">|</span> RADIANS(<span class="number">90</span>)        <span class="operator">|</span> DEGREES(<span class="number">2</span><span class="operator">*</span>PI()) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------------------+--------------------+-----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">0.5235987755982988</span> <span class="operator">|</span> <span class="number">1.0471975511965976</span> <span class="operator">|</span> <span class="number">1.5707963267948966</span> <span class="operator">|</span>             <span class="number">360</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------------------+--------------------+-----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>



<h3 id="三角函数"><a href="#三角函数" class="headerlink" title="三角函数"></a>三角函数</h3><table>
<thead>
<tr>
<th>函数</th>
<th>用法</th>
</tr>
</thead>
<tbody><tr>
<td>SIN(x)</td>
<td>返回x的正弦值，其中，参数x为弧度值</td>
</tr>
<tr>
<td>ASIN(x)</td>
<td>返回x的反正弦值，即获取正弦为x的值。如果x的值不在-1到1之间，则返回NULL</td>
</tr>
<tr>
<td>COS(x)</td>
<td>返回x的余弦值，其中，参数x为弧度值</td>
</tr>
<tr>
<td>ACOS(x)</td>
<td>返回x的反余弦值，即获取余弦为x的值。如果x的值不在-1到1之间，则返回NULL</td>
</tr>
<tr>
<td>TAN(x)</td>
<td>返回x的正切值，其中，参数x为弧度值</td>
</tr>
<tr>
<td>ATAN(x)</td>
<td>返回x的反正切值，即返回正切值为x的值</td>
</tr>
<tr>
<td>ATAN2(m,n)</td>
<td>返回两个参数的反正切值</td>
</tr>
<tr>
<td>COT(x)</td>
<td>返回x的余切值，其中，X为弧度值</td>
</tr>
</tbody></table>
<blockquote>
<p>举例：</p>
<p>ATAN2(M,N)函数返回两个参数的反正切值。<br>与ATAN(X)函数相比，ATAN2(M,N)需要两个参数，例如有两个点point(x1,y1)和point(x2,y2)，使用ATAN(X)函数计算反正切值为ATAN((y2-y1)&#x2F;(x2-x1))，使用ATAN2(M,N)计算反正切值则为ATAN2(y2-y1,x2-x1)。由使用方式可以看出，当x2-x1等于0时，ATAN(X)函数会报错，而ATAN2(M,N)函数则仍然可以计算。</p>
<p>ATAN2(M,N)函数的使用示例如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">SIN</span>(RADIANS(<span class="number">30</span>)),DEGREES(<span class="built_in">ASIN</span>(<span class="number">1</span>)),<span class="built_in">TAN</span>(RADIANS(<span class="number">45</span>)),DEGREES(<span class="built_in">ATAN</span>(<span class="number">1</span>))<span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+------------------+--------------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">SIN</span>(RADIANS(<span class="number">30</span>))    <span class="operator">|</span> DEGREES(<span class="built_in">ASIN</span>(<span class="number">1</span>)) <span class="operator">|</span> <span class="built_in">TAN</span>(RADIANS(<span class="number">45</span>))   <span class="operator">|</span> DEGREES(<span class="built_in">ATAN</span>(<span class="number">1</span>)) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+------------------+--------------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">0.49999999999999994</span> <span class="operator">|</span>               <span class="number">90</span> <span class="operator">|</span> <span class="number">0.9999999999999999</span> <span class="operator">|</span>               <span class="number">45</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+------------------+--------------------+------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="指数与对数"><a href="#指数与对数" class="headerlink" title="指数与对数"></a>指数与对数</h3><table>
<thead>
<tr>
<th>函数</th>
<th>用法</th>
</tr>
</thead>
<tbody><tr>
<td>POW(x,y)，POWER(X,Y)</td>
<td>返回x的y次方</td>
</tr>
<tr>
<td>EXP(X)</td>
<td>返回e的X次方，其中e是一个常数，2.718281828459045</td>
</tr>
<tr>
<td>LN(X)，LOG(X)</td>
<td>返回以e为底的X的对数，当X &lt;&#x3D; 0 时，返回的结果为NULL</td>
</tr>
<tr>
<td>LOG10(X)</td>
<td>返回以10为底的X的对数，当X &lt;&#x3D; 0 时，返回的结果为NULL</td>
</tr>
<tr>
<td>LOG2(X)</td>
<td>返回以2为底的X的对数，当X &lt;&#x3D; 0 时，返回NULL</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT POW(2,5),POWER(2,4),EXP(2),LN(10),LOG10(10),LOG2(4) FROM DUAL;</span><br><span class="line">+----------+------------+------------------+-------------------+-----------+---------+</span><br><span class="line">| POW(2,5) | POWER(2,4) | EXP(2)           | LN(10)            | LOG10(10) | LOG2(4) |</span><br><span class="line">+----------+------------+------------------+-------------------+-----------+---------+</span><br><span class="line">|       32 |         16 | 7.38905609893065 | 2.302585092994046 |         1 |       2 |</span><br><span class="line">+----------+------------+------------------+-------------------+-----------+---------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="进制间的转换"><a href="#进制间的转换" class="headerlink" title="进制间的转换"></a>进制间的转换</h3><table>
<thead>
<tr>
<th>函数</th>
<th>用法</th>
</tr>
</thead>
<tbody><tr>
<td>BIN(x)</td>
<td>返回x的二进制编码</td>
</tr>
<tr>
<td>HEX(x)</td>
<td>返回x的十六进制编码</td>
</tr>
<tr>
<td>OCT(x)</td>
<td>返回x的八进制编码</td>
</tr>
<tr>
<td>CONV(x,f1,f2)</td>
<td>返回f1进制数变成f2进制数</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT BIN(10),HEX(10),OCT(10),CONV(10,2,8) FROM DUAL;</span><br><span class="line">+---------+---------+---------+--------------+</span><br><span class="line">| BIN(10) | HEX(10) | OCT(10) | CONV(10,2,8) |</span><br><span class="line">+---------+---------+---------+--------------+</span><br><span class="line">| 1010    | A       | 12      | 2            |</span><br><span class="line">+---------+---------+---------+--------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h2 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h2><p>【注意：MySQL中，字符串的位置是从1开始的。】</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>用法</th>
</tr>
</thead>
<tbody><tr>
<td>ASCII(S)</td>
<td>返回字符串S中的第一个字符的ASCII码值</td>
</tr>
<tr>
<td>CHAR_LENGTH(s)</td>
<td>返回字符串s的字符数。作用与CHARACTER_LENGTH(s)相同</td>
</tr>
<tr>
<td>LENGTH(s)</td>
<td>返回字符串s的字节数，和字符集有关</td>
</tr>
<tr>
<td>CONCAT(s1,s2,……,sn)</td>
<td>连接s1,s2,……,sn为一个字符串</td>
</tr>
<tr>
<td>CONCAT_WS(x, s1,s2,……,sn)</td>
<td>同CONCAT(s1,s2,…)函数，但是每个字符串之间要加上x</td>
</tr>
<tr>
<td>INSERT(str, idx, len, replacestr)</td>
<td>将字符串str从第idx位置开始，len个字符长的子串替换为字符串replacestr</td>
</tr>
<tr>
<td>REPLACE(str, a, b)</td>
<td>用字符串b替换字符串str中所有出现的字符串a</td>
</tr>
<tr>
<td>UPPER(s) 或 UCASE(s)</td>
<td>将字符串s的所有字母转成大写字母</td>
</tr>
<tr>
<td>LOWER(s)  或LCASE(s)</td>
<td>将字符串s的所有字母转成小写字母</td>
</tr>
<tr>
<td>LEFT(str,n)</td>
<td>返回字符串str最左边的n个字符</td>
</tr>
<tr>
<td>RIGHT(str,n)</td>
<td>返回字符串str最右边的n个字符</td>
</tr>
<tr>
<td>LPAD(str, len, pad)</td>
<td>用字符串pad对str最左边进行填充，直到str的长度为len个字符</td>
</tr>
<tr>
<td>RPAD(str ,len, pad)</td>
<td>用字符串pad对str最右边进行填充，直到str的长度为len个字符</td>
</tr>
<tr>
<td>LTRIM(s)</td>
<td>去掉字符串s左侧的空格</td>
</tr>
<tr>
<td>RTRIM(s)</td>
<td>去掉字符串s右侧的空格</td>
</tr>
<tr>
<td>TRIM(s)</td>
<td>去掉字符串s开始与结尾的空格</td>
</tr>
<tr>
<td>TRIM(s1 FROM s)</td>
<td>去掉字符串s开始与结尾的s1</td>
</tr>
<tr>
<td>TRIM(LEADING s1 FROM s)</td>
<td>去掉字符串s开始处的s1</td>
</tr>
<tr>
<td>TRIM(TRAILING s1 FROM s)</td>
<td>去掉字符串s结尾处的s1</td>
</tr>
<tr>
<td>REPEAT(str, n)</td>
<td>返回str重复n次的结果</td>
</tr>
<tr>
<td>SPACE(n)</td>
<td>返回n个空格</td>
</tr>
<tr>
<td>STRCMP(s1,s2)</td>
<td>比较字符串s1,s2的ASCII码值的大小</td>
</tr>
<tr>
<td>SUBSTR(s,index,len)</td>
<td>返回从字符串s的index位置其len个字符，作用与SUBSTRING(s,n,len)、MID(s,n,len)相同</td>
</tr>
<tr>
<td>LOCATE(substr,str)</td>
<td>返回字符串substr在字符串str中首次出现的位置，作用于POSITION(substr IN str)、INSTR(str,substr)相同。未找到，返回0</td>
</tr>
<tr>
<td>ELT(m,s1,s2,…,sn)</td>
<td>返回指定位置的字符串，如果m&#x3D;1，则返回s1，如果m&#x3D;2，则返回s2，如果m&#x3D;n，则返回sn</td>
</tr>
<tr>
<td>FIELD(s,s1,s2,…,sn)</td>
<td>返回字符串s在字符串列表中第一次出现的位置</td>
</tr>
<tr>
<td>FIND_IN_SET(s1,s2)</td>
<td>返回字符串s1在字符串s2中出现的位置。其中，字符串s2是一个以逗号分隔的字符串</td>
</tr>
<tr>
<td>REVERSE(s)</td>
<td>返回s反转后的字符串</td>
</tr>
<tr>
<td>NULLIF(value1,value2)</td>
<td>比较两个字符串，如果value1与value2相等，则返回NULL，否则返回value1</td>
</tr>
</tbody></table>
<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> FIELD(<span class="string">&#x27;mm&#x27;</span>,<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;msm&#x27;</span>,<span class="string">&#x27;amma&#x27;</span>),FIND_IN_SET(<span class="string">&#x27;mm&#x27;</span>,<span class="string">&#x27;hello,mm,amma&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+-----------------------------------+</span></span><br><span class="line"><span class="operator">|</span> FIELD(<span class="string">&#x27;mm&#x27;</span>,<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;msm&#x27;</span>,<span class="string">&#x27;amma&#x27;</span>) <span class="operator">|</span> FIND_IN_SET(<span class="string">&#x27;mm&#x27;</span>,<span class="string">&#x27;hello,mm,amma&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+-----------------------------------+</span></span><br><span class="line"><span class="operator">|</span>                                <span class="number">0</span> <span class="operator">|</span>                                 <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+-----------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">NULLIF</span>(<span class="string">&#x27;mysql&#x27;</span>,<span class="string">&#x27;mysql&#x27;</span>),<span class="built_in">NULLIF</span>(<span class="string">&#x27;mysql&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">NULLIF</span>(<span class="string">&#x27;mysql&#x27;</span>,<span class="string">&#x27;mysql&#x27;</span>) <span class="operator">|</span> <span class="built_in">NULLIF</span>(<span class="string">&#x27;mysql&#x27;</span>, <span class="string">&#x27;&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span>                    <span class="operator">|</span> mysql               <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>



















































<h2 id="日期和时间函数"><a href="#日期和时间函数" class="headerlink" title="日期和时间函数"></a>日期和时间函数</h2><h3 id="获取日期、时间"><a href="#获取日期、时间" class="headerlink" title="获取日期、时间"></a>获取日期、时间</h3><table>
<thead>
<tr>
<th>函数</th>
<th>用法</th>
</tr>
</thead>
<tbody><tr>
<td><strong>CURDATE()</strong> ，CURRENT_DATE()</td>
<td>返回当前日期，只包含年、月、日</td>
</tr>
<tr>
<td><strong>CURTIME()</strong> ， CURRENT_TIME()</td>
<td>返回当前时间，只包含时、分、秒</td>
</tr>
<tr>
<td><strong>NOW()</strong> &#x2F; SYSDATE() &#x2F; CURRENT_TIMESTAMP() &#x2F; LOCALTIME() &#x2F; LOCALTIMESTAMP()</td>
<td>返回当前系统日期和时间</td>
</tr>
<tr>
<td>UTC_DATE()</td>
<td>返回UTC（世界标准时间）日期</td>
</tr>
<tr>
<td>UTC_TIME()</td>
<td>返回UTC（世界标准时间）时间</td>
</tr>
</tbody></table>
<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> CURDATE(),CURTIME(),<span class="built_in">CURRENT_TIMESTAMP</span>(),NOW(),SYSDATE()<span class="operator">+</span><span class="number">0</span> <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+-----------+---------------------+---------------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> CURDATE()  <span class="operator">|</span> CURTIME() <span class="operator">|</span> <span class="built_in">CURRENT_TIMESTAMP</span>() <span class="operator">|</span> NOW()               <span class="operator">|</span> SYSDATE()<span class="operator">+</span><span class="number">0</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+-----------+---------------------+---------------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2023</span><span class="number">-03</span><span class="number">-08</span> <span class="operator">|</span> <span class="number">22</span>:<span class="number">34</span>:<span class="number">24</span>  <span class="operator">|</span> <span class="number">2023</span><span class="number">-03</span><span class="number">-08</span> <span class="number">22</span>:<span class="number">34</span>:<span class="number">24</span> <span class="operator">|</span> <span class="number">2023</span><span class="number">-03</span><span class="number">-08</span> <span class="number">22</span>:<span class="number">34</span>:<span class="number">24</span> <span class="operator">|</span> <span class="number">20230308223424</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+-----------+---------------------+---------------------+----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="日期与时间戳的转换"><a href="#日期与时间戳的转换" class="headerlink" title="日期与时间戳的转换"></a>日期与时间戳的转换</h3><table>
<thead>
<tr>
<th>函数</th>
<th>用法</th>
</tr>
</thead>
<tbody><tr>
<td>UNIX_TIMESTAMP()</td>
<td>以UNIX时间戳的形式返回当前时间。SELECT UNIX_TIMESTAMP() -&gt;1634348884</td>
</tr>
<tr>
<td>UNIX_TIMESTAMP(date)</td>
<td>将时间date以UNIX时间戳的形式返回。</td>
</tr>
<tr>
<td>FROM_UNIXTIME(timestamp)</td>
<td>将UNIX时间戳的时间转换为普通格式的时间</td>
</tr>
</tbody></table>
<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> UNIX_TIMESTAMP(CURDATE()),UNIX_TIMESTAMP(CURTIME()),UNIX_TIMESTAMP(now());</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+---------------------------+-----------------------+</span></span><br><span class="line"><span class="operator">|</span> UNIX_TIMESTAMP(CURDATE()) <span class="operator">|</span> UNIX_TIMESTAMP(CURTIME()) <span class="operator">|</span> UNIX_TIMESTAMP(now()) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+---------------------------+-----------------------+</span></span><br><span class="line"><span class="operator">|</span>                <span class="number">1678204800</span> <span class="operator">|</span>                <span class="number">1678286411</span> <span class="operator">|</span>            <span class="number">1678286411</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+---------------------------+-----------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span>  <span class="keyword">SELECT</span> UNIX_TIMESTAMP(<span class="string">&#x27;2022-02-28 08:00:00&#x27;</span>),FROM_UNIXTIME(<span class="number">1596380910</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------+---------------------------+</span></span><br><span class="line"><span class="operator">|</span> UNIX_TIMESTAMP(<span class="string">&#x27;2022-02-28 08:00:00&#x27;</span>) <span class="operator">|</span> FROM_UNIXTIME(<span class="number">1596380910</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------+---------------------------+</span></span><br><span class="line"><span class="operator">|</span>                            <span class="number">1646006400</span> <span class="operator">|</span> <span class="number">2020</span><span class="number">-08</span><span class="number">-02</span> <span class="number">23</span>:<span class="number">08</span>:<span class="number">30</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------+---------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="获取月份、星期、星期数、天数等"><a href="#获取月份、星期、星期数、天数等" class="headerlink" title="获取月份、星期、星期数、天数等"></a>获取月份、星期、星期数、天数等</h3><table>
<thead>
<tr>
<th>函数</th>
<th>用法</th>
</tr>
</thead>
<tbody><tr>
<td>YEAR(date) &#x2F; MONTH(date) &#x2F; DAY(date)</td>
<td>返回具体的日期值</td>
</tr>
<tr>
<td>HOUR(time) &#x2F; MINUTE(time) &#x2F; SECOND(time)</td>
<td>返回具体的时间值</td>
</tr>
<tr>
<td>MONTHNAME(date)</td>
<td>返回月份：January，…</td>
</tr>
<tr>
<td>DAYNAME(date)</td>
<td>返回星期几：MONDAY，TUESDAY…..SUNDAY</td>
</tr>
<tr>
<td>WEEKDAY(date)</td>
<td>返回周几，注意，周1是0，周2是1，。。。周日是6</td>
</tr>
<tr>
<td>QUARTER(date)</td>
<td>返回日期对应的季度，范围为1～4</td>
</tr>
<tr>
<td>WEEK(date) ， WEEKOFYEAR(date)</td>
<td>返回一年中的第几周</td>
</tr>
<tr>
<td>DAYOFYEAR(date)</td>
<td>返回日期是一年中的第几天</td>
</tr>
<tr>
<td>DAYOFMONTH(date)</td>
<td>返回日期位于所在月份的第几天</td>
</tr>
<tr>
<td>DAYOFWEEK(date)</td>
<td>返回周几，注意：周日是1，周一是2，。。。周六是7</td>
</tr>
</tbody></table>
<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">YEAR</span>(CURDATE()),<span class="keyword">MONTH</span>(CURDATE()),<span class="keyword">DAY</span>(CURDATE()) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+------------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">YEAR</span>(CURDATE()) <span class="operator">|</span> <span class="keyword">MONTH</span>(CURDATE()) <span class="operator">|</span> <span class="keyword">DAY</span>(CURDATE()) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+------------------+----------------+</span></span><br><span class="line"><span class="operator">|</span>            <span class="number">2023</span> <span class="operator">|</span>                <span class="number">3</span> <span class="operator">|</span>              <span class="number">8</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+------------------+----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="keyword">HOUR</span>(CURTIME()),<span class="keyword">MINUTE</span>(NOW()),<span class="keyword">SECOND</span>(SYSDATE()) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+---------------+-------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">HOUR</span>(CURTIME()) <span class="operator">|</span> <span class="keyword">MINUTE</span>(NOW()) <span class="operator">|</span> <span class="keyword">SECOND</span>(SYSDATE()) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+---------------+-------------------+</span></span><br><span class="line"><span class="operator">|</span>              <span class="number">22</span> <span class="operator">|</span>            <span class="number">47</span> <span class="operator">|</span>                <span class="number">18</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+---------------+-------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> WEEKDAY(CURDATE()),DAYOFYEAR(NOW()),DAYOFMONTH(NOW()),DAYOFWEEK(NOW()) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+------------------+-------------------+------------------+</span></span><br><span class="line"><span class="operator">|</span> WEEKDAY(CURDATE()) <span class="operator">|</span> DAYOFYEAR(NOW()) <span class="operator">|</span> DAYOFMONTH(NOW()) <span class="operator">|</span> DAYOFWEEK(NOW()) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+------------------+-------------------+------------------+</span></span><br><span class="line"><span class="operator">|</span>                  <span class="number">2</span> <span class="operator">|</span>               <span class="number">67</span> <span class="operator">|</span>                 <span class="number">8</span> <span class="operator">|</span>                <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+------------------+-------------------+------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>























<h3 id="日期的格式化与解析"><a href="#日期的格式化与解析" class="headerlink" title="日期的格式化与解析"></a>日期的格式化与解析</h3><table>
<thead>
<tr>
<th>函数</th>
<th>用法</th>
</tr>
</thead>
<tbody><tr>
<td>DATE_FORMAT(date,fmt)</td>
<td>按照字符串fmt格式化日期date值</td>
</tr>
<tr>
<td>TIME_FORMAT(time,fmt)</td>
<td>按照字符串fmt格式化时间time值</td>
</tr>
<tr>
<td>GET_FORMAT(date_type, format_type)</td>
<td>返回日期字符串的显示格式</td>
</tr>
<tr>
<td>STR_TO_DATE(str, fmt)</td>
<td>按照字符串fmt对str进行解析，解析为一个日期</td>
</tr>
</tbody></table>
<p>上述<code>非GET_FORMAT</code>函数中fmt参数常用的格式符：</p>
<p>常用格式：%Y-%m-%d %H:%i:%s</p>
<table>
<thead>
<tr>
<th>格式符</th>
<th>说明</th>
<th>格式符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>%Y</td>
<td>4位数字表示年份</td>
<td>%y</td>
<td>表示两位数字表示年份</td>
</tr>
<tr>
<td>%M</td>
<td>月名表示月份（January,….）</td>
<td>%m</td>
<td>两位数字表示月份（01,02,03。。。）</td>
</tr>
<tr>
<td>%b</td>
<td>缩写的月名（Jan.，Feb.，….）</td>
<td>%c</td>
<td>数字表示月份（1,2,3,…）</td>
</tr>
<tr>
<td>%D</td>
<td>英文后缀表示月中的天数（1st,2nd,3rd,…）</td>
<td>%d</td>
<td>两位数字表示月中的天数(01,02…)</td>
</tr>
<tr>
<td>%e</td>
<td>数字形式表示月中的天数（1,2,3,4,5…..）</td>
<td></td>
<td></td>
</tr>
<tr>
<td>%H</td>
<td>两位数字表示小数，24小时制（01,02..）</td>
<td>%h和%I</td>
<td>两位数字表示小时，12小时制（01,02..）</td>
</tr>
<tr>
<td>%k</td>
<td>数字形式的小时，24小时制(1,2,3)</td>
<td>%l</td>
<td>数字形式表示小时，12小时制（1,2,3,4….）</td>
</tr>
<tr>
<td>%i</td>
<td>两位数字表示分钟（00,01,02）</td>
<td>%S和%s</td>
<td>两位数字表示秒(00,01,02…)</td>
</tr>
<tr>
<td>%W</td>
<td>一周中的星期名称（Sunday…）</td>
<td>%a</td>
<td>一周中的星期缩写（Sun.，Mon.,Tues.，..）</td>
</tr>
<tr>
<td>%w</td>
<td>以数字表示周中的天数(0&#x3D;Sunday,1&#x3D;Monday….)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>%j</td>
<td>以3位数字表示年中的天数(001,002…)</td>
<td>%U</td>
<td>以数字表示年中的第几周，（1,2,3。。）其中Sunday为周中第一天</td>
</tr>
<tr>
<td>%u</td>
<td>以数字表示年中的第几周，（1,2,3。。）其中Monday为周中第一天</td>
<td></td>
<td></td>
</tr>
<tr>
<td>%T</td>
<td>24小时制</td>
<td>%r</td>
<td>12小时制</td>
</tr>
<tr>
<td>%p</td>
<td>AM或PM</td>
<td>%%</td>
<td>表示%</td>
</tr>
</tbody></table>
<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> DATE_FORMAT(NOW(), <span class="string">&#x27;%H:%i:%s&#x27;</span>),STR_TO_DATE(<span class="string">&#x27;09/01/2009&#x27;</span>,<span class="string">&#x27;%m/%d/%Y&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+--------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> DATE_FORMAT(NOW(), <span class="string">&#x27;%H:%i:%s&#x27;</span>) <span class="operator">|</span> STR_TO_DATE(<span class="string">&#x27;09/01/2009&#x27;</span>,<span class="string">&#x27;%m/%d/%Y&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+--------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">22</span>:<span class="number">56</span>:<span class="number">44</span>                       <span class="operator">|</span> <span class="number">2009</span><span class="number">-09</span><span class="number">-01</span>                           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+--------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> STR_TO_DATE(<span class="string">&#x27;20140422154706&#x27;</span>,<span class="string">&#x27;%Y%m%d%H%i%s&#x27;</span>) <span class="keyword">AS</span> date01,STR_TO_DATE(<span class="string">&#x27;2020-01-01 00:00:00&#x27;</span>,<span class="string">&#x27;%Y-%m-%d&#x27;</span>) <span class="keyword">AS</span> date02,STR_TO_DATE(<span class="string">&#x27;2014-04-22 15:47:06&#x27;</span>,<span class="string">&#x27;%Y-%m-%d %H:%i:%s&#x27;</span>) <span class="keyword">AS</span> date03;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> date01              <span class="operator">|</span> date02     <span class="operator">|</span> date03              <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+------------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2014</span><span class="number">-04</span><span class="number">-22</span> <span class="number">15</span>:<span class="number">47</span>:<span class="number">06</span> <span class="operator">|</span> <span class="number">2020</span><span class="number">-01</span><span class="number">-01</span> <span class="operator">|</span> <span class="number">2014</span><span class="number">-04</span><span class="number">-22</span> <span class="number">15</span>:<span class="number">47</span>:<span class="number">06</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+------------+---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">1</span> warning (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>GET_FORMAT函数中 date_type 和 format_type 参数取值如下：</p>
<p><img src="/2023/02/25/MySQL/Get_Format%E4%B8%8Edate_type%E5%85%B3%E7%B3%BB.png" alt="Get_Format与date_type关系.png"></p>
<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> GET_FORMAT(<span class="type">DATE</span>, <span class="string">&#x27;USA&#x27;</span>),DATE_FORMAT(NOW(),GET_FORMAT(<span class="type">DATE</span>,<span class="string">&#x27;USA&#x27;</span>));</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+-------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> GET_FORMAT(<span class="type">DATE</span>, <span class="string">&#x27;USA&#x27;</span>) <span class="operator">|</span> DATE_FORMAT(NOW(),GET_FORMAT(<span class="type">DATE</span>,<span class="string">&#x27;USA&#x27;</span>)) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+-------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="operator">%</span>m.<span class="operator">%</span>d.<span class="operator">%</span>Y                <span class="operator">|</span> <span class="number">03.08</span><span class="number">.2023</span>                                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+-------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>



<h2 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h2><p>流程处理函数可以根据不同的条件，执行不同的处理流程，可以在 SQL 语句中实现不同的条件选择。MySQL 中的流程处理函数主要包括 <strong>IF( )、IFNULL( ) 和 CASE( )</strong> 函数。</p>
<ul>
<li><p>IF(value,value1,value2)</p>
<p>如果 value 的值为 TRUE，返回 value1，否则返回 value2</p>
</li>
<li><p>IFNULL(value1, value2)</p>
<p>如果 value1 不为 NULL，返回 value1，否则返回 value2</p>
</li>
<li><p>CASE WHEN 条件1 THEN 结果1 WHEN 条件2 THEN 结果2 …. [ELSE resultn] END</p>
</li>
<li><p>CASE  expr WHEN 常量值1 THEN 值1 WHEN 常量值1 THEN 值1 …. [ELSE 值n] END</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> IF(<span class="number">1</span> <span class="operator">&gt;</span> <span class="number">0</span>,<span class="string">&#x27;Right&#x27;</span>,<span class="string">&#x27;Wrong&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+</span></span><br><span class="line"><span class="operator">|</span> IF(<span class="number">1</span> <span class="operator">&gt;</span> <span class="number">0</span>,<span class="string">&#x27;Right&#x27;</span>,<span class="string">&#x27;Wrong&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">Right</span>                     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> IFNULL(<span class="keyword">null</span>,<span class="string">&#x27;Hello MySQL&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+</span></span><br><span class="line"><span class="operator">|</span> IFNULL(<span class="keyword">null</span>,<span class="string">&#x27;Hello MySQL&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+</span></span><br><span class="line"><span class="operator">|</span> Hello MySQL                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CASE</span> </span><br><span class="line">　　<span class="keyword">WHEN</span> <span class="number">1</span> <span class="operator">&gt;</span> <span class="number">0</span></span><br><span class="line">　　<span class="keyword">THEN</span> <span class="string">&#x27;1 &gt; 0&#x27;</span></span><br><span class="line">　　<span class="keyword">WHEN</span> <span class="number">2</span> <span class="operator">&gt;</span> <span class="number">0</span></span><br><span class="line">　　<span class="keyword">THEN</span> <span class="string">&#x27;2 &gt; 0&#x27;</span></span><br><span class="line">　　<span class="keyword">ELSE</span> <span class="string">&#x27;3 &gt; 0&#x27;</span></span><br><span class="line">　　<span class="keyword">END</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CASE</span> <span class="number">1</span> </span><br><span class="line">　　<span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span> <span class="string">&#x27;1&#x27;</span></span><br><span class="line">　　<span class="keyword">WHEN</span> <span class="number">2</span> <span class="keyword">THEN</span> <span class="string">&#x27;2&#x27;</span></span><br><span class="line"><span class="keyword">ELSE</span> <span class="string">&#x27;0&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> oid,`status`, <span class="keyword">CASE</span> `status` <span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span> <span class="string">&#x27;未付款&#x27;</span> </span><br><span class="line">								   <span class="keyword">WHEN</span> <span class="number">2</span> <span class="keyword">THEN</span> <span class="string">&#x27;已付款&#x27;</span> </span><br><span class="line">								   <span class="keyword">WHEN</span> <span class="number">3</span> <span class="keyword">THEN</span> <span class="string">&#x27;已发货&#x27;</span>  </span><br><span class="line">								   <span class="keyword">WHEN</span> <span class="number">4</span> <span class="keyword">THEN</span> <span class="string">&#x27;确认收货&#x27;</span>  </span><br><span class="line">								   <span class="keyword">ELSE</span> <span class="string">&#x27;无效订单&#x27;</span> <span class="keyword">END</span> </span><br><span class="line"><span class="keyword">FROM</span> t_order;</span><br></pre></td></tr></table></figure>



<h1 id="聚合（组）函数"><a href="#聚合（组）函数" class="headerlink" title="聚合（组）函数"></a>聚合（组）函数</h1><h2 id="聚合函数介绍"><a href="#聚合函数介绍" class="headerlink" title="聚合函数介绍"></a>聚合函数介绍</h2><blockquote>
<ul>
<li><p>聚合函数作用于一组数据，并对一组数据返回一个值。</p>
</li>
<li><p><strong>聚合函数类型</strong></p>
<ul>
<li>COUNT(*) 			统计所有记录</li>
<li>COUNT(field)       统计field 不为null 的数量</li>
<li>AVG(field)            统计field平均值，不包括null </li>
<li>SUM(field)           求和，不包括null</li>
<li>MAX(field)           统计字段最大值</li>
<li>MIN(field)           统计字段最小值</li>
</ul>
</li>
<li><p>聚合函数不能嵌套调用。比如不能出现类似“AVG(SUM(字段名称))”形式的调用。</p>
</li>
</ul>
</blockquote>
<p><strong>注意事项：</strong></p>
<blockquote>
<ul>
<li><p>以上五个分组函数都忽略 NULL 值，除了COUNT(*)</p>
</li>
<li><p>SUM 和 AVG 一般用于处理数值型</p>
</li>
<li><p>MAX、MIN、COUNT 可以处理任何数据类型</p>
</li>
<li><p>都可以搭配 DISTINCT 使用，用于统计去重后的结果</p>
</li>
<li><p>和分组函数一同查询的字段要求是 GROUP BY 后的字段</p>
</li>
<li><p>COUNT 的参数可以支持：字段、常量值，一般放 1。建议使用 COUNT(*)</p>
</li>
<li><p>效率：</p>
<ul>
<li><p>MYISAM 存储引擎下，COUNT(*) 的效率高。</p>
</li>
<li><p>INNODB 存储引擎下，COUNT(*) 和 COUNT(1) 的效率差不多，比 COUNT(字段) 要高一些。</p>
<p>不要使用 count(列名)来替代 <code>count(*)</code>，<code>count(*)</code>是 SQL92 定义的标准统计行数的语法, count(列名)不会统计 NULL 值。</p>
</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="GROUP-BY"><a href="#GROUP-BY" class="headerlink" title="GROUP BY"></a>GROUP BY</h2><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><p><strong>可以使用GROUP BY子句将表中的数据分成若干组</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">column</span>, group_function(<span class="keyword">column</span>)</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">table</span></span><br><span class="line">[<span class="keyword">WHERE</span>	<span class="keyword">condition</span>]</span><br><span class="line">[<span class="keyword">GROUP</span> <span class="keyword">BY</span>	group_by_expression]</span><br><span class="line">[<span class="keyword">ORDER</span> <span class="keyword">BY</span>	<span class="keyword">column</span>];</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>明确：WHERE一定放在FROM后面</strong></p>
</blockquote>
<p><strong>在SELECT列表中所有未包含在组函数中的列都应该包含在 GROUP BY子句中</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>   department_id, <span class="built_in">AVG</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span>     employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id ;</span><br></pre></td></tr></table></figure>

<p><strong>包含在 GROUP BY 子句中的列不必包含在 SELECT 列表中</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>   <span class="built_in">AVG</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span>     employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id ;</span><br></pre></td></tr></table></figure>

<h3 id="多列分组"><a href="#多列分组" class="headerlink" title="多列分组"></a>多列分组</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">SELECT</span>   department_id dept_id, job_id, <span class="built_in">SUM</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span>     employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id, job_id ;</span><br><span class="line"></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+------------+-------------+</span></span><br><span class="line"><span class="operator">|</span> dept_id <span class="operator">|</span> job_id     <span class="operator">|</span> <span class="built_in">SUM</span>(salary) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+------------+-------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">90</span> <span class="operator">|</span> AD_PRES    <span class="operator">|</span>    <span class="number">24000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">90</span> <span class="operator">|</span> AD_VP      <span class="operator">|</span>    <span class="number">34000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">60</span> <span class="operator">|</span> IT_PROG    <span class="operator">|</span>    <span class="number">28800.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">100</span> <span class="operator">|</span> FI_MGR     <span class="operator">|</span>    <span class="number">12000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">100</span> <span class="operator">|</span> FI_ACCOUNT <span class="operator">|</span>    <span class="number">39600.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">30</span> <span class="operator">|</span> PU_MAN     <span class="operator">|</span>    <span class="number">11000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">30</span> <span class="operator">|</span> PU_CLERK   <span class="operator">|</span>    <span class="number">13900.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">50</span> <span class="operator">|</span> ST_MAN     <span class="operator">|</span>    <span class="number">36400.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">50</span> <span class="operator">|</span> ST_CLERK   <span class="operator">|</span>    <span class="number">55700.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">80</span> <span class="operator">|</span> SA_MAN     <span class="operator">|</span>    <span class="number">61000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">80</span> <span class="operator">|</span> SA_REP     <span class="operator">|</span>   <span class="number">243500.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span> SA_REP     <span class="operator">|</span>     <span class="number">7000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">50</span> <span class="operator">|</span> SH_CLERK   <span class="operator">|</span>    <span class="number">64300.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">10</span> <span class="operator">|</span> AD_ASST    <span class="operator">|</span>     <span class="number">4400.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">20</span> <span class="operator">|</span> MK_MAN     <span class="operator">|</span>    <span class="number">13000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">20</span> <span class="operator">|</span> MK_REP     <span class="operator">|</span>     <span class="number">6000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">40</span> <span class="operator">|</span> HR_REP     <span class="operator">|</span>     <span class="number">6500.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">70</span> <span class="operator">|</span> PR_REP     <span class="operator">|</span>    <span class="number">10000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">110</span> <span class="operator">|</span> AC_MGR     <span class="operator">|</span>    <span class="number">12000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">110</span> <span class="operator">|</span> AC_ACCOUNT <span class="operator">|</span>     <span class="number">8300.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+------------+-------------+</span></span><br><span class="line"><span class="number">20</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="GROUP-BY中使用WITH-ROLLUP"><a href="#GROUP-BY中使用WITH-ROLLUP" class="headerlink" title="GROUP BY中使用WITH ROLLUP??"></a>GROUP BY中使用WITH ROLLUP??</h3><p>使用<code>WITH ROLLUP</code>关键字之后，在所有查询出的分组记录之后增加一条记录，该记录计算查询出的所有记录的总和，即统计记录数量。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">AVG</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="operator">&gt;</span> <span class="number">80</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id <span class="keyword">WITH</span> <span class="keyword">ROLLUP</span>;</span><br></pre></td></tr></table></figure>

<p>注意：当使用 ROLLUP 时，不能同时使用ORDER BY子句进行结果排序，即ROLLUP和ORDER BY是互相排斥的。</p>
<h2 id="HAVING"><a href="#HAVING" class="headerlink" title="HAVING"></a>HAVING</h2><h3 id="基本使用-1"><a href="#基本使用-1" class="headerlink" title="基本使用"></a>基本使用</h3><blockquote>
<p><strong>过滤分组：HAVING子句</strong></p>
<ol>
<li>行已经被分组。</li>
<li>使用了聚合函数。</li>
<li>满足 HAVING 子句中条件的分组将被显示。</li>
<li>HAVING 不能单独使用，必须要跟 GROUP BY 一起使用。</li>
<li><strong>非法使用聚合函数 ： 不能在 WHERE 子句中使用聚合函数。</strong></li>
</ol>
</blockquote>
<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 部门最高工资比 10000 高的工资</span></span><br><span class="line"><span class="comment">-- 正确写法</span></span><br><span class="line"><span class="keyword">SELECT</span>   department_id, <span class="built_in">MAX</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span>     employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">HAVING</span>   <span class="built_in">MAX</span>(salary)<span class="operator">&gt;</span><span class="number">10000</span> ;</span><br><span class="line"><span class="comment">-- 错误写法</span></span><br><span class="line"><span class="keyword">SELECT</span>   department_id, <span class="built_in">AVG</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span>     employees</span><br><span class="line"><span class="keyword">WHERE</span>    <span class="built_in">AVG</span>(salary) <span class="operator">&gt;</span> <span class="number">8000</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br></pre></td></tr></table></figure>

<h3 id="WHERE-和-HAVING-的对比"><a href="#WHERE-和-HAVING-的对比" class="headerlink" title="WHERE 和 HAVING 的对比"></a>WHERE 和 HAVING 的对比</h3><h1 id="多表查询-1"><a href="#多表查询-1" class="headerlink" title="多表查询"></a>多表查询</h1><h1 id="MySQL-事务"><a href="#MySQL-事务" class="headerlink" title="MySQL 事务"></a>MySQL 事务</h1><h1 id="MySQL-50-题"><a href="#MySQL-50-题" class="headerlink" title="MySQL 50 题"></a>MySQL 50 题</h1><p>准备学生表、分数表、课程表、教师表，表关系如下：</p>
<p><img src="/2023/02/25/MySQL/MySQL50%E9%A2%98.png" alt="MySQL50题.png"></p>
<h2 id="数据准备"><a href="#数据准备" class="headerlink" title="数据准备"></a>数据准备</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Student(</span><br><span class="line">s_id <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">s_name <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">s_birth <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">s_sex <span class="type">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY(s_id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Course(</span><br><span class="line">c_id <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">c_name <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">t_id <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY(c_id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Teacher(</span><br><span class="line">t_id <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">t_name <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY(t_id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Score(</span><br><span class="line">s_id <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">c_id <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">s_score <span class="type">INT</span>(<span class="number">3</span>),</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY(s_id,c_id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;01&#x27;</span> , <span class="string">&#x27;赵雷&#x27;</span> , <span class="string">&#x27;1990-01-01&#x27;</span> , <span class="string">&#x27;男&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;02&#x27;</span> , <span class="string">&#x27;钱电&#x27;</span> , <span class="string">&#x27;1990-12-21&#x27;</span> , <span class="string">&#x27;男&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;03&#x27;</span> , <span class="string">&#x27;孙风&#x27;</span> , <span class="string">&#x27;1990-05-20&#x27;</span> , <span class="string">&#x27;男&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;04&#x27;</span> , <span class="string">&#x27;李云&#x27;</span> , <span class="string">&#x27;1990-08-06&#x27;</span> , <span class="string">&#x27;男&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;05&#x27;</span> , <span class="string">&#x27;周梅&#x27;</span> , <span class="string">&#x27;1991-12-01&#x27;</span> , <span class="string">&#x27;女&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;06&#x27;</span> , <span class="string">&#x27;吴兰&#x27;</span> , <span class="string">&#x27;1992-03-01&#x27;</span> , <span class="string">&#x27;女&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;07&#x27;</span> , <span class="string">&#x27;郑竹&#x27;</span> , <span class="string">&#x27;1989-07-01&#x27;</span> , <span class="string">&#x27;女&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">&#x27;08&#x27;</span> , <span class="string">&#x27;王菊&#x27;</span> , <span class="string">&#x27;1990-01-20&#x27;</span> , <span class="string">&#x27;女&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Course <span class="keyword">values</span>(<span class="string">&#x27;01&#x27;</span> , <span class="string">&#x27;语文&#x27;</span> , <span class="string">&#x27;02&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Course <span class="keyword">values</span>(<span class="string">&#x27;02&#x27;</span> , <span class="string">&#x27;数学&#x27;</span> , <span class="string">&#x27;01&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Course <span class="keyword">values</span>(<span class="string">&#x27;03&#x27;</span> , <span class="string">&#x27;英语&#x27;</span> , <span class="string">&#x27;03&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Teacher <span class="keyword">values</span>(<span class="string">&#x27;01&#x27;</span> , <span class="string">&#x27;张三&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Teacher <span class="keyword">values</span>(<span class="string">&#x27;02&#x27;</span> , <span class="string">&#x27;李四&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Teacher <span class="keyword">values</span>(<span class="string">&#x27;03&#x27;</span> , <span class="string">&#x27;王五&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">&#x27;01&#x27;</span> , <span class="string">&#x27;01&#x27;</span> , <span class="string">&#x27;80&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">&#x27;01&#x27;</span> , <span class="string">&#x27;02&#x27;</span> , <span class="string">&#x27;90&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">&#x27;01&#x27;</span> , <span class="string">&#x27;03&#x27;</span> , <span class="string">&#x27;99&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">&#x27;02&#x27;</span> , <span class="string">&#x27;01&#x27;</span> , <span class="string">&#x27;70&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">&#x27;02&#x27;</span> , <span class="string">&#x27;02&#x27;</span> , <span class="string">&#x27;60&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">&#x27;02&#x27;</span> , <span class="string">&#x27;03&#x27;</span> , <span class="string">&#x27;80&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">&#x27;03&#x27;</span> , <span class="string">&#x27;01&#x27;</span> , <span class="string">&#x27;80&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">&#x27;03&#x27;</span> , <span class="string">&#x27;02&#x27;</span> , <span class="string">&#x27;80&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">&#x27;03&#x27;</span> , <span class="string">&#x27;03&#x27;</span> , <span class="string">&#x27;80&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">&#x27;04&#x27;</span> , <span class="string">&#x27;01&#x27;</span> , <span class="string">&#x27;50&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">&#x27;04&#x27;</span> , <span class="string">&#x27;02&#x27;</span> , <span class="string">&#x27;30&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">&#x27;04&#x27;</span> , <span class="string">&#x27;03&#x27;</span> , <span class="string">&#x27;20&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">&#x27;05&#x27;</span> , <span class="string">&#x27;01&#x27;</span> , <span class="string">&#x27;76&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">&#x27;05&#x27;</span> , <span class="string">&#x27;02&#x27;</span> , <span class="string">&#x27;87&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">&#x27;06&#x27;</span> , <span class="string">&#x27;01&#x27;</span> , <span class="string">&#x27;31&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">&#x27;06&#x27;</span> , <span class="string">&#x27;03&#x27;</span> , <span class="string">&#x27;34&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">&#x27;07&#x27;</span> , <span class="string">&#x27;02&#x27;</span> , <span class="string">&#x27;89&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">&#x27;07&#x27;</span> , <span class="string">&#x27;03&#x27;</span> , <span class="string">&#x27;98&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="题目及参考答案"><a href="#题目及参考答案" class="headerlink" title="题目及参考答案"></a>题目及参考答案</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 查询&quot;01&quot;课程比&quot;02&quot;课程成绩高的学生的信息及课程分数</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.s_id,</span><br><span class="line">	s.s_name,</span><br><span class="line">	s.s_birth,</span><br><span class="line">	s.s_sex,</span><br><span class="line">	sc1.s_score <span class="keyword">AS</span> <span class="string">&#x27;C01&#x27;</span>,</span><br><span class="line">	sc2.s_score <span class="keyword">AS</span> <span class="string">&#x27;C02&#x27;</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> score sc1 <span class="keyword">ON</span> s.s_id <span class="operator">=</span> sc1.s_id </span><br><span class="line">	<span class="keyword">AND</span> sc1.c_id <span class="operator">=</span> <span class="string">&#x27;01&#x27;</span></span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> score sc2 <span class="keyword">ON</span> sc2.s_id <span class="operator">=</span> s.s_id </span><br><span class="line">	<span class="keyword">AND</span> sc2.c_id <span class="operator">=</span> <span class="string">&#x27;02&#x27;</span> </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	sc1.s_score <span class="operator">&gt;</span> sc2.s_score;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 2. 查询&quot;01&quot;课程比&quot;02&quot;课程成绩低的学生的信息及课程分数</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.<span class="operator">*</span>,</span><br><span class="line">	sc1.s_score,</span><br><span class="line">	sc2.s_score </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> score sc1 <span class="keyword">ON</span> sc1.s_id <span class="operator">=</span> s.s_id </span><br><span class="line">	<span class="keyword">AND</span> sc1.c_id <span class="operator">=</span> <span class="string">&#x27;01&#x27;</span></span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> score sc2 <span class="keyword">ON</span> sc2.s_id <span class="operator">=</span> s.s_id </span><br><span class="line">	<span class="keyword">AND</span> sc2.c_id <span class="operator">=</span> <span class="string">&#x27;02&#x27;</span> </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	sc1.s_score <span class="operator">&lt;</span> sc2.s_score;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 3. 查询平均成绩大于等于60分的同学的学生编号和学生姓名和平均成绩</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.s_id,</span><br><span class="line">	round( <span class="built_in">avg</span>( sc.s_score ), <span class="number">2</span> ) avgscore </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> score sc <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> s.s_id </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	s.s_id </span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	avgscore <span class="operator">&gt;=</span> <span class="number">60</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 4. 查询平均成绩小于60分的同学的学生编号和学生姓名和平均成绩(包括没成绩的)</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.s_id,</span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">		<span class="keyword">WHEN</span> round( <span class="built_in">avg</span>( sc.s_score ), <span class="number">2</span> ) <span class="keyword">IS</span> <span class="keyword">NULL</span> <span class="keyword">THEN</span></span><br><span class="line">		<span class="number">0</span> <span class="keyword">ELSE</span> round( <span class="built_in">avg</span>( sc.s_score ), <span class="number">2</span> ) </span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">AS</span> avgscore </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> score sc <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> s.s_id </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	s.s_id </span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	avgscore <span class="operator">&lt;</span> <span class="number">60</span> </span><br><span class="line">	<span class="keyword">OR</span> avgscore <span class="operator">=</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 5. 查询所有同学的学生编号、学生姓名、选课总数、所有课程的总成绩</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.s_id,</span><br><span class="line">	s.s_name,</span><br><span class="line">	<span class="built_in">count</span>( sc.s_id ) total,</span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">		</span><br><span class="line">		<span class="keyword">WHEN</span> <span class="built_in">sum</span>( sc.s_score ) <span class="keyword">IS</span> <span class="keyword">NULL</span> <span class="keyword">THEN</span></span><br><span class="line">		<span class="number">0</span> <span class="keyword">ELSE</span> <span class="built_in">sum</span>( sc.s_score ) </span><br><span class="line">	<span class="keyword">END</span> totalScore </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> score sc <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> s.s_id </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	sc.s_id;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 6. 查询&quot;李&quot;姓老师的数量</span></span><br><span class="line"><span class="comment">-- 方式一</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="built_in">count</span>( t.t_id ),</span><br><span class="line">	t.t_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	teacher t </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	t.t_id </span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	t.t_name <span class="keyword">LIKE</span> <span class="string">&#x27;李%&#x27;</span>;</span><br><span class="line">	</span><br><span class="line"><span class="comment">-- 方式二</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="built_in">COUNT</span>(<span class="operator">*</span>) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	teacher </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t_name <span class="keyword">LIKE</span> <span class="string">&#x27;李%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 7. 查询学过&quot;张三&quot;老师授课的同学的信息</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span></span><br><span class="line">	s.<span class="operator">*</span>,</span><br><span class="line">	sc.<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s</span><br><span class="line">	<span class="keyword">JOIN</span> score sc <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> s.s_id</span><br><span class="line">	<span class="keyword">JOIN</span> course c <span class="keyword">ON</span> c.c_id <span class="operator">=</span> sc.c_id</span><br><span class="line">	<span class="keyword">JOIN</span> teacher t <span class="keyword">ON</span> t.t_id <span class="operator">=</span> c.t_id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t.t_name <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 8.查询没学过&quot;张三&quot;老师授课的同学的信息</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">WHERE t.t_name != &#x27;张三&#x27;;可能等于其他老师，这里是将所有情况都得到才进行过滤的</span></span><br><span class="line"><span class="comment">因此筛选出的行是有问题的，应该先过滤再筛选</span></span><br><span class="line"><span class="comment">不等于只能购过滤一条记录</span></span><br><span class="line"><span class="comment">SELECT DISTINCT</span></span><br><span class="line"><span class="comment">	s.* ,sc.*,c.*,t.*</span></span><br><span class="line"><span class="comment">FROM</span></span><br><span class="line"><span class="comment">	student s</span></span><br><span class="line"><span class="comment">	JOIN score sc ON sc.s_id = s.s_id</span></span><br><span class="line"><span class="comment">	JOIN course c ON c.c_id = sc.c_id</span></span><br><span class="line"><span class="comment">	JOIN teacher t ON t.t_id = c.t_id </span></span><br><span class="line"><span class="comment">WHERE t.t_name != &#x27;张三&#x27;;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	s.s_id <span class="keyword">NOT</span> <span class="keyword">IN</span> (</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		sc.s_id </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		student s2</span><br><span class="line">		<span class="keyword">JOIN</span> score sc <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> s2.s_id </span><br><span class="line">	<span class="keyword">WHERE</span></span><br><span class="line">	sc.c_id <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> c.c_id <span class="keyword">FROM</span> course c <span class="keyword">JOIN</span> teacher t <span class="keyword">ON</span> t.t_id <span class="operator">=</span> c.t_id <span class="keyword">WHERE</span> t.t_name <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span> ));</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 9. 查询学过编号为&quot;01&quot;并且也学过编号为&quot;02&quot;的课程的同学的信息</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.<span class="operator">*</span>,</span><br><span class="line">	sc1.c_id,</span><br><span class="line">	sc2.c_id </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s,</span><br><span class="line">	score sc1,</span><br><span class="line">	score sc2 </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	s.s_id <span class="operator">=</span> sc1.s_id </span><br><span class="line">	<span class="keyword">AND</span> s.s_id <span class="operator">=</span> sc2.s_id </span><br><span class="line">	<span class="keyword">AND</span> sc1.c_id <span class="operator">=</span> <span class="string">&#x27;01&#x27;</span> </span><br><span class="line">	<span class="keyword">AND</span> sc2.c_id <span class="operator">=</span> <span class="string">&#x27;02&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 10. 查询学过编号为&quot;01&quot;但是没有学过编号为&quot;02&quot;的课程的同学的信息</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	s.s_id <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> s_id <span class="keyword">FROM</span> score <span class="keyword">WHERE</span> c_id <span class="operator">=</span> <span class="string">&#x27;01&#x27;</span> ) </span><br><span class="line">	<span class="keyword">AND</span> s.s_id <span class="keyword">NOT</span> <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> s_id <span class="keyword">FROM</span> score <span class="keyword">WHERE</span> c_id <span class="operator">=</span> <span class="string">&#x27;02&#x27;</span> );</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 11. 查询没有学全所有课程的同学的信息</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> score sc <span class="keyword">ON</span> s.s_id <span class="operator">=</span> sc.s_id </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	s.s_id </span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	<span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">&lt;</span> ( <span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> course );</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 12. 查询至少有一门课与学号为&quot;01&quot;的同学所学相同的同学的信息</span></span><br><span class="line"><span class="comment">-- 方法一：</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span></span><br><span class="line">	s.<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s</span><br><span class="line">	<span class="keyword">JOIN</span> score sc <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> s.s_id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	sc.c_id <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> sc.c_id <span class="keyword">FROM</span> student s <span class="keyword">JOIN</span> score sc <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> s.s_id <span class="keyword">AND</span> sc.c_id <span class="operator">=</span> <span class="string">&#x27;01&#x27;</span> );<span class="comment">-- 方法二：</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	s_id <span class="keyword">IN</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span></span><br><span class="line">		s_id </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		score sc </span><br><span class="line">	<span class="keyword">WHERE</span></span><br><span class="line">	c_id <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> c_id <span class="keyword">FROM</span> score <span class="keyword">WHERE</span> c_id <span class="operator">=</span> <span class="string">&#x27;01&#x27;</span> ));</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 13. 查询和&quot;01&quot;号的同学学习的课程完全相同的其他同学的信息</span></span><br><span class="line"><span class="comment">-- 方式一</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	s_id <span class="keyword">IN</span> (</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		sc.s_id </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		score sc </span><br><span class="line">	<span class="keyword">WHERE</span></span><br><span class="line">		sc.c_id <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> c_id <span class="keyword">FROM</span> score <span class="keyword">WHERE</span> s_id <span class="operator">=</span> <span class="string">&#x27;01&#x27;</span> ) </span><br><span class="line">		<span class="keyword">AND</span> sc.s_id <span class="operator">!=</span> <span class="string">&#x27;01&#x27;</span> </span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">		sc.s_id </span><br><span class="line">	<span class="keyword">HAVING</span></span><br><span class="line">	<span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">=</span> ( <span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> score <span class="keyword">WHERE</span> s_id <span class="operator">=</span> <span class="string">&#x27;01&#x27;</span> ));</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student <span class="keyword">AS</span> s</span><br><span class="line">	<span class="keyword">JOIN</span> score <span class="keyword">AS</span> sc <span class="keyword">ON</span> s.s_id <span class="operator">=</span> sc.s_id </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	sc.s_id </span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	GROUP_CONCAT( sc.c_id ) <span class="operator">=</span> ( <span class="keyword">SELECT</span> GROUP_CONCAT( c_id ) <span class="keyword">FROM</span> score <span class="keyword">GROUP</span> <span class="keyword">BY</span> s_id <span class="keyword">HAVING</span> s_id <span class="operator">=</span> <span class="string">&#x27;01&#x27;</span> ) </span><br><span class="line">	<span class="keyword">AND</span> sc.s_id <span class="operator">!=</span> <span class="string">&#x27;01&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 14. 查询没学过&quot;张三&quot;老师讲授的任一门课程的学生姓名</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	s.s_id <span class="keyword">NOT</span> <span class="keyword">IN</span> (</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		sc.s_id </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		score sc</span><br><span class="line">		<span class="keyword">JOIN</span> course c <span class="keyword">ON</span> c.c_id <span class="operator">=</span> sc.c_id</span><br><span class="line">		<span class="keyword">JOIN</span> teacher t <span class="keyword">ON</span> c.t_id <span class="operator">=</span> t.t_id </span><br><span class="line">	<span class="keyword">WHERE</span></span><br><span class="line">		t_name <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span> </span><br><span class="line">	);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 15. 查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.s_id,</span><br><span class="line">	s.s_name,</span><br><span class="line">	<span class="built_in">avg</span>( sc.s_score ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> score sc <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> s.s_id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	sc.s_id <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> s_id <span class="keyword">FROM</span> score <span class="keyword">WHERE</span> s_score <span class="operator">&lt;</span> <span class="number">60</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> s_id <span class="keyword">HAVING</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">&gt;=</span> <span class="number">2</span> ) </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	s.s_id,</span><br><span class="line">	s.s_name;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 16. 检索&quot;01&quot;课程分数小于60，按分数降序排列的学生信息</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.<span class="operator">*</span>,</span><br><span class="line">	sc.c_id,</span><br><span class="line">	sc.s_score </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> score sc <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> s.s_id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	sc.c_id <span class="operator">=</span> <span class="string">&#x27;01&#x27;</span> </span><br><span class="line">	<span class="keyword">AND</span> sc.s_score <span class="operator">&lt;</span> <span class="number">60</span> </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	sc.s_score <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 17. 按平均成绩从高到低显示所有学生的所有课程的成绩以及平均成绩</span></span><br><span class="line"><span class="comment">-- 方式一</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	sc.s_id,</span><br><span class="line">	( <span class="keyword">SELECT</span> s_score <span class="keyword">FROM</span> score <span class="keyword">WHERE</span> s_id <span class="operator">=</span> sc.s_id <span class="keyword">AND</span> c_id <span class="operator">=</span> <span class="string">&#x27;01&#x27;</span> ) <span class="keyword">AS</span> <span class="string">&#x27;01&#x27;</span>,</span><br><span class="line">	( <span class="keyword">SELECT</span> s_score <span class="keyword">FROM</span> score <span class="keyword">WHERE</span> s_id <span class="operator">=</span> sc.s_id <span class="keyword">AND</span> c_id <span class="operator">=</span> <span class="string">&#x27;02&#x27;</span> ) <span class="keyword">AS</span> <span class="string">&#x27;02&#x27;</span>,</span><br><span class="line">	( <span class="keyword">SELECT</span> s_score <span class="keyword">FROM</span> score <span class="keyword">WHERE</span> s_id <span class="operator">=</span> sc.s_id <span class="keyword">AND</span> c_id <span class="operator">=</span> <span class="string">&#x27;03&#x27;</span> ) <span class="keyword">AS</span> <span class="string">&#x27;03&#x27;</span>,</span><br><span class="line">	( <span class="keyword">SELECT</span> <span class="built_in">avg</span>( s_score ) <span class="keyword">FROM</span> score sc <span class="keyword">WHERE</span> s_id <span class="operator">=</span> sc.s_id ) <span class="keyword">AS</span> <span class="string">&#x27;avg&#x27;</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	score sc </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	sc.s_id </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	avg <span class="keyword">DESC</span>;</span><br><span class="line"><span class="comment">-- 方式二</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	sc.s_id,</span><br><span class="line">	sc1.s_score <span class="keyword">AS</span> <span class="string">&#x27;01&#x27;</span>,</span><br><span class="line">	sc2.s_score <span class="keyword">AS</span> <span class="string">&#x27;02&#x27;</span>,</span><br><span class="line">	sc3.s_score <span class="keyword">AS</span> <span class="string">&#x27;03&#x27;</span>,</span><br><span class="line">	round( <span class="built_in">avg</span>( sc4.s_score ), <span class="number">2</span> ) avg </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	score sc</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> score sc1 <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> sc1.s_id </span><br><span class="line">	<span class="keyword">AND</span> sc1.c_id <span class="operator">=</span> <span class="string">&#x27;01&#x27;</span></span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> score sc2 <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> sc2.s_id </span><br><span class="line">	<span class="keyword">AND</span> sc2.c_id <span class="operator">=</span> <span class="string">&#x27;02&#x27;</span></span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> score sc3 <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> sc3.s_id </span><br><span class="line">	<span class="keyword">AND</span> sc3.c_id <span class="operator">=</span> <span class="string">&#x27;03&#x27;</span></span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> score sc4 <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> sc4.s_id </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	sc.s_id </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	avg <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 18. 查询各科成绩最高分、最低分和平均分：以如下形式显示：</span></span><br><span class="line"><span class="comment">-- 课程ID，课程name，最高分，最低分，平均分，及格率，中等率，优良率，优秀率</span></span><br><span class="line"><span class="comment">-- 及格为&gt;=60，中等为：70-80，优良为：80-90，优秀为：&gt;=90</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	sc.c_id,</span><br><span class="line">	c.c_name,</span><br><span class="line">	<span class="built_in">max</span>( sc.s_score ) maxScore,</span><br><span class="line">	<span class="built_in">min</span>( sc.s_score ) <span class="keyword">AS</span> minScore,</span><br><span class="line">	<span class="built_in">avg</span>( sc.s_score ) avgScore,</span><br><span class="line">	round(</span><br><span class="line">		<span class="number">100</span> <span class="operator">*</span>(</span><br><span class="line">		<span class="built_in">sum</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> sc.s_score <span class="operator">&gt;=</span> <span class="number">60</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span> ))<span class="operator">/</span> <span class="built_in">sum</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> sc.s_score <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span> ),</span><br><span class="line">		<span class="number">2</span> </span><br><span class="line">	) <span class="keyword">AS</span> 及格率,</span><br><span class="line">	round(</span><br><span class="line">		<span class="number">100</span> <span class="operator">*</span>(</span><br><span class="line">		<span class="built_in">sum</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> sc.s_score <span class="operator">&gt;=</span> <span class="number">70</span> <span class="keyword">AND</span> sc.s_score <span class="operator">&lt;</span> <span class="number">80</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span> )<span class="operator">/</span> <span class="built_in">sum</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> sc.s_score <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span> )),</span><br><span class="line">		<span class="number">2</span> </span><br><span class="line">	) <span class="keyword">AS</span> 中等率,</span><br><span class="line">	round(</span><br><span class="line">		<span class="number">100</span> <span class="operator">*</span>(</span><br><span class="line">		<span class="built_in">sum</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> sc.s_score <span class="operator">&gt;=</span> <span class="number">80</span> <span class="keyword">AND</span> sc.s_score <span class="operator">&lt;</span> <span class="number">90</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span> )<span class="operator">/</span> <span class="built_in">sum</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> sc.s_score <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span> )),</span><br><span class="line">		<span class="number">2</span> </span><br><span class="line">	) <span class="keyword">AS</span> 优良率,</span><br><span class="line">	round(</span><br><span class="line">		<span class="number">100</span> <span class="operator">*</span>(</span><br><span class="line">		<span class="built_in">sum</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> sc.s_score <span class="operator">&gt;=</span> <span class="number">90</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span> )<span class="operator">/</span> <span class="built_in">sum</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> sc.s_score <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span> )),</span><br><span class="line">		<span class="number">2</span> </span><br><span class="line">	) <span class="keyword">AS</span> 优秀率 </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	score sc</span><br><span class="line">	<span class="keyword">JOIN</span> course c <span class="keyword">ON</span> c.c_id <span class="operator">=</span> sc.c_id </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	sc.c_id,</span><br><span class="line">	c.c_name;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 19. 按各科成绩进行排序，并显示排名</span></span><br><span class="line"><span class="keyword">SELECT</span> sc.<span class="operator">*</span>, ( <span class="keyword">SELECT</span> <span class="built_in">COUNT</span>( <span class="keyword">DISTINCT</span> s_score ) <span class="keyword">FROM</span> score <span class="keyword">WHERE</span> c_id <span class="operator">=</span> sc.c_id <span class="keyword">AND</span> s_score <span class="operator">&gt;</span> sc.s_score </span><br><span class="line">) <span class="operator">+</span> <span class="number">1</span> <span class="keyword">AS</span> r </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	score <span class="keyword">AS</span> sc </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	sc.c_id,</span><br><span class="line">	r;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 20. 查询学生的总成绩并进行排名</span></span><br><span class="line"><span class="comment">-- 不带序号</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.s_id,</span><br><span class="line">	<span class="built_in">sum</span>( sc.s_score ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s,</span><br><span class="line">	score sc </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	s.s_id <span class="operator">=</span> sc.s_id </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	s.s_id </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	<span class="number">2</span> <span class="keyword">DESC</span>;<span class="comment">-- 带序号</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="operator">*</span>,</span><br><span class="line">	(</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		<span class="built_in">count</span>( sc2.sumScore ) </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		(</span><br><span class="line">		<span class="keyword">SELECT</span></span><br><span class="line">			s.s_id,</span><br><span class="line">			<span class="built_in">sum</span>( sc.s_score ) <span class="keyword">AS</span> sumScore </span><br><span class="line">		<span class="keyword">FROM</span></span><br><span class="line">			student s,</span><br><span class="line">			score sc </span><br><span class="line">		<span class="keyword">WHERE</span></span><br><span class="line">			s.s_id <span class="operator">=</span> sc.s_id </span><br><span class="line">		<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">			s.s_id </span><br><span class="line">		<span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">			<span class="number">2</span> <span class="keyword">DESC</span> </span><br><span class="line">		) sc2 </span><br><span class="line">	<span class="keyword">WHERE</span></span><br><span class="line">		sc2.sumScore <span class="operator">&gt;</span> sc1.sumScore </span><br><span class="line">	)<span class="operator">+</span> <span class="number">1</span> <span class="keyword">AS</span> r </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	(</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		s.s_id,</span><br><span class="line">		<span class="built_in">sum</span>( sc.s_score ) <span class="keyword">AS</span> sumScore </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		student s,</span><br><span class="line">		score sc </span><br><span class="line">	<span class="keyword">WHERE</span></span><br><span class="line">		s.s_id <span class="operator">=</span> sc.s_id </span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">		s.s_id </span><br><span class="line">	<span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">		<span class="number">2</span> <span class="keyword">DESC</span> </span><br><span class="line">	) sc1 </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	r <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 21. 查询不同老师所教不同课程平均分从高到低显示</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t.t_id,</span><br><span class="line">	t.t_name,</span><br><span class="line">	round( <span class="built_in">avg</span>( sc.s_score ), <span class="number">2</span> ) avgScore </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	course c</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> teacher t <span class="keyword">ON</span> t.t_id <span class="operator">=</span> c.t_id</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> score sc <span class="keyword">ON</span> sc.c_id <span class="operator">=</span> c.c_id </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	t.t_id </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	avgScore <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 22. 查询所有课程的成绩第2名到第3名的学生信息及该课程成绩</span></span><br><span class="line"><span class="comment">-- 注意：having在查询出结果之后执行</span></span><br><span class="line"><span class="comment">-- 方式一：中间表关联</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	sc.<span class="operator">*</span>,</span><br><span class="line">	( <span class="keyword">SELECT</span> <span class="built_in">count</span>( <span class="keyword">DISTINCT</span> s_score ) <span class="keyword">FROM</span> score <span class="keyword">WHERE</span> sc.c_id <span class="operator">=</span> c_id <span class="keyword">AND</span> s_score <span class="operator">&gt;</span> sc.s_score )<span class="operator">+</span> <span class="number">1</span> <span class="keyword">AS</span> r </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	score sc </span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	r <span class="keyword">BETWEEN</span> <span class="number">2</span> </span><br><span class="line">	<span class="keyword">AND</span> <span class="number">3</span> </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	sc.c_id;</span><br><span class="line"><span class="comment">-- 方式二</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	score sc</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> student s <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> s.s_id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	( <span class="keyword">SELECT</span> <span class="built_in">count</span>( <span class="keyword">DISTINCT</span> s_score ) <span class="keyword">FROM</span> score <span class="keyword">WHERE</span> sc.c_id <span class="operator">=</span> c_id <span class="keyword">AND</span> s_score <span class="operator">&gt;</span> sc.s_score ) <span class="keyword">BETWEEN</span> <span class="number">2</span> </span><br><span class="line">	<span class="keyword">AND</span> <span class="number">3</span> </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	sc.c_id;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 23. 统计各科成绩各分数段人数：课程编号,课程名称, 100-85 , 85-70 , 70-60 , 0-60 及所占百分比</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span></span><br><span class="line">	c.c_id,</span><br><span class="line">	c.c_name,</span><br><span class="line">	sc1.`<span class="number">85</span><span class="number">-100</span>`,</span><br><span class="line">	sc1.percentA,</span><br><span class="line">	sc2.`<span class="number">70</span><span class="number">-85</span>`,</span><br><span class="line">	sc2.percentB,</span><br><span class="line">	sc3.`<span class="number">60</span><span class="number">-70</span>`,</span><br><span class="line">	sc3.percentC,</span><br><span class="line">	sc4.`<span class="number">0</span><span class="number">-60</span>`,</span><br><span class="line">	sc4.percentD </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	score sc</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> (</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		sc.c_id,</span><br><span class="line">		<span class="built_in">sum</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> sc.s_score <span class="operator">&gt;</span> <span class="number">85</span> <span class="keyword">AND</span> sc.s_score <span class="operator">&lt;=</span> <span class="number">100</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span> ) <span class="keyword">AS</span> `<span class="number">85</span><span class="number">-100</span>`,</span><br><span class="line">		round( <span class="built_in">sum</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> sc.s_score <span class="operator">&gt;</span> <span class="number">85</span> <span class="keyword">AND</span> sc.s_score <span class="operator">&lt;=</span> <span class="number">100</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span> )<span class="operator">/</span> <span class="built_in">count</span>(<span class="operator">*</span>), <span class="number">2</span> ) <span class="keyword">AS</span> percentA </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		score sc </span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">		sc.c_id </span><br><span class="line">	) <span class="keyword">AS</span> sc1 <span class="keyword">ON</span> sc.c_id <span class="operator">=</span> sc1.c_id</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> (</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		sc.c_id,</span><br><span class="line">		<span class="built_in">sum</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> sc.s_score <span class="operator">&gt;</span> <span class="number">70</span> <span class="keyword">AND</span> sc.s_score <span class="operator">&lt;=</span> <span class="number">100</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span> ) <span class="keyword">AS</span> `<span class="number">70</span><span class="number">-85</span>`,</span><br><span class="line">		round( <span class="built_in">sum</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> sc.s_score <span class="operator">&gt;</span> <span class="number">70</span> <span class="keyword">AND</span> sc.s_score <span class="operator">&lt;=</span> <span class="number">85</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span> )<span class="operator">/</span> <span class="built_in">count</span>(<span class="operator">*</span>), <span class="number">2</span> ) <span class="keyword">AS</span> percentB </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		score sc </span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">		sc.c_id </span><br><span class="line">	) <span class="keyword">AS</span> sc2 <span class="keyword">ON</span> sc.c_id <span class="operator">=</span> sc2.c_id</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> (</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		sc.c_id,</span><br><span class="line">		<span class="built_in">sum</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> sc.s_score <span class="operator">&gt;</span> <span class="number">60</span> <span class="keyword">AND</span> sc.s_score <span class="operator">&lt;=</span> <span class="number">70</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span> ) <span class="keyword">AS</span> `<span class="number">60</span><span class="number">-70</span>`,</span><br><span class="line">		round( <span class="built_in">sum</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> sc.s_score <span class="operator">&gt;</span> <span class="number">60</span> <span class="keyword">AND</span> sc.s_score <span class="operator">&lt;=</span> <span class="number">70</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span> )<span class="operator">/</span> <span class="built_in">count</span>(<span class="operator">*</span>), <span class="number">2</span> ) <span class="keyword">AS</span> percentC </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		score sc </span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">		sc.c_id </span><br><span class="line">	) <span class="keyword">AS</span> sc3 <span class="keyword">ON</span> sc.c_id <span class="operator">=</span> sc3.c_id</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> (</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		sc.c_id,</span><br><span class="line">		<span class="built_in">sum</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> sc.s_score <span class="operator">&gt;</span> <span class="number">0</span> <span class="keyword">AND</span> sc.s_score <span class="operator">&lt;=</span> <span class="number">60</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span> ) <span class="keyword">AS</span> `<span class="number">0</span><span class="number">-60</span>`,</span><br><span class="line">		round( <span class="built_in">sum</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> sc.s_score <span class="operator">&gt;</span> <span class="number">0</span> <span class="keyword">AND</span> sc.s_score <span class="operator">&lt;=</span> <span class="number">60</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span> )<span class="operator">/</span> <span class="built_in">count</span>(<span class="operator">*</span>), <span class="number">2</span> ) <span class="keyword">AS</span> percentD </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		score sc </span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">		sc.c_id </span><br><span class="line">	) <span class="keyword">AS</span> sc4 <span class="keyword">ON</span> sc.c_id <span class="operator">=</span> sc4.c_id</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> course c <span class="keyword">ON</span> c.c_id <span class="operator">=</span> sc.c_id;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 24. 查询学生平均成绩及其名次 </span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	sc1.s_id,</span><br><span class="line">	sc1.avgScore,</span><br><span class="line">	<span class="built_in">sum</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> sc1.avgScore <span class="operator">&lt;</span> sc2.avgScore <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span> )<span class="operator">+</span> <span class="number">1</span> r </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	( <span class="keyword">SELECT</span> s_id, <span class="built_in">avg</span>( s_score ) avgScore <span class="keyword">FROM</span> score <span class="keyword">GROUP</span> <span class="keyword">BY</span> s_id ) sc1</span><br><span class="line">	<span class="keyword">JOIN</span> ( <span class="keyword">SELECT</span> s_id, <span class="built_in">avg</span>( s_score ) avgScore <span class="keyword">FROM</span> score <span class="keyword">GROUP</span> <span class="keyword">BY</span> s_id ) sc2 </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	sc1.s_id,</span><br><span class="line">	sc1.avgScore </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	r;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 25. 查询各科成绩前三名的记录</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	sc1.s_id,</span><br><span class="line">	sc1.c_id,</span><br><span class="line">	sc1.s_score,</span><br><span class="line">	<span class="built_in">count</span>( sc2.s_score ) <span class="operator">+</span> <span class="number">1</span> <span class="keyword">AS</span> r </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	score sc1</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> score sc2 <span class="keyword">ON</span> sc1.c_id <span class="operator">=</span> sc2.c_id </span><br><span class="line">	<span class="keyword">AND</span> sc1.s_score <span class="operator">&lt;</span> sc2.s_score </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	<span class="number">1</span>,</span><br><span class="line">	<span class="number">2</span>,</span><br><span class="line">	<span class="number">3</span> </span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	<span class="built_in">count</span>( sc2.s_id ) <span class="operator">&lt;</span> <span class="number">3</span> </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	sc1.c_id,</span><br><span class="line">	r;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 26. 查询每门课程被选修的学生数</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	c_id,</span><br><span class="line">	<span class="built_in">count</span>( s_id ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	score </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	c_id;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 27. 查询出只有两门课程的全部学生的学号和姓名</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.s_id,</span><br><span class="line">	s.s_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> score sc <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> s.s_id </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	sc.s_id,</span><br><span class="line">	s.s_name </span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	<span class="built_in">count</span>( sc.c_id ) <span class="operator">=</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 28. 查询男生、女生人数</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s_sex,</span><br><span class="line">	<span class="built_in">count</span>( s_sex ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	s_sex;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 29. 查询名字中含有&quot;风&quot;字的学生信息</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	s_name <span class="keyword">LIKE</span> <span class="string">&#x27;%风%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 30. 查询同名同性学生名单，并统计同名人数</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.s_name,</span><br><span class="line">	<span class="built_in">count</span>(<span class="operator">*</span>) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	s.s_name </span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	<span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">&gt;</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 31. 查询1990年出生的学生名单(注：student表中s_birth列的类型是datetime)</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	<span class="keyword">YEAR</span> ( s_birth ) <span class="operator">=</span> <span class="number">1990</span>;</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	s_birth <span class="keyword">LIKE</span> <span class="string">&#x27;1990%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 32. 查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	sc.c_id,</span><br><span class="line">	round( <span class="built_in">avg</span>( sc.s_score ), <span class="number">2</span> ) avgscore </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	score sc </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	sc.c_id </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	avgscore <span class="keyword">DESC</span>,</span><br><span class="line">	sc.c_id;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 33. 查询平均成绩大于等于85的所有学生的学号、姓名和平均成绩</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.s_id,</span><br><span class="line">	s.s_name,</span><br><span class="line">	round( <span class="built_in">avg</span>( sc.s_score ), <span class="number">2</span> ) avgscore </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s</span><br><span class="line">	<span class="keyword">JOIN</span> score sc <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> s.s_id </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	s.s_id,</span><br><span class="line">	s.s_name </span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	avgscore <span class="operator">&gt;=</span> <span class="number">85</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 34. 查询课程名称为&quot;数学&quot;，且分数低于60的学生姓名和分数</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.s_name,</span><br><span class="line">	sc.s_score </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s</span><br><span class="line">	<span class="keyword">JOIN</span> score sc <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> s.s_id</span><br><span class="line">	<span class="keyword">JOIN</span> course c <span class="keyword">ON</span> c.c_id <span class="operator">=</span> sc.c_id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	c.c_name <span class="operator">=</span> <span class="string">&#x27;数学&#x27;</span> </span><br><span class="line">	<span class="keyword">AND</span> sc.s_score <span class="operator">&lt;</span> <span class="number">60</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 35. 查询所有学生的课程及分数情况</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.s_id,</span><br><span class="line">	s.s_name,</span><br><span class="line">	c.c_name,</span><br><span class="line">	sc.s_score </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s,</span><br><span class="line">	course c,</span><br><span class="line">	score sc </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	s.s_id <span class="operator">=</span> sc.s_id </span><br><span class="line">	<span class="keyword">AND</span> sc.c_id <span class="operator">=</span> c.c_id;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 36. 查询任何一门课程成绩在70分以上的姓名、课程名称和分数</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.s_id,</span><br><span class="line">	s.s_name,</span><br><span class="line">	c.c_name,</span><br><span class="line">	sc.s_score </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s,</span><br><span class="line">	course c,</span><br><span class="line">	score sc </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	s.s_id <span class="operator">=</span> sc.s_id </span><br><span class="line">	<span class="keyword">AND</span> sc.c_id <span class="operator">=</span> c.c_id </span><br><span class="line">	<span class="keyword">AND</span> sc.s_score <span class="operator">&gt;=</span> <span class="number">70</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 37. 查询不及格的课程</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.s_id,</span><br><span class="line">	s.s_name,</span><br><span class="line">	sc.s_score,</span><br><span class="line">	c.c_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s</span><br><span class="line">	<span class="keyword">JOIN</span> score sc <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> s.s_id</span><br><span class="line">	<span class="keyword">JOIN</span> course c <span class="keyword">ON</span> c.c_id <span class="operator">=</span> sc.c_id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	sc.s_score <span class="operator">&lt;</span> <span class="number">60</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 38. 查询课程编号为01且课程成绩在80分以上的学生的学号和姓名</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.s_id,</span><br><span class="line">	s.s_name,</span><br><span class="line">	sc.s_score </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s,</span><br><span class="line">	score sc </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	s.s_id <span class="operator">=</span> sc.s_id </span><br><span class="line">	<span class="keyword">AND</span> sc.c_id <span class="operator">=</span> <span class="string">&#x27;01&#x27;</span> </span><br><span class="line">	<span class="keyword">AND</span> sc.s_score <span class="operator">&gt;=</span> <span class="number">80</span> </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	s.s_id,</span><br><span class="line">	sc.c_id <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 39. 求每门课程的学生人数</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	sc.c_id,</span><br><span class="line">	<span class="built_in">count</span>(<span class="operator">*</span>) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	score sc </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	sc.c_id;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 40. 查询选修&quot;张三&quot;老师所授课程的学生中，成绩最高的学生信息及其成绩</span></span><br><span class="line"><span class="comment">-- 最高分只有一个</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.s_id,</span><br><span class="line">	s.s_name,</span><br><span class="line">	sc.s_score,</span><br><span class="line">	c.c_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s</span><br><span class="line">	<span class="keyword">JOIN</span> score sc <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> s.s_id</span><br><span class="line">	<span class="keyword">JOIN</span> course c <span class="keyword">ON</span> c.c_id <span class="operator">=</span> sc.c_id</span><br><span class="line">	<span class="keyword">JOIN</span> teacher t <span class="keyword">ON</span> t.t_id <span class="operator">=</span> c.t_id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t.t_name <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span> </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	sc.s_score <span class="keyword">DESC</span> </span><br><span class="line">	LIMIT <span class="number">1</span>;</span><br><span class="line"><span class="comment">-- 最高分有多个</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.s_id,</span><br><span class="line">	s.s_name,</span><br><span class="line">	sc.s_score,</span><br><span class="line">	c.c_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s</span><br><span class="line">	<span class="keyword">JOIN</span> score sc <span class="keyword">ON</span> sc.s_id <span class="operator">=</span> s.s_id</span><br><span class="line">	<span class="keyword">JOIN</span> course c <span class="keyword">ON</span> c.c_id <span class="operator">=</span> sc.c_id</span><br><span class="line">	<span class="keyword">JOIN</span> teacher t <span class="keyword">ON</span> t.t_id <span class="operator">=</span> c.t_id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t.t_name <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span> </span><br><span class="line">	<span class="keyword">AND</span> sc.s_score <span class="operator">=</span> (</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		<span class="built_in">max</span>( sc.s_score ) </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		score sc,</span><br><span class="line">		course c,</span><br><span class="line">		teacher t </span><br><span class="line">	<span class="keyword">WHERE</span></span><br><span class="line">		sc.c_id <span class="operator">=</span> c.c_id </span><br><span class="line">		<span class="keyword">AND</span> c.t_id <span class="operator">=</span> t.t_id </span><br><span class="line">		<span class="keyword">AND</span> t.t_name <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span> </span><br><span class="line">	);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 41. 查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	sc.<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	score sc,(</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		c_id,</span><br><span class="line">		s_score </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		score </span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">		c_id,</span><br><span class="line">		s_score </span><br><span class="line">	<span class="keyword">HAVING</span></span><br><span class="line">		<span class="built_in">count</span>( <span class="number">1</span> )<span class="operator">&gt;</span> <span class="number">1</span> </span><br><span class="line">	) <span class="keyword">AS</span> sc2 </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	sc.c_id <span class="operator">=</span> sc2.c_id </span><br><span class="line">	<span class="keyword">AND</span> sc.s_score <span class="operator">=</span> sc2.s_score </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	sc.c_id,</span><br><span class="line">	sc.s_id,</span><br><span class="line">	sc.s_score;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 42. 查询每门功课成绩最好的前两名</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	sc.<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	score sc </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	( <span class="keyword">SELECT</span> <span class="built_in">count</span>( <span class="number">1</span> ) <span class="keyword">FROM</span> score sc2 <span class="keyword">WHERE</span> sc.c_id <span class="operator">=</span> sc2.c_id <span class="keyword">AND</span> sc2.s_score <span class="operator">&gt;</span> sc.s_score ) <span class="operator">&lt;</span> <span class="number">2</span> </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	sc.c_id,</span><br><span class="line">	sc.s_score <span class="keyword">DESC</span>;</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	sc.<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	score sc </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	sc.s_score <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> top <span class="number">2</span> sc2.s_score <span class="keyword">FROM</span> score sc2 <span class="keyword">WHERE</span> sc.c_id <span class="operator">=</span> sc2.c_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> sc2.s_score <span class="keyword">DESC</span> ) </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	sc.c_id,</span><br><span class="line">	sc.s_score <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 43. 统计每门课程的学生选修人数（超过5人的课程才统计）。</span></span><br><span class="line"><span class="comment">-- 要求输出课程号和选修人数，查询结果按人数降序排列，若人数相同，按课程号升序排列</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	sc.c_id,</span><br><span class="line">	<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">AS</span> student_num </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	score sc</span><br><span class="line">	<span class="keyword">JOIN</span> student s <span class="keyword">ON</span> s.s_id <span class="operator">=</span> sc.s_id </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	sc.c_id </span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	student_num <span class="operator">&gt;</span> <span class="number">5</span> </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	student_num <span class="keyword">DESC</span>,</span><br><span class="line">	sc.c_id <span class="keyword">ASC</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 44. 检索至少选修两门课程的学生学号</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.s_id,</span><br><span class="line">	<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">AS</span> course_num </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s</span><br><span class="line">	<span class="keyword">JOIN</span> score sc <span class="keyword">ON</span> s.s_id <span class="operator">=</span> sc.s_id </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	s.s_id </span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	<span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">&gt;=</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 45. 查询选修了全部课程的学生信息</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s.<span class="operator">*</span>,</span><br><span class="line">	<span class="built_in">count</span>(<span class="operator">*</span>) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student s</span><br><span class="line">	<span class="keyword">JOIN</span> score sc <span class="keyword">ON</span> s.s_id <span class="operator">=</span> sc.s_id </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	s.s_id </span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	<span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">&gt;=</span> <span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 46.查询各学生的年龄</span></span><br><span class="line"><span class="comment">-- 1. 按年份计算</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s_id,</span><br><span class="line">	<span class="keyword">YEAR</span> (</span><br><span class="line">	now())<span class="operator">-</span> <span class="keyword">YEAR</span> ( s_birth ) <span class="keyword">AS</span> age </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student;</span><br><span class="line"><span class="comment">-- 2. 按照出生日期计算</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	s_id,</span><br><span class="line">	DATE_FORMAT( now(), <span class="string">&#x27;%Y&#x27;</span> )<span class="operator">-</span> DATE_FORMAT( s_birth, <span class="string">&#x27;%Y&#x27;</span> )<span class="operator">-</span> ( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> DATE_FORMAT( now(), <span class="string">&#x27;%m%d&#x27;</span> )<span class="operator">&gt;</span> DATE_FORMAT( s_birth, <span class="string">&#x27;%m%d&#x27;</span> ) <span class="keyword">THEN</span> <span class="number">0</span> <span class="keyword">ELSE</span> <span class="number">1</span> <span class="keyword">END</span> ) <span class="keyword">AS</span> age </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 47.查询本周过生日的学生</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	WEEK (</span><br><span class="line">	DATE_FORMAT( NOW(), <span class="string">&#x27;%Y%m%d&#x27;</span> ))<span class="operator">+</span> <span class="number">1</span> <span class="operator">=</span> WEEK ( Sage );</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 48.查询下周过生日的学生</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	WEEK (</span><br><span class="line">	DATE_FORMAT( NOW(), <span class="string">&#x27;%Y%m%d&#x27;</span> ))<span class="operator">+</span> <span class="number">1</span> <span class="operator">=</span> WEEK ( Sage );</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 49.查询本月过生日的学生</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	<span class="keyword">MONTH</span> (</span><br><span class="line">	DATE_FORMAT( NOW(), <span class="string">&#x27;%Y%m%d&#x27;</span> ))<span class="operator">+</span> <span class="number">1</span> <span class="operator">=</span> <span class="keyword">MONTH</span> ( Sage );</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 50. 查询下月过生日的学生</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	student </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	<span class="keyword">MONTH</span> (</span><br><span class="line">	DATE_FORMAT( NOW(), <span class="string">&#x27;%Y%m%d&#x27;</span> ))<span class="operator">+</span> <span class="number">1</span> <span class="operator">=</span> <span class="keyword">MONTH</span> ( Sage );</span><br></pre></td></tr></table></figure>









<h1 id="索引优化分析"><a href="#索引优化分析" class="headerlink" title="索引优化分析"></a>索引优化分析</h1><h2 id="针对的问题及其原因"><a href="#针对的问题及其原因" class="headerlink" title="针对的问题及其原因"></a>针对的问题及其原因</h2><p>针对问题：<strong>性能下降SQL慢、执行时间长、等待时间长。</strong></p>
<p><strong>问题原因</strong></p>
<ol>
<li><p>查询语句写的不好。</p>
</li>
<li><p>索引失效。（索引建立，但没有使用到）</p>
</li>
<li><p>关联太多的 JOIN（设计的缺陷或不得已的需求）。</p>
</li>
<li><p>服务器调优及各个参数设置（缓冲、线程数量等）。</p>
</li>
</ol>
<p>解决：先top 命令，查看磁盘空间。再复现问题，考虑解决方式。</p>
<p>建立索引示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- user表的name字段，【idx 索引 user表名 name字段名】</span></span><br><span class="line"><span class="comment">-- 单值索引</span></span><br><span class="line"><span class="keyword">create</span> index idx_user_name <span class="keyword">on</span> <span class="keyword">user</span>(name);</span><br><span class="line"><span class="comment">-- 多值索引</span></span><br><span class="line"><span class="keyword">create</span> index idx_user_nameEmail <span class="keyword">on</span> <span class="keyword">user</span>(name,email);</span><br></pre></td></tr></table></figure>

<h2 id="通用的JOIN查询-1"><a href="#通用的JOIN查询-1" class="headerlink" title="通用的JOIN查询"></a>通用的JOIN查询</h2><h3 id="SQL顺序-1"><a href="#SQL顺序-1" class="headerlink" title="SQL顺序"></a>SQL顺序</h3><p>SQL书写顺序：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line"><span class="keyword">JOIN</span> <span class="keyword">ON</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line"><span class="keyword">DISTINCT</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">LIMIT</span><br></pre></td></tr></table></figure>

<p>SQL执行顺序：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span></span><br><span class="line"><span class="keyword">JOIN</span> <span class="keyword">ON</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">DISTINCT</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">LIMIT</span><br></pre></td></tr></table></figure>

<h3 id="7种JOIN理论-1"><a href="#7种JOIN理论-1" class="headerlink" title="7种JOIN理论"></a>7种JOIN理论</h3><p>注意：<strong>MySQL不支持最下面JOIN理论</strong></p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006172123361.png" alt="image-20221006172123361"></p>
<p>创建测试表：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE db_join;</span><br><span class="line">USE db_join;</span><br><span class="line">CREATE TABLE tbl_dept (</span><br><span class="line">	id INT ( 11 ) NOT NULL auto_increment,</span><br><span class="line">	deptName VARCHAR ( 30 ) DEFAULT NULL,</span><br><span class="line">	locAddr VARCHAR ( 40 ) DEFAULT NULL,</span><br><span class="line">	PRIMARY KEY ( id ) </span><br><span class="line">) ENGINE = INNODB auto_increment = 1 DEFAULT charset = utf8;</span><br><span class="line">CREATE TABLE tbl_emp (</span><br><span class="line">	id INT ( 11 ) NOT NULL auto_increment,</span><br><span class="line">	NAME VARCHAR ( 20 ) DEFAULT NULL,</span><br><span class="line">	deptId INT ( 11 ) DEFAULT NULL,</span><br><span class="line">	PRIMARY KEY ( id ),</span><br><span class="line">	KEY fk_dept_id ( deptId ) #constraint fk_dept_id foreign key(deptId) references tbl_dept(id)</span><br><span class="line">	</span><br><span class="line">) ENGINE = INNODB auto_increment = 1 DEFAULT charset = utf8;</span><br><span class="line"></span><br><span class="line">insert into tbl_dept(deptName,locAddr) values(&quot;RD&quot;,&quot;GanSu&quot;);</span><br><span class="line">insert into tbl_dept(deptName,locAddr) values(&quot;HR&quot;,&quot;XiAN&quot;);</span><br><span class="line">insert into tbl_dept(deptName,locAddr) values(&quot;MK&quot;,&quot;BeiJing&quot;);</span><br><span class="line">insert into tbl_dept(deptName,locAddr) values(&quot;MIS&quot;,&quot;ShangHai&quot;);</span><br><span class="line">insert into tbl_dept(deptName,locAddr) values(&quot;FD&quot;,&quot;ShenZhen&quot;);</span><br><span class="line"></span><br><span class="line">insert into tbl_emp(name,deptId) values(&quot;E1&quot;,1);</span><br><span class="line">insert into tbl_emp(name,deptId) values(&quot;E2&quot;,1);</span><br><span class="line">insert into tbl_emp(name,deptId) values(&quot;E3&quot;,1);</span><br><span class="line"></span><br><span class="line">insert into tbl_emp(name,deptId) values(&quot;EA&quot;,2);</span><br><span class="line">insert into tbl_emp(name,deptId) values(&quot;EB&quot;,2);</span><br><span class="line"></span><br><span class="line">insert into tbl_emp(name,deptId) values(&quot;W1&quot;,3);</span><br><span class="line">insert into tbl_emp(name,deptId) values(&quot;W2&quot;,4);</span><br><span class="line">insert into tbl_emp(name,deptId) values(&quot;W3&quot;,51);</span><br></pre></td></tr></table></figure>

<p>查询表数据：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use db_join;</span><br><span class="line">Reading table information for completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; select * from tbl_emp;</span><br><span class="line">+----+------+--------+</span><br><span class="line">| id | NAME | deptId |</span><br><span class="line">+----+------+--------+</span><br><span class="line">|  1 | E1   |      1 |</span><br><span class="line">|  2 | E2   |      1 |</span><br><span class="line">|  3 | E3   |      1 |</span><br><span class="line">|  4 | EA   |      2 |</span><br><span class="line">|  5 | EB   |      2 |</span><br><span class="line">|  6 | W1   |      3 |</span><br><span class="line">|  7 | W2   |      4 |</span><br><span class="line">|  8 | W3   |     51 |</span><br><span class="line">+----+------+--------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br><span class="line">mysql&gt; select * from tbl_dept;</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| id | deptName | locAddr  |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">|  1 | RD       | GanSu    |</span><br><span class="line">|  2 | HR       | XiAN     |</span><br><span class="line">|  3 | MK       | BeiJing  |</span><br><span class="line">|  4 | MIS      | ShangHai |</span><br><span class="line">|  5 | FD       | ShenZhen |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="情况一：两个表的交集数据"><a href="#情况一：两个表的交集数据" class="headerlink" title="情况一：两个表的交集数据"></a>情况一：两个表的交集数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from tbl_emp e inner join tbl_dept d on e.deptId = d.id;</span><br><span class="line">+----+------+--------+----+----------+----------+</span><br><span class="line">| id | NAME | deptId | id | deptName | locAddr  |</span><br><span class="line">+----+------+--------+----+----------+----------+</span><br><span class="line">|  1 | E1   |      1 |  1 | RD       | GanSu    |</span><br><span class="line">|  2 | E2   |      1 |  1 | RD       | GanSu    |</span><br><span class="line">|  3 | E3   |      1 |  1 | RD       | GanSu    |</span><br><span class="line">|  4 | EA   |      2 |  2 | HR       | XiAN     |</span><br><span class="line">|  5 | EB   |      2 |  2 | HR       | XiAN     |</span><br><span class="line">|  6 | W1   |      3 |  3 | MK       | BeiJing  |</span><br><span class="line">|  7 | W2   |      4 |  4 | MIS      | ShangHai |</span><br><span class="line">+----+------+--------+----+----------+----------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="情况二：以表-tbl-emp-为主表关联-tbl-dept"><a href="#情况二：以表-tbl-emp-为主表关联-tbl-dept" class="headerlink" title="情况二：以表 tbl_emp 为主表关联 tbl_dept"></a>情况二：以表 tbl_emp 为主表关联 tbl_dept</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from tbl_emp e left join tbl_dept d on e.deptId = d.id;</span><br><span class="line">+----+------+--------+------+----------+----------+</span><br><span class="line">| id | NAME | deptId | id   | deptName | locAddr  |</span><br><span class="line">+----+------+--------+------+----------+----------+</span><br><span class="line">|  1 | E1   |      1 |    1 | RD       | GanSu    |</span><br><span class="line">|  2 | E2   |      1 |    1 | RD       | GanSu    |</span><br><span class="line">|  3 | E3   |      1 |    1 | RD       | GanSu    |</span><br><span class="line">|  4 | EA   |      2 |    2 | HR       | XiAN     |</span><br><span class="line">|  5 | EB   |      2 |    2 | HR       | XiAN     |</span><br><span class="line">|  6 | W1   |      3 |    3 | MK       | BeiJing  |</span><br><span class="line">|  7 | W2   |      4 |    4 | MIS      | ShangHai |</span><br><span class="line">|  8 | W3   |     51 | NULL | NULL     | NULL     |</span><br><span class="line">+----+------+--------+------+----------+----------+</span><br><span class="line">8 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>

<h4 id="情况三：以-tbl-dept为主表关联-tbl-emp表"><a href="#情况三：以-tbl-dept为主表关联-tbl-emp表" class="headerlink" title="情况三：以 tbl_dept为主表关联 tbl_emp表"></a>情况三：以 tbl_dept为主表关联 tbl_emp表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from tbl_emp e right join tbl_dept d on e.deptId = d.id;</span><br><span class="line">+------+------+--------+----+----------+----------+</span><br><span class="line">| id   | NAME | deptId | id | deptName | locAddr  |</span><br><span class="line">+------+------+--------+----+----------+----------+</span><br><span class="line">|    1 | E1   |      1 |  1 | RD       | GanSu    |</span><br><span class="line">|    2 | E2   |      1 |  1 | RD       | GanSu    |</span><br><span class="line">|    3 | E3   |      1 |  1 | RD       | GanSu    |</span><br><span class="line">|    4 | EA   |      2 |  2 | HR       | XiAN     |</span><br><span class="line">|    5 | EB   |      2 |  2 | HR       | XiAN     |</span><br><span class="line">|    6 | W1   |      3 |  3 | MK       | BeiJing  |</span><br><span class="line">|    7 | W2   |      4 |  4 | MIS      | ShangHai |</span><br><span class="line">| NULL | NULL |   NULL |  5 | FD       | ShenZhen |</span><br><span class="line">+------+------+--------+----+----------+----------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="情况四：表-tbl-emp-特有的数据"><a href="#情况四：表-tbl-emp-特有的数据" class="headerlink" title="情况四：表 tbl_emp 特有的数据"></a>情况四：表 tbl_emp 特有的数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from tbl_emp e left join tbl_dept d on e.deptId = d.id where d.id is null;</span><br><span class="line">+----+------+--------+------+----------+---------+</span><br><span class="line">| id | NAME | deptId | id   | deptName | locAddr |</span><br><span class="line">+----+------+--------+------+----------+---------+</span><br><span class="line">|  8 | W3   |     51 | NULL | NULL     | NULL    |</span><br><span class="line">+----+------+--------+------+----------+---------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="情况五：表-tbl-dept-特有的数据"><a href="#情况五：表-tbl-dept-特有的数据" class="headerlink" title="情况五：表 tbl_dept 特有的数据"></a>情况五：表 tbl_dept 特有的数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from tbl_emp e right join tbl_dept d on e.deptId = d.id where e.deptId is null;</span><br><span class="line">+------+------+--------+----+----------+----------+</span><br><span class="line">| id   | NAME | deptId | id | deptName | locAddr  |</span><br><span class="line">+------+------+--------+----+----------+----------+</span><br><span class="line">| NULL | NULL |   NULL |  5 | FD       | ShenZhen |</span><br><span class="line">+------+------+--------+----+----------+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="情况六：两张表都有的数据"><a href="#情况六：两张表都有的数据" class="headerlink" title="情况六：两张表都有的数据"></a>情况六：两张表都有的数据</h4><p>​		由于MySQL不支持 FULL JOIN，此处使用 UNION 代替。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from tbl_emp e left join tbl_dept d on e.deptId = d.id</span><br><span class="line">    -&gt; union</span><br><span class="line">    -&gt; select * from tbl_emp e right join tbl_dept d on e.deptId = d.id;</span><br><span class="line">+------+------+--------+------+----------+----------+</span><br><span class="line">| id   | NAME | deptId | id   | deptName | locAddr  |</span><br><span class="line">+------+------+--------+------+----------+----------+</span><br><span class="line">|    1 | E1   |      1 |    1 | RD       | GanSu    |</span><br><span class="line">|    2 | E2   |      1 |    1 | RD       | GanSu    |</span><br><span class="line">|    3 | E3   |      1 |    1 | RD       | GanSu    |</span><br><span class="line">|    4 | EA   |      2 |    2 | HR       | XiAN     |</span><br><span class="line">|    5 | EB   |      2 |    2 | HR       | XiAN     |</span><br><span class="line">|    6 | W1   |      3 |    3 | MK       | BeiJing  |</span><br><span class="line">|    7 | W2   |      4 |    4 | MIS      | ShangHai |</span><br><span class="line">|    8 | W3   |     51 | NULL | NULL     | NULL     |</span><br><span class="line">| NULL | NULL |   NULL |    5 | FD       | ShenZhen |</span><br><span class="line">+------+------+--------+------+----------+----------+</span><br><span class="line">9 rows in set (0.01 sec)	</span><br></pre></td></tr></table></figure>

<h4 id="情况七：两张表特有的数据"><a href="#情况七：两张表特有的数据" class="headerlink" title="情况七：两张表特有的数据"></a>情况七：两张表特有的数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from tbl_emp e left join tbl_dept d on e.deptId = d.id where d.id is null</span><br><span class="line">    -&gt; union</span><br><span class="line">    -&gt; select * from tbl_emp e right join tbl_dept d on e.deptId = d.id where e.id is null;</span><br><span class="line">+------+------+--------+------+----------+----------+</span><br><span class="line">| id   | NAME | deptId | id   | deptName | locAddr  |</span><br><span class="line">+------+------+--------+------+----------+----------+</span><br><span class="line">|    8 | W3   |     51 | NULL | NULL     | NULL     |</span><br><span class="line">| NULL | NULL |   NULL |    5 | FD       | ShenZhen |</span><br><span class="line">+------+------+--------+------+----------+----------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><h3 id="索引定义"><a href="#索引定义" class="headerlink" title="索引定义"></a>索引定义</h3><p><strong>查找和排序都要用到索引。</strong>【查找 + 排序】</p>
<p>MySQL官方对索引的定义为：索引（Index）帮助MySQL高效获取数据的数据结构。</p>
<p>索引的本质：索引是数据结构。可以简单理解为 “排好序的快速查找数据结构”。</p>
<p>​		一般来说索引本身也很大，不可能全部存储在内存中，因此索引往往以索引文件的形式存储的磁盘上。我们平常所说的索引，如果没有特别指明，<strong>都是指B树</strong>（多路搜索树，并不一定是二叉的）结构组织的索引。</p>
<p>​		复合索引，前缀索引，唯一索引默认都是使用B+树索引，统称索引。当然，除了B+树这种类型的索引，其中聚集索引、次要索引、覆盖索引，统称索引，当然，除了B+树这种类型的索引之外，还有哈稀索引(hash index)等。</p>
<p>​		在数据之外，数据库系统还维护着满足特定查找算法的数据结构，这些数据结构以某种方式引用（指向）数据，这样就可以在这些数据结构上实现高级查找算法。这种数据结构，就是索引。下图就是一种可能的索引方式示例（BTREE）：</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006182044473.png" alt="image-20221006182044473"></p>
<h3 id="索引失效"><a href="#索引失效" class="headerlink" title="索引失效"></a>索引失效</h3><p>对数据的删除，没有及时修改索引，原本索引指向的位置，数据不会改变</p>
<h3 id="索引优势"><a href="#索引优势" class="headerlink" title="索引优势"></a>索引优势</h3><ol>
<li><p>提高数据的检索效率，降低数据库的 IO 成本。</p>
</li>
<li><p>通过索引对数据进行排序，降低数据的排序成本，降低了 CPU 的消耗。</p>
</li>
</ol>
<h3 id="索引劣势"><a href="#索引劣势" class="headerlink" title="索引劣势"></a>索引劣势</h3><ol>
<li>实际上索引也是一张表，该表保存了主键与索引字段，并指向实体表的记录，所以索引列也是要占用空间的。</li>
<li>虽然索引大大提高了查询速度，同时却会降低更新表的速度，如对表进行INSERT、UPDATE和DELETE。因为更新表时，MySQL不仅要保存数据，还要保存一下索引文件每次更新添加了索引列的字段，都会调整因为更新所带来的键值变化后的索引信息。</li>
<li>索引只是提高效率的一个因素，如果MySQL有大数据量的表，就需要花时间研究建立最优秀的索引，或优化查询语句。</li>
<li>索引是不断优化和调整的，根据用户查询的信息不断调整。</li>
</ol>
<h3 id="索引分类"><a href="#索引分类" class="headerlink" title="索引分类"></a>索引分类</h3><h4 id="单值索引"><a href="#单值索引" class="headerlink" title="单值索引"></a>单值索引</h4><p>​		一个索引只包含单个列，一个表可以有对个单列索引。</p>
<h4 id="唯一索引"><a href="#唯一索引" class="headerlink" title="唯一索引"></a>唯一索引</h4><p>​		索引列的值必须唯一，但允许有空值。</p>
<h4 id="复合索引"><a href="#复合索引" class="headerlink" title="复合索引"></a>复合索引</h4><p>​		一个索引包含多个列。</p>
<h3 id="基本语法-1"><a href="#基本语法-1" class="headerlink" title="基本语法"></a>基本语法</h3><h4 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create [unique] index indexName on tableName(columnName(length));</span><br></pre></td></tr></table></figure>

<p>​		如果是 char，varchar 类型，length 长度可以小于字段的实际长度。如果是 blob 和 text 必须指定 length。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter tableName add [unique] index indexName on (columnName(length));</span><br></pre></td></tr></table></figure>

<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop index indexName on tableName;</span><br></pre></td></tr></table></figure>

<h4 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show index from tableName;</span><br></pre></td></tr></table></figure>

<h4 id="使用alter命令"><a href="#使用alter命令" class="headerlink" title="使用alter命令"></a>使用alter命令</h4><p>有四种方式来添加数据表的索引：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 该语句添加一个主键，这意味着索引值必须是唯一的， 且不能为NULL</span><br><span class="line">ALTER TABLE tbl_name ADD PRIMARY KEY (column(length)) </span><br><span class="line"># 这条语句创建索引的值必须是唯一的(除了NULL外，NULL可能会出现多次)</span><br><span class="line">ALTER TABLE tbl name ADD UNIQUE index_name (column(length)) </span><br><span class="line"># 添加普通索引，索引值可出现多次</span><br><span class="line">ALTER TABLE tbl_name ADD INDEX index_name (column(length)) </span><br><span class="line"># 该语句指定了索引为FULLTEXT,用于全文索引</span><br><span class="line">ALTER TABLE tbl _name ADD FULLTEXT index_name (column(length)) </span><br></pre></td></tr></table></figure>

<h3 id="MySQL-索引结构"><a href="#MySQL-索引结构" class="headerlink" title="MySQL 索引结构"></a>MySQL 索引结构</h3><ol>
<li>BTree索引</li>
<li>Hash索引</li>
<li>full-text全文索引</li>
<li>R-Tree索引</li>
</ol>
<h3 id="BTree检索原理"><a href="#BTree检索原理" class="headerlink" title="BTree检索原理"></a><strong>BTree检索原理</strong></h3><p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006182956412.png" alt="image-20221006182956412"></p>
<p><strong>1.</strong>   <strong>初始化介绍</strong></p>
<p>​		一颗b+树，浅蓝色的块我们称之为一个磁盘块，可以看到每个磁盘块包含几个数据项(深蓝色所示)和指针(黄色所示)，如磁盘块1包含数据项17和35，包含指针P1、P2、P3，P1表示小于17的磁盘块，P2表示在17和35之间的磁盘块，P3表示大于35的磁盘块。</p>
<p>​		真实的数据存在于叶子节点即3、5、9、10、13、15、28、29、36、60、75、79、90、99。非叶子节点不存储真实的数据，只存储指引搜索方向的数据项，如17、 35并不真实存在于数据表中。</p>
<p><strong>2.</strong>   <strong>查找过程</strong></p>
<p>​		如果要查找数据项29，那么首先会把磁盘块1由磁盘加载到内存，此时发生一次IO, 在内存中用二分查找确定29在17和35之间，锁定磁盘块1的P2指针，内存时间因为非常短（相比磁盘的IO）可以忽略不计，通过磁盘块1的P2指针的磁盘地址，把磁盘块3由磁盘加载到内存，发生第二次IO, 29 在 26 和 30 之间， 锁定磁盘块3的 P2 指针，通过指针加载磁盘块8到内存，发生第三次IO， 同时内存中做二分查找找到29，结束查询，总计三次IO。</p>
<p>​		真实的情况是，3层的b+树可以表示上百万的数据，如果上百万的数据查找只需要三次IO，性能提高将是巨大的，如果没有索引，每个数据项都要发生一次IO,那么总共需要百万次的IO，显然成本非常非常高。</p>
<h3 id="需要创建索引的情况"><a href="#需要创建索引的情况" class="headerlink" title="需要创建索引的情况"></a>需要创建索引的情况</h3><ol>
<li><p>主键自动建立唯一索引。</p>
</li>
<li><p>频繁作为查询条件的字段应该创建索引。</p>
</li>
<li><p>查询中与其它表关联的字段，外键关系建立索引。</p>
</li>
<li><p>频繁更新的字段不适合创建索引。因为每次更新不仅更新记录还会更新索引。</p>
</li>
<li><p>where条件里用不到的字段不创建索引。</p>
</li>
<li><p>单键&#x2F;组合索引的选择问题，(在高并发下倾向创建组合索引)。</p>
</li>
<li><p>查询中排序的字段，排序字段若通过索引去访问将大大提高排序速度。</p>
</li>
<li><p>查询中统计或者分组字段。</p>
</li>
</ol>
<h3 id="不需要创建索引的情况"><a href="#不需要创建索引的情况" class="headerlink" title="不需要创建索引的情况"></a>不需要创建索引的情况</h3><ol>
<li><p><strong>表记录太少，优化器会自动优化。</strong>（至少3百万）</p>
</li>
<li><p><strong>经常增删改的表。</strong>（原因：提高了查询速度，同时却会降低更新表的速度，如对表进行INSERT、UPDATE和DELETE。因为更新表时，MySQL不仅要保存数据，还要保存一下索引文件）。</p>
</li>
<li><p><strong>数据重复且分布平均的表字段，因此应该只为最经常查询和最经常排序的数据列建立索引</strong>。</p>
<p> 注意，如果某个数据列包含许多重复的内容，为它建立索引就没有太大的实际效果。假如一个表有10万行记录，有一个字段A只有T和F两种值，且每个值的分布概率大约为50%，那么对这种表A字段建索引一般不会提高数据库的查询速度。索引的选择性是指索引列中不同值的数目与表中记录数的比。如果一个表中有2000条记录，表索引列有1980个不同的值，那么这个索引的选择性就是1980&#x2F;2000&#x3D;0.99。一个索引的选择性越接近于1,这个索引的效率就越高。</p>
</li>
</ol>
<h2 id="性能分析"><a href="#性能分析" class="headerlink" title="性能分析"></a>性能分析</h2><h3 id="MySQL-Query-Optimizer（查询优化器）"><a href="#MySQL-Query-Optimizer（查询优化器）" class="headerlink" title="MySQL  Query  Optimizer（查询优化器）"></a>MySQL  Query  Optimizer（查询优化器）</h3><p>​		MySQL中有专门负责优化 <strong>SELECT</strong> 语句的优化器模块，主要功能：通过计算分析系统中收集到的统计信息，为客户端请求的 Query 提供它认为最优的执行计划（机器认为最优的数据检索方式，但不见得是DBA认为是最优的，这部分最耗费时间）。</p>
<p>​		当客户端向 MySQL 请求一条Query，命令解析器模块完成请求分类，区别出是 SELECT 并转发给 MySQL Query Optimizer时，MySQL Query Optimizer首先会对整条Query进行优化，处理掉一些常量表达式的预算，直接换算成常量值。并对Query中的查询条件进行简化和转换，如去掉一些无用或显而易见的条件、结构调整等。然后分析Query中的Hint 信息（如果有），看显示 Hint 信息是否可以完全确定该Query的执行计划。如果没有 Hint 或 Hint 信息还不足以完全确定执行计划，则会读取所涉及对象的统计信息，根据 Query 进行写相应的计算分析，然后再得出最后的执行计划。</p>
<h3 id="MySQL常见瓶颈"><a href="#MySQL常见瓶颈" class="headerlink" title="MySQL常见瓶颈"></a>MySQL常见瓶颈</h3><ol>
<li><p>CPU：CPU在饱和的时候，一般发生在数据装入内存或从磁盘上读取数据的时候。</p>
</li>
<li><p>IO：磁盘 I&#x2F;O 瓶颈发生在装入数据远大于内存容量的时候。</p>
</li>
<li><p>服务器硬件的性能瓶颈：top，free，iostat 和 vmstat 来查看系统的性能状态。</p>
</li>
</ol>
<h3 id="Explain（查看执行计划）"><a href="#Explain（查看执行计划）" class="headerlink" title="Explain（查看执行计划）"></a>Explain（查看执行计划）</h3><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><p>​		使用 EXPLAIN 关键字可以模拟优化器执行SQL查询语句，从而知道 MySQL 是如何处理 SQL 语句的。分析你的查询语句或是表结构的性能瓶颈。</p>
<h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><ol>
<li><p>表的读取顺序。</p>
</li>
<li><p>数据读取操作的操作类型。</p>
</li>
<li><p>哪些索引可以使用。</p>
</li>
<li><p>哪些索引被实际使用。</p>
</li>
<li><p>表之间的引用。</p>
</li>
<li><p>每张表有多少行被优化器查询。</p>
</li>
</ol>
<p><strong>语法：explain + Sql 语句</strong></p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006184029571.png" alt="image-20221006184029571"></p>
<h3 id="explain-各字段说明"><a href="#explain-各字段说明" class="headerlink" title="explain 各字段说明"></a>explain 各字段说明</h3><h4 id="id"><a href="#id" class="headerlink" title="id"></a>id</h4><p>​		select 查询的序列号，包含一组数字，表示查询中执行select子句或操作表的顺序。</p>
<ol>
<li>id相同，执行顺序由上至下。</li>
<li>id不同，如果是子查询，id的序号会递增，id值越大优先级越高，越先被执行冒。</li>
<li>id相同类型不同，同时存在。</li>
</ol>
<p>示例：id相同，执行顺序由上向下。</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006184319151.png" alt="image-20221006184319151"></p>
<p>示例：子查询，id越大，优先级越高，越优先执行。</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006184338549.png" alt="image-20221006184338549"></p>
<p>示例：通过 id 分组，同一组中，由上向下执行，不同组中id越大，越先执行。</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006184523873.png" alt="image-20221006184523873"></p>
<p>derived2 表示衍生的ID为2的虚表。</p>
<h4 id="select-type"><a href="#select-type" class="headerlink" title="select_type"></a>select_type</h4><p>查询的类型：主要用来区分普通查询、联合查询、子查询等复杂查询。</p>
<p>id     select_type</p>
<p>1         SIMPLE</p>
<p>2         PRIMARY</p>
<p>3         SUBQUERY</p>
<p>4         DERIVED</p>
<p>5         UNION</p>
<p>6         UNION RESULT</p>
<p><strong>SIMPLE</strong>：简单的select查询，查询中不包含子查询或者UNION。</p>
<p><strong>PRIMARY</strong>：查询中若包含任何复杂的子部分，最外层查询则被标记为PRIMARY。</p>
<p><strong>SUBQUERY</strong>：在 SELECT 或 WHERE 列表中包含了子查询。</p>
<p><strong>DERIVED</strong>： <strong>FROM列表中包含的子查询被标记为DERIVED衍生</strong>，MySQL会递归执行这些子查询，把结果放在临时表里。</p>
<p><strong>UNION</strong>：若第二个SELECT出现在UNION之后，则被标记为UNION。若UNION包含在FROM子句的子查询中，外层</p>
<p>​				SELECT将被标记为：DERIVED。</p>
<p><strong>UNION RESULT</strong>：从UNION表获取结果的SELECT。</p>
<p>示例：UNION</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006185930088.png" alt="image-20221006185930088"></p>
<h4 id="table"><a href="#table" class="headerlink" title="table"></a>table</h4><p>​		显示这一行的数据是关于哪一张表的。</p>
<h4 id="type"><a href="#type" class="headerlink" title="type"></a>type</h4><p>访问类型的排列。</p>
<p>主要有：<strong>ALL、index、range、ref、eq_ref、const，system、NULL。</strong></p>
<p>从最好到最差依次为：<strong>system &gt; const &gt; eq_ref &gt; ref &gt; range &gt; index &gt; ALL。</strong></p>
<p>type显示的是访问类型，是较为重要的一个指标，结果值从最好到最坏依次是：</p>
<p>system&gt;const&gt;eq_ref&gt;ref&gt;flltext&gt;ref_or_null&gt;index_merge&gt;unique_subquery&gt;index_subquery&gt;range&gt;index&gt;ALL</p>
<p><strong>system &gt; const &gt; eq_ref &gt; ref &gt; range &gt; index &gt; ALL。</strong></p>
<p>一般来说，得保证查询至少达到range级别，最好能达到 ref。</p>
<p><strong>1.</strong>   <strong>system</strong></p>
<p>表只有一行记录（等于系统表），这是 const 类型的特列，平时不会出现，这个也可以忽略不计。</p>
<p><strong>2.</strong>   <strong>const</strong></p>
<p>表示通过索引一次就找到了，const 用于比较 <strong>primary key 或者 unique 索引</strong>。因为只匹配一行数据，所以很快。如将主键置于 where 列表中，MySQL就能将该查询转换为一个常量。</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006190248776.png" alt="image-20221006190248776"></p>
<p><strong>3.</strong>   <strong>eq_ref</strong></p>
<p>唯一性索引扫描，对于每个<strong>索引键</strong>，表中只有一条记录与之匹配。常见于主键或唯一索引扫描。</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006190319449.png" alt="image-20221006190319449"></p>
<p><strong>4.</strong>   <strong>ref</strong></p>
<p>非唯一性索引扫描，返回匹配某个单独值的所有行。</p>
<p>本质上也是一种索引访问，它返回所有匹配某个单独值的行，然而它可能会找到多个符合条件的行，所以它应该属于查找和扫描的混合体。</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006190406575.png" alt="image-20221006190406575"></p>
<p><strong>5.</strong>   <strong>range</strong></p>
<p>只检索给定范围的行，使用一个索引来选择行。key列显示使用了哪个索引。一般就是在你的where语句中出现了between、&lt;、&gt;、in等的查询。这种范围扫描索引扫描比全表扫描要好，因为它只需要开始于索引的某一点，而结束语另一点，不用扫描全部索引。</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006190614716.png" alt="image-20221006190614716"></p>
<p><strong>6.</strong>   <strong>index</strong></p>
<p>Full Index Scan<strong>，index 与 ALL 区别为 index 类型只遍历索引树。</strong>这通常比ALL快，因为索引文件通常比数据文件小。也就是说虽然 all 和 Index 都是读全表，但 index 是从索引中读取的，而 all 是从硬盘中读的。</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006190648292.png" alt="image-20221006190648292"></p>
<p><strong>7.</strong>   <strong>all</strong></p>
<p><strong>Full Table Scan，将遍历全表以找到匹配的行。</strong></p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006190755759.png" alt="image-20221006190755759"></p>
<p><strong>备注：一般来说，得保证查询至少达到range级别，最好能达到ref。</strong></p>
<h4 id="possible-keys"><a href="#possible-keys" class="headerlink" title="possible_keys"></a>possible_keys</h4><ol>
<li>显示可能应用在这张表中的索引，一个或多个。</li>
<li>查询涉及到的字段若存在索引，则该索引将被列出，但不一定被查询实际使用。</li>
</ol>
<h4 id="key"><a href="#key" class="headerlink" title="key"></a>key</h4><ol>
<li><p>实际使用的索引。如果为 NULL，则没有使用索引。</p>
</li>
<li><p>查询中若使用了覆盖索引，则该索引仅出现在 key 列表中。</p>
</li>
</ol>
<p><strong>覆盖索引：</strong>建立的索引的个数顺序和查询的字段一致，就会通过索引去查。</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006190924207.png" alt="image-20221006190924207"></p>
<h4 id="ken-len"><a href="#ken-len" class="headerlink" title="ken_len"></a>ken_len</h4><ol>
<li><p>表示索引中使用的字节数，可通过该列计算查询中使用的索引的长度。在不损失精确性的情况下，长度越短越好。</p>
</li>
<li><p>key_ len 显示的值为索引字段的最大可能长度，并非实际使用长度，即 key_ len 是根据表定义计算而得，不是通过表</p>
</li>
</ol>
<p>​		内检索出的。</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006191031290.png" alt="image-20221006191031290"></p>
<h4 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h4><p>显示索引的哪一列被使用了，如果可能的话，是一个常数。哪些列或常量被用于查找索引列上的值。</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006191129061.png" alt="image-20221006191129061"></p>
<p>对于 t1 表，key_len &#x3D; 26，索引 idx_col1_col2 被充分使用，t1.col2 &#x3D; ‘ac’ 表示匹配到了一个常量。</p>
<h4 id="rows"><a href="#rows" class="headerlink" title="rows"></a>rows</h4><p><strong>根据表统计信息及索引选用情况，大致估算出找到所需的记录所需要读取的行数。</strong></p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006191202220.png" alt="image-20221006191202220"></p>
<h4 id="Extra"><a href="#Extra" class="headerlink" title="Extra"></a>Extra</h4><p>包含不适合在其他列中显示但十分重要的额外信息。</p>
<h5 id="Using-filesort（文件内排序）"><a href="#Using-filesort（文件内排序）" class="headerlink" title="Using filesort（文件内排序）"></a>Using filesort（文件内排序）</h5><p>​		说明 mysq| 会对数据使用一个外部的索引排序，而不是按照表内的索引顺序进行读取。MySQL中无法利用索引完的排序操作称为”文件排序”。出现 Using filesort 说明性能受到较大影响，应该尽量避免。</p>
<p>查询用到，排序没有用到<strong>（索引 idx_col1_col2_col3 中 col2没有用到，中断了）</strong></p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006191427766.png" alt="image-20221006191427766"></p>
<h5 id="Using-temporary"><a href="#Using-temporary" class="headerlink" title="Using temporary"></a>Using temporary</h5><p>​		使了用<strong>临时表</strong>保存中间结果，MySQL在对查询结果排序时使用临时表。常见于排序 order by 和分组查询 group by。<strong>（group by 尽量和索引的个数和顺序一致，不算查询条件中的字段）</strong></p>
<p><strong>（order by 尽量和索引的个数和顺序一致，可以包含查询条件的字段）</strong></p>
<p><strong>尽可能避免 using filesort 和 using temporary。</strong></p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006191619424.png" alt="image-20221006191619424"></p>
<p><strong>分组字段 col1和 col2 应该和索引的个数顺序一致，不应中断。</strong></p>
<h5 id="Using-index"><a href="#Using-index" class="headerlink" title="Using index"></a>Using index</h5><p>表示相应的 select 操作中使用了**覆盖索引(Covering Index)**，避免访问了表的数据行，效率不错。</p>
<p>如果同时出现 Using where，表明索引被用来执行索引键值的查找。</p>
<p>如果没有同时出现Using where，<strong>表明索引用来读取数据而非执行查找动作。</strong></p>
<p><strong>覆盖索引(Covering Index)。</strong></p>
<p>覆盖索引(Covering Index)，也说为索引覆盖。</p>
<p>理解方式一：</p>
<p>​		就是 select 的数据列只用从索引中就能够取得，不必读取数据行，MySQL可以利用索引返回 select 列表中的字段，而不必根据索引再次读取数据文件，换句话说查询列要被所建的索引覆盖。</p>
<p>理解方式二：</p>
<p>​		索引是高效找到行的一个方法，但是一般数据库也能使用索引找到一个列的数据，因此它不必读取整个行。毕竟索引叶子节点存储了它们索引的数据；当能通过读取索引就可以得到想要的数据，那就不需要读取行了。一个索引包含了(或覆盖了)满足查询结果的数据就叫做覆盖索引。</p>
<p>注意：如果要使用覆盖索引，一定要注意select列表中只取出需要的列，不可 select *，因为如果将所有字段一起做索引会导致索引文件过大，查询性能下降。</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006192057410.png" alt="image-20221006192057410"></p>
<h5 id="Using-where"><a href="#Using-where" class="headerlink" title="Using where"></a>Using where</h5><p>​		表明使用了where过滤。</p>
<h5 id="Using-join-buffer"><a href="#Using-join-buffer" class="headerlink" title="Using join buffer"></a>Using join buffer</h5><p>​		使用了连接缓存。</p>
<h5 id="Impossible-where"><a href="#Impossible-where" class="headerlink" title="Impossible where"></a>Impossible where</h5><p>​		where子句的值总是false，不能用来获取任何元组。</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006192403646.png" alt="image-20221006192403646"></p>
<h5 id="select-tables-optimized-away"><a href="#select-tables-optimized-away" class="headerlink" title="select tables optimized away"></a>select tables optimized away</h5><p>​		在没有GROUP BY子句的情况下，基于索引优化MIN&#x2F;MAX操作或者对于MyISAM存储引擎优化COUNT(*) 操作，不必等到执行阶段再进行计算，查询执行计划生成的阶段即完成优化。</p>
<h5 id="distinct"><a href="#distinct" class="headerlink" title="distinct"></a>distinct</h5><p>​		优化distinct操作，在找到第一匹配的元组后即停止找同样值的动作。</p>
<h5 id="示例说明"><a href="#示例说明" class="headerlink" title="示例说明"></a>示例说明</h5><p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006192733929.png" alt="image-20221006192733929"></p>
<p>​		先执行 union 后面的查询语句，select_type &#x3D; union，再执行 from后面的虚表，再执行 select 字段中子查询，再执行 union 前面的主查询，最后执行union  result。</p>
<h3 id="单表优化案例"><a href="#单表优化案例" class="headerlink" title="单表优化案例"></a>单表优化案例</h3><p>创建测试数据：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- 创建数据库 index_db</span><br><span class="line">create table if not exists article(</span><br><span class="line">id int(10) unsigned not null primary key auto_increment,</span><br><span class="line">author_id int(10) unsigned not null,</span><br><span class="line">category_id int(10) unsigned not null,</span><br><span class="line">views int(10) unsigned not null,</span><br><span class="line">comments int(10) unsigned not null,</span><br><span class="line">title varbinary(255) not null,</span><br><span class="line">content text not null</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">insert into article(author_id,category_id,views,comments,title,content) values</span><br><span class="line">(1,1,1,1,&quot;1&quot;,&quot;1&quot;),</span><br><span class="line">(2,2,2,2,&quot;2&quot;,&quot;2&quot;),</span><br><span class="line">(1,1,3,3,&quot;3&quot;,&quot;3&quot;);</span><br><span class="line"></span><br><span class="line">select * from article;</span><br></pre></td></tr></table></figure>

<p>示例：查询category_id为1，comments大于1，且view最多的article_id。</p>
<p>未建立索引：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> index <span class="keyword">from</span> article;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006193639519.png" alt="image-20221006193639519"></p>
<p>执行SQL：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select id,author_id from article where category_id=1 and comments&gt;1 order by views desc limit 1;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006193826920.png" alt="image-20221006193826920"></p>
<p>建立索引：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 对于复合索引，先根据category_id查找，再根据comments查找，再根据views查找</span></span><br><span class="line"><span class="keyword">create</span> index idx_article_ccv <span class="keyword">on</span> article (category_id,comments,views);</span><br><span class="line"><span class="keyword">show</span> index <span class="keyword">from</span> article;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006194232740.png" alt="image-20221006194232740"></p>
<p>再次explain：</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006194414877.png" alt="image-20221006194414877"></p>
<p>修改查询条件：</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006194502965.png" alt="image-20221006194502965"></p>
<p>原因：<strong>comments&gt;1造成了索引失效，一般尽可能精确。</strong></p>
<p>删除并重新建立索引：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> index idx_article_ccv <span class="keyword">on</span> article;</span><br><span class="line"><span class="keyword">create</span> index idx_article_cv <span class="keyword">on</span> article(category_id,views);</span><br><span class="line"><span class="keyword">show</span> index <span class="keyword">from</span> article;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006194750583.png" alt="image-20221006194750583"></p>
<p>再次explain：</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006194914897.png" alt="image-20221006194914897"></p>
<h3 id="两表优化案例"><a href="#两表优化案例" class="headerlink" title="两表优化案例"></a>两表优化案例</h3><p>准备数据：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">create table if not exists class(</span><br><span class="line">id int(10) unsigned not null auto_increment,</span><br><span class="line">card int(10) unsigned not null,</span><br><span class="line">primary key(id)</span><br><span class="line">);</span><br><span class="line">create table if not exists book(</span><br><span class="line">	bookid int(10) unsigned not null auto_increment,</span><br><span class="line">	card int(10) unsigned not null,</span><br><span class="line">	primary key(bookid)</span><br><span class="line">);</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into class(card) values(floor(1+(rand()*20)));</span><br><span class="line"></span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into book(card) values(floor(1+(rand()*20)));</span><br></pre></td></tr></table></figure>

<p>对表 book 和 class 做 inner join 查询：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> class <span class="keyword">inner</span> <span class="keyword">join</span> book <span class="keyword">on</span> book.card <span class="operator">=</span> class.card;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006195225436.png" alt="image-20221006195225436"></p>
<p><strong>索引应该添加到那张表进行优化？</strong></p>
<p><strong>对于inner join连接，索引的添加类似于单表。</strong></p>
<p><strong>情况一：左连接给右表添加索引</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> book <span class="keyword">add</span> index Y(card);</span><br><span class="line">explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> class <span class="keyword">left</span> <span class="keyword">join</span> book <span class="keyword">on</span> class.card <span class="operator">=</span> book.card;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006195603694.png" alt="image-20221006195603694"></p>
<p><strong>索引应该添加到那张表进行优化？</strong></p>
<p><strong>对于inner join连接，索引的添加类似于单表。</strong></p>
<p><strong>对于左连接和右连接：</strong></p>
<p><strong>情况一：左连接给右表添加索引</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table book add index Y(card);</span><br><span class="line">explain select * from class left join book on class.card = book.card;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006195848293.png" alt="image-20221006195848293"></p>
<p><strong>情况二：左连接给坐左表添加索引</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> index Y <span class="keyword">on</span> book;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> class <span class="keyword">add</span> index X(card);</span><br><span class="line">explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> class <span class="keyword">left</span> <span class="keyword">join</span> book <span class="keyword">on</span> class.card <span class="operator">=</span> book.card;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006195944984.png" alt="image-20221006195944984"></p>
<p>总结：</p>
<p><strong>左连接查询时，左表的数据都有，需要对右边的数据进行搜索，因此需要对右表的数据建立索引，反之相同。</strong></p>
<p><strong>索引可以只建立其中一张表，分情况使用左连接或右连接。</strong></p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006200225231.png" alt="image-20221006200225231"></p>
<h3 id="三表优化案例"><a href="#三表优化案例" class="headerlink" title="三表优化案例"></a>三表优化案例</h3><p>数据准备：再添加一张表phone再添加一张表phone</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">create table if not exists phone(</span><br><span class="line">phoneid int(10) unsigned not null auto_increment,</span><br><span class="line">card int(10) unsigned not null,</span><br><span class="line">primary key(phoneid)</span><br><span class="line">);</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br><span class="line">insert into phone(card) values(floor(1+(rand()*20)));</span><br></pre></td></tr></table></figure>

<p>如果三张表都不加索引：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> index <span class="keyword">from</span> class;</span><br><span class="line"><span class="keyword">drop</span> index X <span class="keyword">on</span> class;</span><br><span class="line">explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> class <span class="keyword">left</span> <span class="keyword">join</span> book <span class="keyword">on</span> class.card <span class="operator">=</span> book.card <span class="keyword">left</span> <span class="keyword">join</span> phone <span class="keyword">on</span> book.card <span class="operator">=</span> phone.card;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006202906949.png" alt="image-20221006202906949"></p>
<p>给被 JOIN 表添加索引：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> index Y <span class="keyword">on</span> book(card);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> phone <span class="keyword">add</span> index Z(card);</span><br><span class="line">explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> class <span class="keyword">left</span> <span class="keyword">join</span> book <span class="keyword">on</span> class.card <span class="operator">=</span> book.card <span class="keyword">left</span> <span class="keyword">join</span> phone <span class="keyword">on</span> book.card <span class="operator">=</span> phone.card;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006203113294.png" alt="image-20221006203113294"></p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006205026827.png" alt="image-20221006205026827"></p>
<h2 id="索引优化"><a href="#索引优化" class="headerlink" title="索引优化"></a>索引优化</h2><p>准备数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> staffs(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">24</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span> comment &quot;姓名&quot;,</span><br><span class="line">age <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span> comment <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">pos <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span> comment <span class="string">&#x27;职位&#x27;</span>,</span><br><span class="line">add_time <span class="type">timestamp</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="built_in">current_timestamp</span> comment <span class="string">&#x27;入职时间&#x27;</span></span><br><span class="line">) charset utf8 comment <span class="string">&#x27;员工记录表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> staffs(name,age,pos,add_time) <span class="keyword">values</span>(<span class="string">&#x27;z3&#x27;</span>,<span class="number">22</span>,<span class="string">&#x27;manager&#x27;</span>,now());</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> staffs(name,age,pos,add_time) <span class="keyword">values</span>(<span class="string">&#x27;July&#x27;</span>,<span class="number">23</span>,<span class="string">&#x27;dev&#x27;</span>,now());</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> staffs(name,age,pos,add_time) <span class="keyword">values</span>(<span class="string">&#x27;2000&#x27;</span>,<span class="number">23</span>,<span class="string">&#x27;dev&#x27;</span>,now());</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> staffs;</span><br><span class="line"><span class="comment">-- 添加索引</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> staffs <span class="keyword">add</span> index idx_staffs_nameAgePos(name,age,pos);</span><br></pre></td></tr></table></figure>

<h4 id="优化一：全值匹配"><a href="#优化一：全值匹配" class="headerlink" title="优化一：全值匹配"></a>优化一：全值匹配</h4><p>条件字段与索引字段全值匹配</p>
<p>条件字段的顺序和索引的字段顺序相同，且不能略过前面的索引，否则索引失效。</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006214908963.png" alt="image-20221006214908963"></p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006215142556.png" alt="image-20221006215142556"></p>
<h4 id="优化二：最佳左前缀法则"><a href="#优化二：最佳左前缀法则" class="headerlink" title="优化二：最佳左前缀法则"></a>优化二：最佳左前缀法则</h4><p>​		如果索引了多列，要遵守最左前缀法则。指的是查询从索引的最左前列开始并且不跳过索引中的列。</p>
<p>​		最左边的索引必须有。中间的索引不能断。</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006220822455.png" alt="image-20221006220822455"></p>
<h4 id="优化三：不在索引列上做任何操作"><a href="#优化三：不在索引列上做任何操作" class="headerlink" title="优化三：不在索引列上做任何操作"></a>优化三：不在索引列上做任何操作</h4><p>​		不在索引列上做任何操作（计算、函数、(自动or手动)类型转换），会导致索引失效而转向全表扫描。</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006220738234.png" alt="image-20221006220738234"></p>
<h4 id="优化四：存储引擎不能使用索引中范围条件右边的列"><a href="#优化四：存储引擎不能使用索引中范围条件右边的列" class="headerlink" title="优化四：存储引擎不能使用索引中范围条件右边的列"></a>优化四：存储引擎不能使用索引中范围条件右边的列</h4><p>​		name 和 age 本身也用到了索引。其中 age 是排序用到了索引，name 是检索用到的。</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006221117759.png" alt="image-20221006221117759"></p>
<h4 id="优化五：尽量使用覆盖索引"><a href="#优化五：尽量使用覆盖索引" class="headerlink" title="优化五：尽量使用覆盖索引"></a>优化五：尽量使用覆盖索引</h4><p>尽量使用覆盖索引（只访问索引的查询(索引列和查询列一致），减少select *。</p>
<p><strong>使用覆盖索引，占用的字节数更小，type级别更高。</strong></p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006221525315.png" alt="image-20221006221525315"></p>
<h4 id="优化六：-x3D-和-lt-gt-导致索引失效"><a href="#优化六：-x3D-和-lt-gt-导致索引失效" class="headerlink" title="优化六：!&#x3D; 和 &lt;&gt;导致索引失效"></a>优化六：!&#x3D; 和 &lt;&gt;导致索引失效</h4><p>MySQL在使用不等于（!&#x3D;或者&lt;&gt;）的时候无法使用索引会导致全表扫描。</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006221655336.png" alt="image-20221006221655336"></p>
<h4 id="优化七：is-null，is-not-null也无法使用索引"><a href="#优化七：is-null，is-not-null也无法使用索引" class="headerlink" title="优化七：is null，is not null也无法使用索引"></a>优化七：is null，is not null也无法使用索引</h4><p>【为保证索引不失效，建议使用默认值】</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006221824011.png" alt="image-20221006221824011"></p>
<h4 id="优化八：like-以通配符开头（-ab…’）"><a href="#优化八：like-以通配符开头（-ab…’）" class="headerlink" title="优化八：like 以通配符开头（%ab…’）"></a>优化八：like 以通配符开头（%ab…’）</h4><p>like 以通配符开头（%ab…’），mysq|索引失效会变成全表扫描的操作。</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006222003661.png" alt="image-20221006222003661"></p>
<p>July%是范围匹配。</p>
<p>问题：解决 like  ‘%字符串%’  时索引不被使用的方法，<strong>查询字段采用索引</strong>。</p>
<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tbl_user(</span><br><span class="line">id <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span> auto_increment,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">default</span> <span class="keyword">null</span>,</span><br><span class="line">age <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">default</span> <span class="keyword">null</span>,</span><br><span class="line">email <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">default</span> <span class="keyword">null</span>,</span><br><span class="line"><span class="keyword">primary</span> key(id)</span><br><span class="line">)engine<span class="operator">=</span>innodb auto_increment<span class="operator">=</span><span class="number">1</span> <span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tbl_user(name,age,email) <span class="keyword">values</span>(&quot;1aa1&quot;,<span class="number">21</span>,<span class="string">&#x27;b@163.com&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tbl_user(name,age,email) <span class="keyword">values</span>(&quot;2aa2&quot;,<span class="number">222</span>,<span class="string">&#x27;a@163.com&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tbl_user(name,age,email) <span class="keyword">values</span>(&quot;3aa3&quot;,<span class="number">256</span>,<span class="string">&#x27;c@163.com&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tbl_user(name,age,email) <span class="keyword">values</span>(&quot;4aa4&quot;,<span class="number">21</span>,<span class="string">&#x27;d@163.com&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>建立索引：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tbl_user <span class="keyword">add</span> index idx_user_nameAge (name,age);</span><br></pre></td></tr></table></figure>

<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006222148674.png" alt="image-20221006222148674"></p>
<h4 id="优化九：字符串不加单引号索引失效"><a href="#优化九：字符串不加单引号索引失效" class="headerlink" title="优化九：字符串不加单引号索引失效"></a>优化九：字符串不加单引号索引失效</h4><p>字符串不加单引号索引失效，对于varchar类型，必须加引号。如 <strong>‘2000’ &#x3D; 2000。</strong></p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006222518353.png" alt="image-20221006222518353"></p>
<h4 id="优化十：少用or，用它来连接时会索引失效"><a href="#优化十：少用or，用它来连接时会索引失效" class="headerlink" title="优化十：少用or，用它来连接时会索引失效"></a>优化十：少用or，用它来连接时会索引失效</h4><p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006222646312.png" alt="image-20221006222646312"></p>
<p>示例：索引是否被使用？</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006222718225.png" alt="image-20221006222718225"></p>
<h4 id="示例：索引失效的情况"><a href="#示例：索引失效的情况" class="headerlink" title="示例：索引失效的情况"></a>示例：索引失效的情况</h4><p>数据准备：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test03(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key <span class="keyword">not</span> <span class="keyword">null</span> auto_increment,</span><br><span class="line">c1 <span class="type">char</span>(<span class="number">10</span>),</span><br><span class="line">c2 <span class="type">char</span>(<span class="number">10</span>),</span><br><span class="line">c3 <span class="type">char</span>(<span class="number">10</span>),</span><br><span class="line">c4 <span class="type">char</span>(<span class="number">10</span>),</span><br><span class="line">c5 <span class="type">char</span>(<span class="number">10</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test03(c1,c2,c3,c4,c5) <span class="keyword">values</span>(<span class="string">&#x27;a1&#x27;</span>,<span class="string">&#x27;a2&#x27;</span>,<span class="string">&#x27;a3&#x27;</span>,<span class="string">&#x27;a4&#x27;</span>,<span class="string">&#x27;a5&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test03(c1,c2,c3,c4,c5) <span class="keyword">values</span>(<span class="string">&#x27;b1&#x27;</span>,<span class="string">&#x27;b2&#x27;</span>,<span class="string">&#x27;b3&#x27;</span>,<span class="string">&#x27;b4&#x27;</span>,<span class="string">&#x27;b5&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test03(c1,c2,c3,c4,c5) <span class="keyword">values</span>(<span class="string">&#x27;c1&#x27;</span>,<span class="string">&#x27;c2&#x27;</span>,<span class="string">&#x27;c3&#x27;</span>,<span class="string">&#x27;c4&#x27;</span>,<span class="string">&#x27;c5&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test03(c1,c2,c3,c4,c5) <span class="keyword">values</span>(<span class="string">&#x27;d1&#x27;</span>,<span class="string">&#x27;d2&#x27;</span>,<span class="string">&#x27;d3&#x27;</span>,<span class="string">&#x27;d4&#x27;</span>,<span class="string">&#x27;d5&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test03(c1,c2,c3,c4,c5) <span class="keyword">values</span>(<span class="string">&#x27;e1&#x27;</span>,<span class="string">&#x27;e2&#x27;</span>,<span class="string">&#x27;e3&#x27;</span>,<span class="string">&#x27;e4&#x27;</span>,<span class="string">&#x27;e5&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> test03;</span><br><span class="line"><span class="keyword">create</span> index idx_test03_c1234 <span class="keyword">on</span> test03(c1,c2,c3,c4);</span><br><span class="line"><span class="keyword">show</span> index <span class="keyword">from</span> test03;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006223209912.png" alt="image-20221006223209912"></p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006223342768.png" alt="image-20221006223342768"></p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006224016041.png" alt="image-20221006224016041"></p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006224706809.png" alt="image-20221006224706809"></p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006225059667.png" alt="image-20221006225059667"></p>
<p>注意报错：</p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006225325685.png" alt="image-20221006225325685"></p>
<p>解决：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_41948075/article/details/123656114">https://blog.csdn.net/weixin_41948075/article/details/123656114</a></p>
<h4 id="一般性建议"><a href="#一般性建议" class="headerlink" title="一般性建议"></a>一般性建议</h4><ol>
<li><p>对于单键索引，尽量选择针对当前query过滤性更好的索引。</p>
</li>
<li><p>在选择组合索引的时候，当前Query中过滤性最好的字段在索引字段顺序中，位置越靠前越好。</p>
</li>
<li><p>在选择组合索引的时候，尽量选择可以能够包含当前query中的where字句中更多字段的索引。</p>
</li>
<li><p>尽可能通过分析统计信息和调整query的写法来达到选择合适索引的目的。</p>
</li>
</ol>
<h1 id="查询截取分析"><a href="#查询截取分析" class="headerlink" title="查询截取分析"></a>查询截取分析</h1><p>针对生产环境的慢SQL：</p>
<ol>
<li><p>观察，至少跑1天，看看生产的慢SQL情况。</p>
</li>
<li><p>开启慢查询日志，设置阙值，比如超过5秒钟的就是慢SQL， 并将它抓取出来。</p>
</li>
<li><p>explain+慢SQL分析。</p>
</li>
<li><p>show profile查询SQL在Mysq1服务器里面的执行细节和生命周期情况。</p>
</li>
<li><p>SQL数据库服务器的参数调优。</p>
</li>
</ol>
<h2 id="查询优化"><a href="#查询优化" class="headerlink" title="查询优化"></a>查询优化</h2><h3 id="小表驱动大表（in-和-exists）"><a href="#小表驱动大表（in-和-exists）" class="headerlink" title="小表驱动大表（in 和 exists）"></a>小表驱动大表（in 和 exists）</h3><p><strong>（尽可能少的连接，先”遍历”大表，会产生更多的资源消耗）</strong></p>
<p><strong>示例</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 优化原则;小的数据集驱动大的数据集</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A <span class="keyword">where</span> id (<span class="keyword">select</span> id <span class="keyword">from</span> B);</span><br><span class="line"><span class="comment">-- 等价于</span></span><br><span class="line"><span class="keyword">for</span> <span class="keyword">select</span> id <span class="keyword">from</span> B</span><br><span class="line">	<span class="keyword">for</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A <span class="keyword">where</span> A.id <span class="operator">=</span> B.id</span><br><span class="line"><span class="comment">-- 当B表的数据集小于A表的数据集时，in 优先于 exists</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A <span class="keyword">where</span> <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> B <span class="keyword">where</span> A.id <span class="operator">=</span> B.id);</span><br><span class="line"><span class="comment">-- 等价于</span></span><br><span class="line"><span class="keyword">for</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A </span><br><span class="line">	<span class="keyword">for</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> B <span class="keyword">where</span> B.id <span class="operator">=</span> A.id</span><br><span class="line"><span class="comment">-- 当B表的数据集大于A表的数据集时，exists 优先于 in</span></span><br><span class="line"><span class="comment">-- 注意：A表与B表的字段应该建立索引</span></span><br></pre></td></tr></table></figure>

<p><strong>当B表的数据集小于A表的数据集时，用 in 优于 exists。</strong></p>
<p><strong>当B表的数据集大于A表的数据集时，用 exists 由于 in。</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tbl_dept;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+----------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> deptName <span class="operator">|</span> locAddr  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> RD       <span class="operator">|</span> GanSu    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> HR       <span class="operator">|</span> XiAN     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> MK       <span class="operator">|</span> BeiJing  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> MIS      <span class="operator">|</span> ShangHai <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> FD       <span class="operator">|</span> ShenZhen <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+----------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tbl_emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+--------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> NAME <span class="operator">|</span> deptId <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> E1   <span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> E2   <span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> E3   <span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> EA   <span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> EB   <span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> W1   <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7</span> <span class="operator">|</span> W2   <span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">8</span> <span class="operator">|</span> W3   <span class="operator">|</span>     <span class="number">51</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+--------+</span></span><br><span class="line"><span class="number">8</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tbl_dept d <span class="keyword">where</span> <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> tbl_emp e <span class="keyword">where</span> d.id <span class="operator">=</span> e.deptId);</span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+----------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> deptName <span class="operator">|</span> locAddr  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> RD       <span class="operator">|</span> GanSu    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> HR       <span class="operator">|</span> XiAN     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> MK       <span class="operator">|</span> BeiJing  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> MIS      <span class="operator">|</span> ShangHai <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+----------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tbl_emp e <span class="keyword">where</span> e.deptId <span class="keyword">in</span> (<span class="keyword">select</span> id <span class="keyword">from</span> tbl_dept);</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+--------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> NAME <span class="operator">|</span> deptId <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> E1   <span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> E2   <span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> E3   <span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> EA   <span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> EB   <span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> W1   <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7</span> <span class="operator">|</span> W2   <span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+--------+</span></span><br><span class="line"><span class="number">7</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>in 和 exists 的区别</strong></p>
<p><strong>EXISTS</strong></p>
<p><strong>SELECT … FROM table WHERE EXISTS (subquery)</strong></p>
<p>可以理解为：将主查询的数据，放到子查询中做条件验证，根据验证结果(TRUE或FALSE)来决定主查询的数据结果是否得以保留。</p>
<p><strong>EXISTS (subquery)只返回TRUE或FALSE, 因此子查询中的SELECT * 也可以是SELECT 1或select ‘X’,</strong> 官方说法是实际执行时会忽略SELECT清单，因此没有。</p>
<p><strong>区别</strong></p>
<ol>
<li><p>EXISTS子查询的实际执行过程可能经过了优化而不是我们理解上的逐条对比，如果担忧效率问题，可进行实际检验以确定是否有效率问题。</p>
</li>
<li><p>EXISTS子查询往往也可以用条件表达式、其他子查询或者JOIN来替代，何种最优需要具体问题具体分析。</p>
</li>
</ol>
<h3 id="ORDER-BY关键字优化"><a href="#ORDER-BY关键字优化" class="headerlink" title="ORDER BY关键字优化"></a>ORDER BY关键字优化</h3><ol>
<li>ORDER BY子句尽可能使用 Index 排序，避免使用 Using filesort 方式排序。</li>
</ol>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006231402679.png" alt="image-20221006231402679"></p>
<p><img src="/2023/02/25/MySQL/Java\Document\MySQL\MySQL.assets\image-20221006231427799.png" alt="image-20221006231427799"></p>
<ol start="2">
<li><p>尽可能在索引列上完成排序操作，遵照索引建的最佳左前缀。</p>
</li>
<li><p>如果不在索引列上，filesort有两种算法：mysql就要启动双路排序和单路排序。</p>
</li>
</ol>
<h3 id="filesort"><a href="#filesort" class="headerlink" title="filesort"></a>filesort</h3><p>MySQL支持二种方式的排序，filesort 和Index，index效率高。它指MySQL扫描索引本身完成排序。filesort 方式效率较低。</p>
<p>ORDER BY满足两情况，会使用Index方式排序：</p>
<ul>
<li>ORDER BY语句使用索引最左前列。</li>
<li>使用 where 子句与 order by 子句条件列组合满足索引最左前列。</li>
</ul>
<h3 id="group-by关键字优化"><a href="#group-by关键字优化" class="headerlink" title="group by关键字优化"></a>group by关键字优化</h3><ol>
<li><p>group by实质是先排序后进行分组，遵照索引建的最佳左前缀</p>
</li>
<li><p>当无法使用索引列，增大max_length_for_sort_data参数的设置 + 增大sort_buffer_size参数的设置</p>
</li>
<li><p>where 高于 having, 能写在 where 限定的条件就不要去 having 限定了。</p>
</li>
</ol>
<h2 id="慢查询日志"><a href="#慢查询日志" class="headerlink" title="慢查询日志"></a>慢查询日志</h2><h3 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h3><ol>
<li><p>MySQL的慢查询日志是 MySQL 提供的一种日志记录，它用来记录在 MySQL 中响应时间超过阀值的语句，具体指运行时间超过 long_query_time 值的 SQL，则会被记录到慢查询日志中。</p>
</li>
<li><p>具体指运行时间超过 long_query_time 值的SQL，则会被记录到慢查询日志中。long_query_time 的默认值为10，意思是运行10秒以上的语句。</p>
</li>
<li><p>由它来查看哪些SQL超出了我们的最大忍耐时间值，比如一条sq|执行超过5秒钟，我们就算慢SQL，希望能收集超过5秒的 sql，结合之前 explain 进行全面分析。</p>
</li>
</ol>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>默认情况下，MySQL数据库没有开启慢查询日志，需要我们手动来设置这个参数。</p>
<p>当然，如果不是调优需要的话，一般不建议启动该参数，因为开启慢查询日志会或多或少带来一定的性能影响。<strong>慢查询日志支持将日志记录写入文件。</strong></p>
<h4 id="查看是否开启以及如何开启"><a href="#查看是否开启以及如何开启" class="headerlink" title="查看是否开启以及如何开启"></a>查看是否开启以及如何开启</h4><p>默认：<strong>show variables like “%slow_query_log%”;</strong></p>
<p>默认情况下 slow_query_log 的值为OFF，表示慢查询日志是禁用的，可以通过设置slow_ query log的值来开启。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &#x27;%slow_query_log%&#x27;;</span><br><span class="line">+---------------------+------------------------------------------+</span><br><span class="line">| Variable_name       | Value                                    |</span><br><span class="line">+---------------------+------------------------------------------+</span><br><span class="line">| slow_query_log      | OFF                                      |</span><br><span class="line">| slow_query_log_file | /usr/local/mysql/data/localhost-slow.log |</span><br><span class="line">+---------------------+------------------------------------------+</span><br><span class="line">2 rows in set (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; set global slow_query_log = 1;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like &#x27;%slow_query_log%&#x27;;</span><br><span class="line">+---------------------+------------------------------------------+</span><br><span class="line">| Variable_name       | Value                                    |</span><br><span class="line">+---------------------+------------------------------------------+</span><br><span class="line">| slow_query_log      | ON                                       |</span><br><span class="line">| slow_query_log_file | /usr/local/mysql/data/localhost-slow.log |</span><br><span class="line">+---------------------+------------------------------------------+</span><br></pre></td></tr></table></figure>

<p>使用 set global slow_query_log&#x3D;1 开启了慢查询日志<strong>只对当前数据库生效</strong>，如果MySQL重启后则会失效。</p>
<p><strong>如果要永久生效，就必须修改配置文件my.cnf (其它系统变量也是如此)</strong></p>
<p>修改 my.cnf 文件，[mysqld] 下增加或修改参数。</p>
<p>**slow_query_log **和 <strong>slow_query_log_file</strong>后，然后重启MySQL服务器。即将如下两行配置进my.cnf文件。</p>
<p><strong>slow_query_log&#x3D;1</strong></p>
<p><strong>slow_query_log_file&#x3D;&#x2F;var&#x2F;lib&#x2F;mysql&#x2F;localhost-slow.log 或者</strong></p>
<p><strong>slow_query_log_file&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data&#x2F;localhost-slow.log</strong></p>
<p>关于慢查询的参数<strong>slow_query_log_file</strong>，它指定慢查询日志文件的存放路径，系统默认会给一个缺省的文件<strong>localhost-slow.log</strong> （如果没有指定参数<strong>slow_query_log_file</strong>的话）。</p>
<h4 id="设置阈值时间"><a href="#设置阈值时间" class="headerlink" title="设置阈值时间"></a>设置阈值时间</h4><p>这个是由参数 long_query_time 控制， 默认情况下**long_query_time **的值为10秒。</p>
<p>命令：<strong>SHOW VARIABLES LIKE “%long_query_time%”;</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &#x27;%long_query_time%&#x27;;</span><br><span class="line">+-----------------+-----------+</span><br><span class="line">| Variable_name   | Value     |</span><br><span class="line">+-----------------+-----------+</span><br><span class="line">| long_query_time | 10.000000 |</span><br><span class="line">+-----------------+-----------+</span><br><span class="line">1 row in set (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; set global long_query_time = 3;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like &#x27;%long_query_time%&#x27;;</span><br><span class="line">+-----------------+-----------+</span><br><span class="line">| Variable_name   | Value     |</span><br><span class="line">+-----------------+-----------+</span><br><span class="line">| long_query_time | 10.000000 |</span><br><span class="line">+-----------------+-----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show global variables like &#x27;%long_query_time%&#x27;;</span><br><span class="line">+-----------------+----------+</span><br><span class="line">| Variable_name   | Value    |</span><br><span class="line">+-----------------+----------+</span><br><span class="line">| long_query_time | 3.000000 |</span><br><span class="line">+-----------------+----------+</span><br></pre></td></tr></table></figure>

<p>可以使用命令修改，也可以在 my.cnf 参数里面修改。</p>
<p>假如运行时间正好等于 long_query_time 的情况，并不会被记录下来。也就是说，在 MySQL 源码里是判断大于long_query_time，而非大于等于。</p>
<p><strong>设置后没有改变：需要重新连接或新开启一个会话才能看到修改的值。</strong></p>
<h4 id="慢查询示例"><a href="#慢查询示例" class="headerlink" title="慢查询示例"></a>慢查询示例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select sleep(4);</span><br><span class="line">+----------+</span><br><span class="line">| sleep(4) |</span><br><span class="line">+----------+</span><br><span class="line">|        0 |</span><br><span class="line">+----------+</span><br><span class="line">1 row in set (4.00 sec)</span><br></pre></td></tr></table></figure>

<p>查看慢查询日志：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat -n /usr/local/mysql/data/localhost-slow.log</span><br><span class="line">     1  /usr/local/mysql/bin/mysqld, Version: 5.7.36 (MySQL Community Server (GPL)). started with:</span><br><span class="line">     2  Tcp port: 3306  Unix socket: /tmp/mysql.sock</span><br><span class="line">     3  Time                 Id Command    Argument</span><br><span class="line">     4  # Time: 2022-04-29T10:19:17.035870Z</span><br><span class="line">     5  # User@Host: root[root] @ localhost []  Id:     4</span><br><span class="line">     6  # Query_time: 4.001412  Lock_time: 0.000000 Rows_sent: 1  Rows_examined: 0</span><br><span class="line">     7  use index_db;</span><br><span class="line">     8  SET timestamp=1651227557;</span><br><span class="line">     9  select sleep(4);</span><br><span class="line">    10  # Time: 2022-04-29T10:20:27.102982Z</span><br><span class="line">    11  # User@Host: root[root] @ localhost []  Id:     4</span><br><span class="line">    12  # Query_time: 4.000828  Lock_time: 0.000000 Rows_sent: 1  Rows_examined: 0</span><br><span class="line">    13  SET timestamp=1651227627;</span><br><span class="line">    14  select sleep(4);</span><br></pre></td></tr></table></figure>

<p>查询系统中有多少条慢SQL：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show global status like &#x27;%Slow_queries%&#x27;;</span><br><span class="line">+---------------+-------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------+-------+</span><br><span class="line">| Slow_queries  | 2     |</span><br><span class="line">+---------------+-------+</span><br><span class="line">1 row in set (0.01 sec)</span><br></pre></td></tr></table></figure>

<h4 id="文件配置"><a href="#文件配置" class="headerlink" title="文件配置"></a>文件配置</h4><p><strong>[mysqld]下配置：</strong></p>
<p><strong>slow_query_log&#x3D;1;</strong></p>
<p><strong>slow_guery_log_file&#x3D;&#x2F;var&#x2F;ib&#x2F;mysql&#x2F;localhost-slow.log</strong></p>
<p><strong># slow_guery_log_file&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;localhost-slow.log</strong></p>
<p><strong>long_query_time&#x3D;3;</strong></p>
<p><strong>log_output&#x3D;FILE</strong></p>
<h3 id="日志分析工具-mysqldumpslow"><a href="#日志分析工具-mysqldumpslow" class="headerlink" title="日志分析工具 mysqldumpslow"></a>日志分析工具 mysqldumpslow</h3><p><strong>在生产环境中，如果要手工分析日志，查找、分析SQL，显然是个体力活，MySQL提供了日志分析工具：mysqldumpslow。</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">mysqldumpslow: 未找到命令</span></span><br><span class="line">ln -s /usr/local/mysql/bin/mysqldumpslow /usr/bin</span><br></pre></td></tr></table></figure>



<p><strong>查看帮助信息</strong></p>
<p><strong>mysqldumpslow –help</strong></p>
<p><strong>s：是表示按照何种方式排序</strong></p>
<p><strong>c：访问次数</strong></p>
<p><strong>|：锁定时间</strong></p>
<p><strong>r：返回记录</strong></p>
<p><strong>t：查询时间</strong></p>
<p><strong>al：平均锁定时间</strong></p>
<p><strong>ar：平均返回记录数</strong></p>
<p><strong>at：平均查询时间</strong></p>
<p><strong>t：即为返回前面多少条的数据</strong></p>
<p><strong>g：后边搭配一个正则匹配模式，大小写不敏感的</strong></p>
<p><strong>得到返回记录集最多的10个SQL</strong> </p>
<p>日志文件位置：</p>
<p>&#x2F;var&#x2F;ib&#x2F;mysql&#x2F;localhost-slow.log</p>
<p>或者</p>
<p>&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data&#x2F;localhost-slow.log</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldumpslow -s r -t 10 /usr/local/mysql/data/localhost-slow.log</span><br></pre></td></tr></table></figure>

<p><strong>得到访问次数最多的10个SQL</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldumpslow -s c -t 10 /var/ib/mysq/localhost-slow.log</span><br></pre></td></tr></table></figure>

<p><strong>得到按照时间排序的前10条里面含有左连接的查询语句</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldumpslow -s t -t 10 -g &quot;left join&quot; /war/lib/mysql/localhost-slow.log</span><br></pre></td></tr></table></figure>

<p><strong>另外建议在使用这些命令时结合|和more 使用，否则有可能出现爆屏情况</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldumpslow -s r -t 10 /var/ib/mysql/localhost-slow.log | more</span><br></pre></td></tr></table></figure>

<h2 id="批量数据脚本"><a href="#批量数据脚本" class="headerlink" title="批量数据脚本"></a>批量数据脚本</h2><h3 id="准备数据"><a href="#准备数据" class="headerlink" title="准备数据"></a>准备数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">id int unsigned primary key auto_increment,</span><br><span class="line">deptno mediumint unsigned not null default 0,</span><br><span class="line">dname varchar(20) not null default &#x27;&#x27;,</span><br><span class="line">loc varchar(13) not null default &#x27;&#x27;</span><br><span class="line">) engine=innodb default charset=utf8;</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line">id int unsigned primary key auto_increment,</span><br><span class="line">empno int,</span><br><span class="line">ename varchar(20),</span><br><span class="line">job varchar(20),</span><br><span class="line">mgr varchar(20),</span><br><span class="line">hiredate date,</span><br><span class="line">sal double,</span><br><span class="line">comm double,</span><br><span class="line">deptno varchar(20))</span><br><span class="line">engine=innodb default charset=utf8;</span><br></pre></td></tr></table></figure>

<h3 id="设置参数-log-bin-trust-function-creators"><a href="#设置参数-log-bin-trust-function-creators" class="headerlink" title="设置参数 log_bin_trust_function_creators"></a>设置参数 log_bin_trust_function_creators</h3><p>创建函数，假如报错: This function has none of DETERMINIS……</p>
<p>由于开启过慢查询日志，因为我们开启了bin-log, 我们就必须为我们的function指定一个参数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">show variables like &quot;log_bin_trust_function_creators&#x27;;</span><br><span class="line"></span><br><span class="line">set global log_bin_trust_function_creators=1;</span><br></pre></td></tr></table></figure>

<p>#这样添加了参数以后，如果mysqld重启，上述参数又会消失，永久方法:</p>
<p>windows下：my.ini[mysqld] 加上 log_bin_trust_function_creators&#x3D;1</p>
<p>linux下 ：&#x2F;etc&#x2F;my.cnf 下 my.cnf[mysqld] 加上 log_bin_trust_function_creators&#x3D;1</p>
<h3 id="创建函数"><a href="#创建函数" class="headerlink" title="创建函数"></a>创建函数</h3><h4 id="随机产生字符串"><a href="#随机产生字符串" class="headerlink" title="随机产生字符串"></a>随机产生字符串</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line">CREATE FUNCTION rand_string(n INT) RETURNS VARCHAR(255)</span><br><span class="line">BEGIN</span><br><span class="line">DECLARE chars_str VARCHAR(100) DEFAULT &#x27;abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ&#x27;;</span><br><span class="line">DECLARE return_str VARCHAR(255) DEFAULT &#x27;&#x27;;</span><br><span class="line">DECLARE i INT DEFAULT 0;</span><br><span class="line">WHILE i&lt;n DO </span><br><span class="line">SET return_str =CONCAT(return_str,SUBSTRING(chars_str,FLOOR(1+RAND()*52),1));</span><br><span class="line">SET i=i+ 1;</span><br><span class="line">END WHILE;</span><br><span class="line">RETURN return_str;</span><br><span class="line">END $$</span><br></pre></td></tr></table></figure>

<h4 id="随机产生部门编号"><a href="#随机产生部门编号" class="headerlink" title="随机产生部门编号"></a>随机产生部门编号</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line">CREATE FUNCTION rand_num( )</span><br><span class="line">RETURNS INT(5)</span><br><span class="line">BEGIN</span><br><span class="line">DECLARE i INT DEFAULT 0;</span><br><span class="line">SET i= FLOOR(100+RAND()*10); </span><br><span class="line">RETURN i;</span><br><span class="line">END $$</span><br></pre></td></tr></table></figure>

<p>删除函数：drop function rand_string;</p>
<h3 id="创建存储过程"><a href="#创建存储过程" class="headerlink" title="创建存储过程"></a>创建存储过程</h3><h4 id="往emp表中插入数据的存储过程"><a href="#往emp表中插入数据的存储过程" class="headerlink" title="往emp表中插入数据的存储过程"></a>往emp表中插入数据的存储过程</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE insert_emp(IN START INT(10),IN max_num INT(10))</span><br><span class="line">BEGIN</span><br><span class="line">DECLARE i INT DEFAULT 0; </span><br><span class="line">#set autocommit =0把autocommit设置成0,不需要提交多次</span><br><span class="line">SET autocommit = 0;</span><br><span class="line">REPEAT</span><br><span class="line">SET i=i + 1;</span><br><span class="line">INSERT INTO emp (empno, ename,job ,mgr ,hiredate ,sal ,comm ,deptno ) VALUES ((START+i)</span><br><span class="line">,rand_string(6),&#x27;SALESMAN&#x27; ,0001 ,CURDATE(),2000,400,rand_num());</span><br><span class="line">UNTIL i= max_num</span><br><span class="line">END REPEAT;</span><br><span class="line">COMMIT;</span><br><span class="line">END $$</span><br></pre></td></tr></table></figure>

<h4 id="往dept表中插入数据的存储过程"><a href="#往dept表中插入数据的存储过程" class="headerlink" title="往dept表中插入数据的存储过程"></a>往dept表中插入数据的存储过程</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">drop procedure insert_dept;</span><br><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE insert_dept(IN START INT(10),IN max_num INT(10))</span><br><span class="line">BEGIN</span><br><span class="line">DECLARE i INT DEFAULT 0;</span><br><span class="line">SET autocommit = 0;</span><br><span class="line">REPEAT</span><br><span class="line">SET i=i+1;</span><br><span class="line">INSERT INTO dept (deptno,dname,loc) VALUES ((START+i),rand_string(10),rand_string(8)) ;</span><br><span class="line">UNTIL i = max_num</span><br><span class="line">END REPEAT ;</span><br><span class="line">COMMIT;</span><br><span class="line">END $$</span><br></pre></td></tr></table></figure>

<h3 id="调用存储过程"><a href="#调用存储过程" class="headerlink" title="调用存储过程"></a>调用存储过程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER ;</span><br><span class="line">CALL insert_dept(100,10);</span><br><span class="line">#执行存储过程，往emp表添加50万条数据</span><br><span class="line">DELIMITER ;</span><br><span class="line">CALL insert_emp(10001,500000);</span><br></pre></td></tr></table></figure>

<h2 id="Show-Profile"><a href="#Show-Profile" class="headerlink" title="Show Profile"></a>Show Profile</h2><p>定义：是mysql提供可以用来分析<strong>当前会话中语句执行的资源消耗情况</strong>，可以用于SQL的调优的测量。</p>
<p>官网：htp:&#x2F;&#x2F;dev.mysql.com&#x2F;doc&#x2F;refman&#x2F;5.5&#x2F;en&#x2F;show-profile.html。</p>
<p>默认情况下，参数处于关闭状态，并保存最近15次的运行结果。</p>
<p><strong>分析步骤</strong></p>
<p>查看当前的mysql版本是否支持。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show variables like &quot;profiling%&quot;;</span><br></pre></td></tr></table></figure>

<p><strong>默认关闭，使用前开启。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &quot;profiling%&quot;;</span><br><span class="line">+------------------------+-------+</span><br><span class="line">| Variable_name          | Value |</span><br><span class="line">+------------------------+-------+</span><br><span class="line">| profiling              | OFF   |</span><br><span class="line">| profiling_history_size | 15    |</span><br><span class="line">+------------------------+-------+</span><br><span class="line">2 rows in set (0.02 sec)</span><br><span class="line">-- 使用set profiling=on开启</span><br><span class="line">mysql&gt; set profiling=on;</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like &quot;profiling%&quot;;</span><br><span class="line">+------------------------+-------+</span><br><span class="line">| Variable_name          | Value |</span><br><span class="line">+------------------------+-------+</span><br><span class="line">| profiling              | ON    |</span><br><span class="line">| profiling_history_size | 15    |</span><br><span class="line">+------------------------+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>运行SQL。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from emp group by id%10 limit 150000;</span><br><span class="line"></span><br><span class="line">select * from emp group by id%20 order by 5;</span><br></pre></td></tr></table></figure>

<p>查看结果，<strong>show profiles;</strong></p>
<p>分析步骤</p>
<p>诊断SQL，show profile cpu,block io for query [id]。上一步前面的问题SQL数字号码。</p>
<p>参数备注：</p>
<table>
<thead>
<tr>
<th><strong>ALL</strong></th>
<th><strong>显示所有的开销信息</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>BLOCK IO</strong></td>
<td>显示块IO相关开销</td>
</tr>
<tr>
<td><strong>CONTEXT SWITCHES</strong></td>
<td>上下文切换相关开销</td>
</tr>
<tr>
<td><strong>CPU</strong></td>
<td>显示CPU相关开销信息</td>
</tr>
<tr>
<td><strong>IPC</strong></td>
<td>显示发送和接收相关开销信息</td>
</tr>
<tr>
<td><strong>MEMORY</strong></td>
<td>显示内存相关开销信息</td>
</tr>
<tr>
<td><strong>PAGE FAULTS</strong></td>
<td>显示页面错误相关开销信息</td>
</tr>
<tr>
<td><strong>SOURCE</strong></td>
<td>显示和Source_function, Source_file，Source_line相关的开销信息</td>
</tr>
<tr>
<td><strong>SWAPS</strong></td>
<td>显示交换次数相关开销的信息</td>
</tr>
</tbody></table>
<p>日常开发需要注意的结论：</p>
<ol>
<li><p>converting HEAP to MyISAM   查询结果太大，内存都不够用了往磁盘上搬了。</p>
</li>
<li><p>Creating tmp table          创建临时表，拷贝数据到临时表，用完再删除。</p>
</li>
<li><p>Copying to tmp table on disk   把内存中临时表复制到磁盘，危险!</p>
</li>
<li><p>locked</p>
</li>
</ol>
<h2 id="全局查询日志"><a href="#全局查询日志" class="headerlink" title="全局查询日志"></a>全局查询日志</h2><p><strong>永远不要在生产环境开启这个功能。</strong></p>
<p>配置启用编码启用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set global general_log=1;</span><br><span class="line"></span><br><span class="line">set global log_output=&#x27;TABLE&#x27;;</span><br></pre></td></tr></table></figure>



<p>此后，你所编写的sql语句，将会记录到mysq|库里的general log表，可以用下面的命令查看：</p>
<p>select * from mysql.general log;</p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/02/24/Vue/" rel="prev" title="Vue">
      <i class="fa fa-chevron-left"></i> Vue
    </a></div>
      <div class="post-nav-item">
    <a href="/2023/02/26/Oracle/" rel="next" title="Oracle">
      Oracle <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-%E6%A6%82%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">MySQL 概述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL%E7%AE%80%E4%BB%8B"><span class="nav-number">1.1.</span> <span class="nav-text">MySQL简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-%E5%AE%89%E8%A3%85"><span class="nav-number">1.2.</span> <span class="nav-text">MySQL 安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E8%88%AC%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F"><span class="nav-number">1.2.1.</span> <span class="nav-text">一般安装方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL-5-7-%E5%AE%89%E8%A3%85"><span class="nav-number">1.2.2.</span> <span class="nav-text">MySQL 5.7 安装</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8E%8B%E7%BC%A9%E5%8C%85%E8%A7%A3%E5%8E%8B%E5%AE%89%E8%A3%85"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">压缩包解压安装</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E4%B8%8A%E4%BC%A0%E5%B9%B6%E8%A7%A3%E5%8E%8B-tar-gz"><span class="nav-number">1.2.2.1.1.</span> <span class="nav-text">第一步：上传并解压 tar.gz</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA-mysql-%E7%94%A8%E6%88%B7"><span class="nav-number">1.2.2.1.2.</span> <span class="nav-text">第二步：创建 mysql 用户</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E6%9B%B4%E6%94%B9%E6%9D%83%E9%99%90"><span class="nav-number">1.2.2.1.3.</span> <span class="nav-text">第三步：更改权限</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E5%8D%B8%E8%BD%BDmariadb-libs%E5%BA%93%E6%96%87%E4%BB%B6"><span class="nav-number">1.2.2.1.4.</span> <span class="nav-text">第四步：卸载mariadb-libs库文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E4%BA%94%E6%AD%A5%EF%BC%9A%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">1.2.2.1.5.</span> <span class="nav-text">第五步：初始化数据库</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E5%85%AD%E6%AD%A5%EF%BC%9A%E9%85%8D%E7%BD%AEservice%E5%91%BD%E4%BB%A4"><span class="nav-number">1.2.2.1.6.</span> <span class="nav-text">第六步：配置service命令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E4%B8%83%E6%AD%A5%EF%BC%9A%E9%85%8D%E7%BD%AE%E5%AF%86%E7%A0%81"><span class="nav-number">1.2.2.1.7.</span> <span class="nav-text">第七步：配置密码</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E5%85%AB%E6%AD%A5%EF%BC%9A%E5%BC%80%E6%94%BE%E7%AB%AF%E5%8F%A33306"><span class="nav-number">1.2.2.1.8.</span> <span class="nav-text">第八步：开放端口3306</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E4%B9%9D%E6%AD%A5%EF%BC%9A%E8%BF%9C%E7%A8%8B%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95"><span class="nav-number">1.2.2.1.9.</span> <span class="nav-text">第九步：远程用户登录</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E6%AD%A5%EF%BC%9A%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="nav-number">1.2.2.1.10.</span> <span class="nav-text">第十步：用户管理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%80%E6%AD%A5%EF%BC%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E"><span class="nav-number">1.2.2.1.11.</span> <span class="nav-text">第十一步：配置文件说明</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%8C%E6%AD%A5%EF%BC%9A%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98"><span class="nav-number">1.2.2.1.12.</span> <span class="nav-text">第十二步：乱码问题</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">二进制编译安装</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E5%AE%89%E8%A3%85%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83-gcc-c"><span class="nav-number">1.2.2.2.1.</span> <span class="nav-text">第一步：安装编译环境 gcc-c++</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E8%A7%A3%E5%8E%8B%E5%B9%B6%E8%BF%9B%E5%85%A5mysql%E7%9B%AE%E5%BD%95"><span class="nav-number">1.2.2.2.2.</span> <span class="nav-text">第二步：解压并进入mysql目录</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E7%BC%96%E8%AF%91"><span class="nav-number">1.2.2.2.3.</span> <span class="nav-text">第三步：编译</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E5%AE%89%E8%A3%85"><span class="nav-number">1.2.2.2.4.</span> <span class="nav-text">第四步：安装</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E4%BA%94%E6%AD%A5%EF%BC%9A%E8%AE%BE%E7%BD%AE%E6%9D%83%E9%99%90"><span class="nav-number">1.2.2.2.5.</span> <span class="nav-text">第五步：设置权限</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E5%85%AD%E6%AD%A5%EF%BC%9A%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D%E7%BD%AE"><span class="nav-number">1.2.2.2.6.</span> <span class="nav-text">第六步：初始化配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E4%B8%83%E6%AD%A5%EF%BC%9A%E5%90%AF%E5%8A%A8MySQL"><span class="nav-number">1.2.2.2.7.</span> <span class="nav-text">第七步：启动MySQL</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E5%85%AB%E6%AD%A5%EF%BC%9A%E4%BF%AE%E6%94%B9root%E5%AF%86%E7%A0%81"><span class="nav-number">1.2.2.2.8.</span> <span class="nav-text">第八步：修改root密码</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#RPM%E5%AE%89%E8%A3%85"><span class="nav-number">1.2.2.3.</span> <span class="nav-text">RPM安装</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL8-%E7%89%88%E6%9C%AC%E5%AE%89%E8%A3%85"><span class="nav-number">1.2.3.</span> <span class="nav-text">MySQL8 版本安装</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL%E5%8D%B8%E8%BD%BD"><span class="nav-number">1.3.</span> <span class="nav-text">MySQL卸载</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#RPM%E5%8D%B8%E8%BD%BD"><span class="nav-number">1.3.1.</span> <span class="nav-text">RPM卸载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%BA%90%E7%A0%81%E5%8D%B8%E8%BD%BD"><span class="nav-number">1.3.2.</span> <span class="nav-text">二进制源码卸载</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-%E9%80%BB%E8%BE%91%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="nav-number">2.</span> <span class="nav-text">MySQL 逻辑架构与存储引擎</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E6%9E%B6%E6%9E%84"><span class="nav-number">2.1.</span> <span class="nav-text">逻辑架构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="nav-number">2.2.</span> <span class="nav-text">存储引擎</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MyISAM-%E5%92%8C-InnoDB-%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="nav-number">2.3.</span> <span class="nav-text">MyISAM 和 InnoDB 的对比</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E5%85%B3%E7%B3%BB%E4%BB%A5%E5%8F%8A%E4%B8%89%E5%A4%A7%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F"><span class="nav-number">3.</span> <span class="nav-text">多表关系以及三大设计范式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SQL-%E6%A6%82%E8%BF%B0"><span class="nav-number">4.</span> <span class="nav-text">SQL 概述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL%E5%88%86%E7%B1%BB"><span class="nav-number">4.1.</span> <span class="nav-text">SQL分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL-%E6%A0%87%E5%87%86"><span class="nav-number">4.2.</span> <span class="nav-text">SQL 标准</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL-%E8%AF%AD%E6%B3%95%E5%9F%BA%E6%9C%AC%E8%A7%84%E8%8C%83"><span class="nav-number">4.3.</span> <span class="nav-text">SQL 语法基本规范</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5%E6%8C%87%E4%BB%A4"><span class="nav-number">4.4.</span> <span class="nav-text">数据导入指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL-%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87"><span class="nav-number">4.5.</span> <span class="nav-text">SQL 数据准备</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5"><span class="nav-number">5.</span> <span class="nav-text">基本的查询语句</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SELECT%E2%80%A6"><span class="nav-number">5.1.</span> <span class="nav-text">SELECT…</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SELECT-%E2%80%A6-FROM"><span class="nav-number">5.2.</span> <span class="nav-text">SELECT … FROM</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%AB%E5%90%8D-AS"><span class="nav-number">5.3.</span> <span class="nav-text">别名 AS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8E%BB%E9%87%8D-DISTINCT"><span class="nav-number">5.4.</span> <span class="nav-text">去重 DISTINCT</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A9%BA%E5%80%BC"><span class="nav-number">5.5.</span> <span class="nav-text">空值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E5%B8%B8%E6%95%B0"><span class="nav-number">5.6.</span> <span class="nav-text">查询常数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="nav-number">5.7.</span> <span class="nav-text">显示表结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%87%E6%BB%A4-where"><span class="nav-number">5.8.</span> <span class="nav-text">过滤 where</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">6.</span> <span class="nav-text">运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">6.1.</span> <span class="nav-text">算术运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">6.2.</span> <span class="nav-text">比较运算符</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8E%92%E5%BA%8F%E4%B8%8E%E5%88%86%E9%A1%B5"><span class="nav-number">7.</span> <span class="nav-text">排序与分页</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%92%E5%BA%8F"><span class="nav-number">7.1.</span> <span class="nav-text">排序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E9%A1%B5"><span class="nav-number">7.2.</span> <span class="nav-text">分页</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-number">8.</span> <span class="nav-text">多表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF%EF%BC%88%E4%BA%A4%E5%8F%89%E8%BF%9E%E6%8E%A5%EF%BC%89"><span class="nav-number">8.1.</span> <span class="nav-text">笛卡尔积（交叉连接）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E5%88%86%E7%B1%BB"><span class="nav-number">8.2.</span> <span class="nav-text">多表查询分类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%B1%BB%E4%B8%80%EF%BC%9A%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5%E4%B8%8E%E9%9D%9E%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="nav-number">8.2.1.</span> <span class="nav-text">分类一：等值连接与非等值连接</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="nav-number">8.2.1.1.</span> <span class="nav-text">等值连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9D%9E%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="nav-number">8.2.1.2.</span> <span class="nav-text">非等值连接</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%B1%BB%E4%BA%8C%EF%BC%9A%E8%87%AA%E8%BF%9E%E6%8E%A5%E4%B8%8E%E9%9D%9E%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="nav-number">8.2.2.</span> <span class="nav-text">分类二：自连接与非自连接</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="nav-number">8.2.2.1.</span> <span class="nav-text">自连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9D%9E%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="nav-number">8.2.2.2.</span> <span class="nav-text">非自连接</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%B1%BB%E4%B8%89%EF%BC%9A%E5%86%85%E8%BF%9E%E6%8E%A5%E4%B8%8E%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="nav-number">8.2.3.</span> <span class="nav-text">分类三：内连接与外连接</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="nav-number">8.2.3.1.</span> <span class="nav-text">内连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="nav-number">8.2.3.2.</span> <span class="nav-text">外连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SQL92%EF%BC%9A%E4%BD%BF%E7%94%A8-%E5%AE%9E%E7%8E%B0%E5%86%85%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="nav-number">8.2.3.3.</span> <span class="nav-text">SQL92：使用 (+) 实现内外连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SQL99-%E8%AF%AD%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-number">8.2.3.4.</span> <span class="nav-text">SQL99 语法实现多表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="nav-number">8.2.3.4.1.</span> <span class="nav-text">基本语法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5-INNER-JOIN"><span class="nav-number">8.2.3.4.2.</span> <span class="nav-text">内连接 INNER JOIN</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5-OUTER-JOIN"><span class="nav-number">8.2.3.4.3.</span> <span class="nav-text">外连接 OUTER JOIN</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%B7%A6%E5%A4%96%E8%BF%9E%E6%8E%A5-LEFT-OUTER-JOIN"><span class="nav-number">8.2.3.4.3.1.</span> <span class="nav-text">左外连接 LEFT OUTER JOIN</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%8F%B3%E5%A4%96%E8%BF%9E%E6%8E%A5-RIGHT-OUTER-JOIN"><span class="nav-number">8.2.3.4.3.2.</span> <span class="nav-text">右外连接 RIGHT OUTER JOIN</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%BB%A1%E5%A4%96%E8%BF%9E%E6%8E%A5-FULL-OUTER-JOIN"><span class="nav-number">8.2.3.4.3.3.</span> <span class="nav-text">满外连接 FULL OUTER JOIN</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UNION%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">8.3.</span> <span class="nav-text">UNION的使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%9A%E7%94%A8%E7%9A%84JOIN%E6%9F%A5%E8%AF%A2"><span class="nav-number">8.4.</span> <span class="nav-text">通用的JOIN查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL%E9%A1%BA%E5%BA%8F"><span class="nav-number">8.4.1.</span> <span class="nav-text">SQL顺序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7%E7%A7%8DJOIN%E7%90%86%E8%AE%BA"><span class="nav-number">8.4.2.</span> <span class="nav-text">7种JOIN理论</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL99-%E8%AF%AD%E6%B3%95%E6%96%B0%E7%89%B9%E6%80%A7"><span class="nav-number">8.5.</span> <span class="nav-text">SQL99 语法新特性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E7%84%B6%E8%BF%9E%E6%8E%A5"><span class="nav-number">8.5.1.</span> <span class="nav-text">自然连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#USING-%E8%BF%9E%E6%8E%A5"><span class="nav-number">8.5.2.</span> <span class="nav-text">USING 连接</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">8.6.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%95%E8%A1%8C%E5%87%BD%E6%95%B0"><span class="nav-number">9.</span> <span class="nav-text">单行函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8D%E5%90%8C-DBMS-%E5%87%BD%E6%95%B0%E7%9A%84%E5%B7%AE%E5%BC%82"><span class="nav-number">9.1.</span> <span class="nav-text">不同 DBMS 函数的差异</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL%E7%9A%84%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0%E5%8F%8A%E5%88%86%E7%B1%BB"><span class="nav-number">9.2.</span> <span class="nav-text">MySQL的内置函数及分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E5%80%BC%E5%87%BD%E6%95%B0"><span class="nav-number">9.3.</span> <span class="nav-text">数值函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%87%BD%E6%95%B0"><span class="nav-number">9.3.1.</span> <span class="nav-text">基本函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%92%E5%BA%A6%E4%B8%8E%E5%BC%A7%E5%BA%A6%E4%BA%92%E6%8D%A2%E5%87%BD%E6%95%B0"><span class="nav-number">9.3.2.</span> <span class="nav-text">角度与弧度互换函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0"><span class="nav-number">9.3.3.</span> <span class="nav-text">三角函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%87%E6%95%B0%E4%B8%8E%E5%AF%B9%E6%95%B0"><span class="nav-number">9.3.4.</span> <span class="nav-text">指数与对数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9B%E5%88%B6%E9%97%B4%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="nav-number">9.3.5.</span> <span class="nav-text">进制间的转换</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="nav-number">9.4.</span> <span class="nav-text">字符串函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0"><span class="nav-number">9.5.</span> <span class="nav-text">日期和时间函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%97%A5%E6%9C%9F%E3%80%81%E6%97%B6%E9%97%B4"><span class="nav-number">9.5.1.</span> <span class="nav-text">获取日期、时间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E4%B8%8E%E6%97%B6%E9%97%B4%E6%88%B3%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="nav-number">9.5.2.</span> <span class="nav-text">日期与时间戳的转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%9C%88%E4%BB%BD%E3%80%81%E6%98%9F%E6%9C%9F%E3%80%81%E6%98%9F%E6%9C%9F%E6%95%B0%E3%80%81%E5%A4%A9%E6%95%B0%E7%AD%89"><span class="nav-number">9.5.3.</span> <span class="nav-text">获取月份、星期、星期数、天数等</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E7%9A%84%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%B8%8E%E8%A7%A3%E6%9E%90"><span class="nav-number">9.5.4.</span> <span class="nav-text">日期的格式化与解析</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0"><span class="nav-number">9.6.</span> <span class="nav-text">流程控制函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%81%9A%E5%90%88%EF%BC%88%E7%BB%84%EF%BC%89%E5%87%BD%E6%95%B0"><span class="nav-number">10.</span> <span class="nav-text">聚合（组）函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D"><span class="nav-number">10.1.</span> <span class="nav-text">聚合函数介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GROUP-BY"><span class="nav-number">10.2.</span> <span class="nav-text">GROUP BY</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-number">10.2.1.</span> <span class="nav-text">基本使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E5%88%97%E5%88%86%E7%BB%84"><span class="nav-number">10.2.2.</span> <span class="nav-text">多列分组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GROUP-BY%E4%B8%AD%E4%BD%BF%E7%94%A8WITH-ROLLUP"><span class="nav-number">10.2.3.</span> <span class="nav-text">GROUP BY中使用WITH ROLLUP??</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HAVING"><span class="nav-number">10.3.</span> <span class="nav-text">HAVING</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-1"><span class="nav-number">10.3.1.</span> <span class="nav-text">基本使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#WHERE-%E5%92%8C-HAVING-%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="nav-number">10.3.2.</span> <span class="nav-text">WHERE 和 HAVING 的对比</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2-1"><span class="nav-number">11.</span> <span class="nav-text">多表查询</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-%E4%BA%8B%E5%8A%A1"><span class="nav-number">12.</span> <span class="nav-text">MySQL 事务</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-50-%E9%A2%98"><span class="nav-number">13.</span> <span class="nav-text">MySQL 50 题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87"><span class="nav-number">13.1.</span> <span class="nav-text">数据准备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE%E5%8F%8A%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88"><span class="nav-number">13.2.</span> <span class="nav-text">题目及参考答案</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E5%88%86%E6%9E%90"><span class="nav-number">14.</span> <span class="nav-text">索引优化分析</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%92%88%E5%AF%B9%E7%9A%84%E9%97%AE%E9%A2%98%E5%8F%8A%E5%85%B6%E5%8E%9F%E5%9B%A0"><span class="nav-number">14.1.</span> <span class="nav-text">针对的问题及其原因</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%9A%E7%94%A8%E7%9A%84JOIN%E6%9F%A5%E8%AF%A2-1"><span class="nav-number">14.2.</span> <span class="nav-text">通用的JOIN查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL%E9%A1%BA%E5%BA%8F-1"><span class="nav-number">14.2.1.</span> <span class="nav-text">SQL顺序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7%E7%A7%8DJOIN%E7%90%86%E8%AE%BA-1"><span class="nav-number">14.2.2.</span> <span class="nav-text">7种JOIN理论</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%83%85%E5%86%B5%E4%B8%80%EF%BC%9A%E4%B8%A4%E4%B8%AA%E8%A1%A8%E7%9A%84%E4%BA%A4%E9%9B%86%E6%95%B0%E6%8D%AE"><span class="nav-number">14.2.2.1.</span> <span class="nav-text">情况一：两个表的交集数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%83%85%E5%86%B5%E4%BA%8C%EF%BC%9A%E4%BB%A5%E8%A1%A8-tbl-emp-%E4%B8%BA%E4%B8%BB%E8%A1%A8%E5%85%B3%E8%81%94-tbl-dept"><span class="nav-number">14.2.2.2.</span> <span class="nav-text">情况二：以表 tbl_emp 为主表关联 tbl_dept</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%83%85%E5%86%B5%E4%B8%89%EF%BC%9A%E4%BB%A5-tbl-dept%E4%B8%BA%E4%B8%BB%E8%A1%A8%E5%85%B3%E8%81%94-tbl-emp%E8%A1%A8"><span class="nav-number">14.2.2.3.</span> <span class="nav-text">情况三：以 tbl_dept为主表关联 tbl_emp表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%83%85%E5%86%B5%E5%9B%9B%EF%BC%9A%E8%A1%A8-tbl-emp-%E7%89%B9%E6%9C%89%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="nav-number">14.2.2.4.</span> <span class="nav-text">情况四：表 tbl_emp 特有的数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%83%85%E5%86%B5%E4%BA%94%EF%BC%9A%E8%A1%A8-tbl-dept-%E7%89%B9%E6%9C%89%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="nav-number">14.2.2.5.</span> <span class="nav-text">情况五：表 tbl_dept 特有的数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%83%85%E5%86%B5%E5%85%AD%EF%BC%9A%E4%B8%A4%E5%BC%A0%E8%A1%A8%E9%83%BD%E6%9C%89%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="nav-number">14.2.2.6.</span> <span class="nav-text">情况六：两张表都有的数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%83%85%E5%86%B5%E4%B8%83%EF%BC%9A%E4%B8%A4%E5%BC%A0%E8%A1%A8%E7%89%B9%E6%9C%89%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="nav-number">14.2.2.7.</span> <span class="nav-text">情况七：两张表特有的数据</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95"><span class="nav-number">14.3.</span> <span class="nav-text">索引</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E5%AE%9A%E4%B9%89"><span class="nav-number">14.3.1.</span> <span class="nav-text">索引定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88"><span class="nav-number">14.3.2.</span> <span class="nav-text">索引失效</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8A%BF"><span class="nav-number">14.3.3.</span> <span class="nav-text">索引优势</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E5%8A%A3%E5%8A%BF"><span class="nav-number">14.3.4.</span> <span class="nav-text">索引劣势</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E5%88%86%E7%B1%BB"><span class="nav-number">14.3.5.</span> <span class="nav-text">索引分类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%95%E5%80%BC%E7%B4%A2%E5%BC%95"><span class="nav-number">14.3.5.1.</span> <span class="nav-text">单值索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95"><span class="nav-number">14.3.5.2.</span> <span class="nav-text">唯一索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%8D%E5%90%88%E7%B4%A2%E5%BC%95"><span class="nav-number">14.3.5.3.</span> <span class="nav-text">复合索引</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-1"><span class="nav-number">14.3.6.</span> <span class="nav-text">基本语法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA"><span class="nav-number">14.3.6.1.</span> <span class="nav-text">创建</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4"><span class="nav-number">14.3.6.2.</span> <span class="nav-text">删除</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B"><span class="nav-number">14.3.6.3.</span> <span class="nav-text">查看</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8alter%E5%91%BD%E4%BB%A4"><span class="nav-number">14.3.6.4.</span> <span class="nav-text">使用alter命令</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL-%E7%B4%A2%E5%BC%95%E7%BB%93%E6%9E%84"><span class="nav-number">14.3.7.</span> <span class="nav-text">MySQL 索引结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BTree%E6%A3%80%E7%B4%A2%E5%8E%9F%E7%90%86"><span class="nav-number">14.3.8.</span> <span class="nav-text">BTree检索原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9C%80%E8%A6%81%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E7%9A%84%E6%83%85%E5%86%B5"><span class="nav-number">14.3.9.</span> <span class="nav-text">需要创建索引的情况</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8D%E9%9C%80%E8%A6%81%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E7%9A%84%E6%83%85%E5%86%B5"><span class="nav-number">14.3.10.</span> <span class="nav-text">不需要创建索引的情况</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90"><span class="nav-number">14.4.</span> <span class="nav-text">性能分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL-Query-Optimizer%EF%BC%88%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E5%99%A8%EF%BC%89"><span class="nav-number">14.4.1.</span> <span class="nav-text">MySQL  Query  Optimizer（查询优化器）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL%E5%B8%B8%E8%A7%81%E7%93%B6%E9%A2%88"><span class="nav-number">14.4.2.</span> <span class="nav-text">MySQL常见瓶颈</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Explain%EF%BC%88%E6%9F%A5%E7%9C%8B%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%EF%BC%89"><span class="nav-number">14.4.3.</span> <span class="nav-text">Explain（查看执行计划）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89"><span class="nav-number">14.4.3.1.</span> <span class="nav-text">定义</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8"><span class="nav-number">14.4.3.2.</span> <span class="nav-text">作用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#explain-%E5%90%84%E5%AD%97%E6%AE%B5%E8%AF%B4%E6%98%8E"><span class="nav-number">14.4.4.</span> <span class="nav-text">explain 各字段说明</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#id"><span class="nav-number">14.4.4.1.</span> <span class="nav-text">id</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#select-type"><span class="nav-number">14.4.4.2.</span> <span class="nav-text">select_type</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#table"><span class="nav-number">14.4.4.3.</span> <span class="nav-text">table</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#type"><span class="nav-number">14.4.4.4.</span> <span class="nav-text">type</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#possible-keys"><span class="nav-number">14.4.4.5.</span> <span class="nav-text">possible_keys</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#key"><span class="nav-number">14.4.4.6.</span> <span class="nav-text">key</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ken-len"><span class="nav-number">14.4.4.7.</span> <span class="nav-text">ken_len</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ref"><span class="nav-number">14.4.4.8.</span> <span class="nav-text">ref</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#rows"><span class="nav-number">14.4.4.9.</span> <span class="nav-text">rows</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Extra"><span class="nav-number">14.4.4.10.</span> <span class="nav-text">Extra</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Using-filesort%EF%BC%88%E6%96%87%E4%BB%B6%E5%86%85%E6%8E%92%E5%BA%8F%EF%BC%89"><span class="nav-number">14.4.4.10.1.</span> <span class="nav-text">Using filesort（文件内排序）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Using-temporary"><span class="nav-number">14.4.4.10.2.</span> <span class="nav-text">Using temporary</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Using-index"><span class="nav-number">14.4.4.10.3.</span> <span class="nav-text">Using index</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Using-where"><span class="nav-number">14.4.4.10.4.</span> <span class="nav-text">Using where</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Using-join-buffer"><span class="nav-number">14.4.4.10.5.</span> <span class="nav-text">Using join buffer</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Impossible-where"><span class="nav-number">14.4.4.10.6.</span> <span class="nav-text">Impossible where</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#select-tables-optimized-away"><span class="nav-number">14.4.4.10.7.</span> <span class="nav-text">select tables optimized away</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#distinct"><span class="nav-number">14.4.4.10.8.</span> <span class="nav-text">distinct</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E8%AF%B4%E6%98%8E"><span class="nav-number">14.4.4.10.9.</span> <span class="nav-text">示例说明</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E8%A1%A8%E4%BC%98%E5%8C%96%E6%A1%88%E4%BE%8B"><span class="nav-number">14.4.5.</span> <span class="nav-text">单表优化案例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%A4%E8%A1%A8%E4%BC%98%E5%8C%96%E6%A1%88%E4%BE%8B"><span class="nav-number">14.4.6.</span> <span class="nav-text">两表优化案例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E8%A1%A8%E4%BC%98%E5%8C%96%E6%A1%88%E4%BE%8B"><span class="nav-number">14.4.7.</span> <span class="nav-text">三表优化案例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96"><span class="nav-number">14.5.</span> <span class="nav-text">索引优化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%98%E5%8C%96%E4%B8%80%EF%BC%9A%E5%85%A8%E5%80%BC%E5%8C%B9%E9%85%8D"><span class="nav-number">14.5.0.1.</span> <span class="nav-text">优化一：全值匹配</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%98%E5%8C%96%E4%BA%8C%EF%BC%9A%E6%9C%80%E4%BD%B3%E5%B7%A6%E5%89%8D%E7%BC%80%E6%B3%95%E5%88%99"><span class="nav-number">14.5.0.2.</span> <span class="nav-text">优化二：最佳左前缀法则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%98%E5%8C%96%E4%B8%89%EF%BC%9A%E4%B8%8D%E5%9C%A8%E7%B4%A2%E5%BC%95%E5%88%97%E4%B8%8A%E5%81%9A%E4%BB%BB%E4%BD%95%E6%93%8D%E4%BD%9C"><span class="nav-number">14.5.0.3.</span> <span class="nav-text">优化三：不在索引列上做任何操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%98%E5%8C%96%E5%9B%9B%EF%BC%9A%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E4%B8%8D%E8%83%BD%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95%E4%B8%AD%E8%8C%83%E5%9B%B4%E6%9D%A1%E4%BB%B6%E5%8F%B3%E8%BE%B9%E7%9A%84%E5%88%97"><span class="nav-number">14.5.0.4.</span> <span class="nav-text">优化四：存储引擎不能使用索引中范围条件右边的列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%98%E5%8C%96%E4%BA%94%EF%BC%9A%E5%B0%BD%E9%87%8F%E4%BD%BF%E7%94%A8%E8%A6%86%E7%9B%96%E7%B4%A2%E5%BC%95"><span class="nav-number">14.5.0.5.</span> <span class="nav-text">优化五：尽量使用覆盖索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%98%E5%8C%96%E5%85%AD%EF%BC%9A-x3D-%E5%92%8C-lt-gt-%E5%AF%BC%E8%87%B4%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88"><span class="nav-number">14.5.0.6.</span> <span class="nav-text">优化六：!&#x3D; 和 &lt;&gt;导致索引失效</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%98%E5%8C%96%E4%B8%83%EF%BC%9Ais-null%EF%BC%8Cis-not-null%E4%B9%9F%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95"><span class="nav-number">14.5.0.7.</span> <span class="nav-text">优化七：is null，is not null也无法使用索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%98%E5%8C%96%E5%85%AB%EF%BC%9Alike-%E4%BB%A5%E9%80%9A%E9%85%8D%E7%AC%A6%E5%BC%80%E5%A4%B4%EF%BC%88-ab%E2%80%A6%E2%80%99%EF%BC%89"><span class="nav-number">14.5.0.8.</span> <span class="nav-text">优化八：like 以通配符开头（%ab…’）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%98%E5%8C%96%E4%B9%9D%EF%BC%9A%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8D%E5%8A%A0%E5%8D%95%E5%BC%95%E5%8F%B7%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88"><span class="nav-number">14.5.0.9.</span> <span class="nav-text">优化九：字符串不加单引号索引失效</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%98%E5%8C%96%E5%8D%81%EF%BC%9A%E5%B0%91%E7%94%A8or%EF%BC%8C%E7%94%A8%E5%AE%83%E6%9D%A5%E8%BF%9E%E6%8E%A5%E6%97%B6%E4%BC%9A%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88"><span class="nav-number">14.5.0.10.</span> <span class="nav-text">优化十：少用or，用它来连接时会索引失效</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88%E7%9A%84%E6%83%85%E5%86%B5"><span class="nav-number">14.5.0.11.</span> <span class="nav-text">示例：索引失效的情况</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%80%E8%88%AC%E6%80%A7%E5%BB%BA%E8%AE%AE"><span class="nav-number">14.5.0.12.</span> <span class="nav-text">一般性建议</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E6%88%AA%E5%8F%96%E5%88%86%E6%9E%90"><span class="nav-number">15.</span> <span class="nav-text">查询截取分析</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96"><span class="nav-number">15.1.</span> <span class="nav-text">查询优化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%8F%E8%A1%A8%E9%A9%B1%E5%8A%A8%E5%A4%A7%E8%A1%A8%EF%BC%88in-%E5%92%8C-exists%EF%BC%89"><span class="nav-number">15.1.1.</span> <span class="nav-text">小表驱动大表（in 和 exists）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ORDER-BY%E5%85%B3%E9%94%AE%E5%AD%97%E4%BC%98%E5%8C%96"><span class="nav-number">15.1.2.</span> <span class="nav-text">ORDER BY关键字优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#filesort"><span class="nav-number">15.1.3.</span> <span class="nav-text">filesort</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#group-by%E5%85%B3%E9%94%AE%E5%AD%97%E4%BC%98%E5%8C%96"><span class="nav-number">15.1.4.</span> <span class="nav-text">group by关键字优化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97"><span class="nav-number">15.2.</span> <span class="nav-text">慢查询日志</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89-1"><span class="nav-number">15.2.1.</span> <span class="nav-text">定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8"><span class="nav-number">15.2.2.</span> <span class="nav-text">使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%98%AF%E5%90%A6%E5%BC%80%E5%90%AF%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E5%BC%80%E5%90%AF"><span class="nav-number">15.2.2.1.</span> <span class="nav-text">查看是否开启以及如何开启</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E9%98%88%E5%80%BC%E6%97%B6%E9%97%B4"><span class="nav-number">15.2.2.2.</span> <span class="nav-text">设置阈值时间</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%85%A2%E6%9F%A5%E8%AF%A2%E7%A4%BA%E4%BE%8B"><span class="nav-number">15.2.2.3.</span> <span class="nav-text">慢查询示例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE"><span class="nav-number">15.2.2.4.</span> <span class="nav-text">文件配置</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7-mysqldumpslow"><span class="nav-number">15.2.3.</span> <span class="nav-text">日志分析工具 mysqldumpslow</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E6%95%B0%E6%8D%AE%E8%84%9A%E6%9C%AC"><span class="nav-number">15.3.</span> <span class="nav-text">批量数据脚本</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE"><span class="nav-number">15.3.1.</span> <span class="nav-text">准备数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E5%8F%82%E6%95%B0-log-bin-trust-function-creators"><span class="nav-number">15.3.2.</span> <span class="nav-text">设置参数 log_bin_trust_function_creators</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0"><span class="nav-number">15.3.3.</span> <span class="nav-text">创建函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9A%8F%E6%9C%BA%E4%BA%A7%E7%94%9F%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">15.3.3.1.</span> <span class="nav-text">随机产生字符串</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9A%8F%E6%9C%BA%E4%BA%A7%E7%94%9F%E9%83%A8%E9%97%A8%E7%BC%96%E5%8F%B7"><span class="nav-number">15.3.3.2.</span> <span class="nav-text">随机产生部门编号</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">15.3.4.</span> <span class="nav-text">创建存储过程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BE%80emp%E8%A1%A8%E4%B8%AD%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">15.3.4.1.</span> <span class="nav-text">往emp表中插入数据的存储过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BE%80dept%E8%A1%A8%E4%B8%AD%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">15.3.4.2.</span> <span class="nav-text">往dept表中插入数据的存储过程</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">15.3.5.</span> <span class="nav-text">调用存储过程</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Show-Profile"><span class="nav-number">15.4.</span> <span class="nav-text">Show Profile</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97"><span class="nav-number">15.5.</span> <span class="nav-text">全局查询日志</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Fei</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">47</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Fei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
